<!DOCTYPE html><style>body {
  cursor: url(https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@latest/Hexo/img/default.cur),
  default;
}

a,
img {
  cursor: url(https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@latest/Hexo/img/pointer.cur),
  default;
}

::-webkit-scrollbar-thumb {
  background-color: dodgerblue;
  background-image: -webkit-linear-gradient(
    45deg,
    rgba(255, 255, 255, .4) 25%,
    transparent 25%,
    transparent 50%, rgba(255, 255, 255, .4) 50%,
    rgba(255, 255, 255, .4) 75%,
    transparent 75%,
    transparent);
  border-radius: 3em;
}

::-webkit-scrollbar-track {
  background-color: #DEDEDE;
  border-radius: 3em;
}

::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}</style><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/favicon-16x16.png?v=2.6.2" type="image/png" sizes="16x16"><link rel="icon" href="/favicon-32x32.png?v=2.6.2" type="image/png" sizes="32x32"><meta name="description" content="SSM框架基础入门知识，包括Spring、SpringMVC、Mybatis和Mybatis-Plus基本用法和简单原理，以及框架间的集成方法。">
<meta property="og:type" content="article">
<meta property="og:title" content="SSM框架基础">
<meta property="og:url" content="http://taoyyz.github.io/2021/08/20/SSM%E6%A1%86%E6%9E%B6/index.html">
<meta property="og:site_name" content="欢迎光临taoyyz的Blog">
<meta property="og:description" content="SSM框架基础入门知识，包括Spring、SpringMVC、Mybatis和Mybatis-Plus基本用法和简单原理，以及框架间的集成方法。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210817142426719.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210817143126587.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210817145031674.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210817145149356.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210817145209302.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210817145136182.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210817145915770.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210817151121696.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210817152736007.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210817153348508.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210817170600266.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210817174502199.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210817175414157.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210817200449058.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210817202516725.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210817202617838.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210817202904688.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210817212227550.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210817220929954.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210818010245791.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210818132536592.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210818135620250.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210818151741663.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210818151952895.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210818152241456.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210818152254065.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210818154946053.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210818172612181.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210818181133229.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210819162522038.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210821164156819.png">
<meta property="og:image" content="http://taoyyz.github.io/2021/08/20/SSM%E6%A1%86%E6%9E%B6/images/image-20211222211806443.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210821190329982.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210821220350274.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210822154545596.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210822165932936.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210822173527109.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210822174251488.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210822175929810.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210823030556659.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210823172634343.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210823211628684.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210824180725774.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210824180818367.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210918162712849.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210918171312644.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210825133345997.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210825133420192.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210825153818996.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210825164447435.png">
<meta property="og:image" content="http://taoyyz.github.io/images/image-20210825160947082.png">
<meta property="article:published_time" content="2021-08-20T10:02:17.000Z">
<meta property="article:modified_time" content="2023-09-28T16:56:12.301Z">
<meta property="article:author" content="taoyyz小陶">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="Mybatis">
<meta property="article:tag" content="Spring">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://taoyyz.github.io/images/image-20210817142426719.png"><title>SSM框架基础 | 欢迎光临taoyyz的Blog</title><link ref="canonical" href="http://taoyyz.github.io/2021/08/20/SSM%E6%A1%86%E6%9E%B6/"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.6.2"><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  assistSearch: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":true,"scrollDownIcon":true},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"carbon","highlight":"light","wordWrap":true},
  reward: true,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: true,
  pjax: {"avoidBanner":false},
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"复制","copySuccess":"复制成功","copyError":"复制失败"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 5.4.0"></head><body><canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;"></canvas><script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script><script type="text/javascript" src="/js/firework.js"></script><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">首页</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">归档</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/categories/"><span class="header-nav-menu-item__icon"><i class="fas fa-layer-group"></i></span><span class="header-nav-menu-item__text">分类</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/tags/"><span class="header-nav-menu-item__icon"><i class="fas fa-tags"></i></span><span class="header-nav-menu-item__text">标签</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/links/"><span class="header-nav-menu-item__icon"><i class="fas fa-link"></i></span><span class="header-nav-menu-item__text">资源和链接</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/about/"><span class="header-nav-menu-item__icon"><i class="far fa-address-card"></i></span><span class="header-nav-menu-item__text">关于</span></a></div></div><div class="header-nav-search"><span class="header-nav-search__icon"><i class="fas fa-search"></i></span><span class="header-nav-search__text">搜索</span></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title">欢迎光临taoyyz的Blog</div><div class="header-banner-info__subtitle"></div></div><div class="header-banner-arrow"><div class="header-banner-arrow__icon"><i class="fas fa-angle-down"></i></div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content" id="content"><!-- Just used to judge whether it is an article page--><div id="is-post"></div><div class="post"><header class="post-header"><h1 class="post-title">SSM框架基础</h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2021-08-20</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2023-09-29</span></span><span class="post-meta-item post-meta-item--wordcount"><span class="post-meta-item__icon"><i class="far fa-file-word"></i></span><span class="post-meta-item__info">字数统计</span><span class="post-meta-item__value">22.5k</span></span><span class="post-meta-item post-meta-item--readtime"><span class="post-meta-item__icon"><i class="far fa-clock"></i></span><span class="post-meta-item__info">阅读时长</span><span class="post-meta-item__value">169分</span></span></div></header><div class="post-body">
        <h1 id="Spring">
          <a href="#Spring" class="heading-link"><i class="fas fa-link"></i></a><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h1>
      
        <h2 id="Spring入门">
          <a href="#Spring入门" class="heading-link"><i class="fas fa-link"></i></a><a href="#Spring入门" class="headerlink" title="Spring入门"></a>Spring入门</h2>
      
        <h3 id="Spring简介">
          <a href="#Spring简介" class="heading-link"><i class="fas fa-link"></i></a><a href="#Spring简介" class="headerlink" title="Spring简介"></a>Spring简介</h3>
      <ul>
<li>Spring是分层的Java SE/EE应用full-stack轻量级开源框架，以<font color="red"><strong>IoC</strong></font>（Inverse Of Control：控制反转）和**<font color="red">AOP</font>**（Aspect Oriented Programming）为内核</li>
<li>Spring提供了<font color="red">展现层SpringMVC</font>和<font color="red">持久层Spring JDBCTemplate</font>以及<font color="red">业务层事务管理</font>等众多的企业级应用技术，还能整合开源世界众多著名的第三方框架和类库，逐渐成为使用最多的Java EE企业应用开源框架</li>
</ul>

        <h3 id="Spring发展历程">
          <a href="#Spring发展历程" class="heading-link"><i class="fas fa-link"></i></a><a href="#Spring发展历程" class="headerlink" title="Spring发展历程"></a>Spring发展历程</h3>
      <ul>
<li>1997年，IBM提出EJB思想</li>
<li>1998年，SUN制定开发标准规范EJB1.0</li>
<li>1999年，EJB1.1发布</li>
<li>2001年，EJB2.0发布</li>
<li>2003年，EJB2.1发布</li>
<li>2006年，EJB3.0发布</li>
<li>2017年9月发布了Spring的最新版本Spring5.0通用版</li>
</ul>

        <h3 id="Spring的优势">
          <a href="#Spring的优势" class="heading-link"><i class="fas fa-link"></i></a><a href="#Spring的优势" class="headerlink" title="Spring的优势"></a>Spring的优势</h3>
      <ul>
<li><strong><font color="red">方便解耦，简化开发</font></strong><ul>
<li>通过Spring提供的IoC容器，可以将对象间的依赖关系交由Spring进行控制，避免硬编码所造成的过度耦合，用户也不必再为单例模式类、属性文件解析等这些底层需求编写代码，而更专注于上层的应用</li>
</ul>
</li>
<li><strong><font color="red">AOP编程的支持</font></strong><ul>
<li>通过Spring的AOP功能，方便进行面向切面编程，许多不容易用传统OOP实现的功能可以通过AOP实现</li>
</ul>
</li>
<li><strong><font color="red">声明式事务的支持</font></strong><ul>
<li>可以将我们从单调烦闷的事务管理代码中解脱出来，通过声明式方式灵活的进行事务管理，提高开发效率</li>
</ul>
</li>
<li><strong><font color="red">方便程序的测试</font></strong><ul>
<li>可以用非容器依赖的编程方式进行几乎所有的测试工作，测试不再是昂贵的操作，而是随手可做的事情</li>
</ul>
</li>
<li><strong><font color="red">方便集成各种优秀框架</font></strong><ul>
<li>Spring对各种优秀的框架（Structs、Hibernate、HEssian、Quartz等）的支持</li>
</ul>
</li>
<li><strong><font color="red">降低Java EE API的使用难度</font></strong><ul>
<li>Spring对Java EE API（如JDBC、JavaMail、远程调用等）进行了薄薄的封装层，降低了API的使用难度</li>
</ul>
</li>
<li><strong><font color="red">Java源码的经典学习典范</font></strong><ul>
<li>Spring的源代码设计精妙、结构清晰、匠心独到，处处体现着大师对Java设计模式的灵活运用以及对Java技术的高深造诣。</li>
</ul>
</li>
</ul>

        <h3 id="Spring的体系结构">
          <a href="#Spring的体系结构" class="heading-link"><i class="fas fa-link"></i></a><a href="#Spring的体系结构" class="headerlink" title="Spring的体系结构"></a>Spring的体系结构</h3>
      
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210817142426719.png" alt="image-20210817142426719" style="zoom:67%;">
       


        <h3 id="Spring快速入门">
          <a href="#Spring快速入门" class="heading-link"><i class="fas fa-link"></i></a><a href="#Spring快速入门" class="headerlink" title="Spring快速入门"></a>Spring快速入门</h3>
      
        <h4 id="Spring程序开发步骤">
          <a href="#Spring程序开发步骤" class="heading-link"><i class="fas fa-link"></i></a><a href="#Spring程序开发步骤" class="headerlink" title="Spring程序开发步骤"></a>Spring程序开发步骤</h4>
      
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210817143126587.png" alt="image-20210817143126587" style="zoom: 50%;">
      

<ol>
<li><p>导入Spring开发的基本包坐标：<code>spring-context</code></p>

        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210817145031674.png" alt="image-20210817145031674" style="zoom:80%;">
       </li>
<li><p>编写dao层接口（UserDao）和实现类（UserDaoImpl）</p>
<p><code>UserDao</code>：
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210817145149356.png" alt="image-20210817145149356" style="zoom: 65%;">
        <code>UserDaoImpl</code>：
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210817145209302.png" alt="image-20210817145209302" style="zoom: 65%;">
      </p>
</li>
<li><p>创建Spring核心配置文件</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.taoyyz.dao.impl.UserDaoImpl&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>在Spring配置文件中配置UserDaoImpl</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.taoyyz.dao.impl.UserDaoImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>使用Spring的API获得Bean的实例（而非<code>new UserDaoImpl()</code>）</p>
<p>
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210817145136182.png" alt="image-20210817145136182">
      </p>
</li>
</ol>

        <h2 id="Spring配置文件">
          <a href="#Spring配置文件" class="heading-link"><i class="fas fa-link"></i></a><a href="#Spring配置文件" class="headerlink" title="Spring配置文件"></a>Spring配置文件</h2>
      
        <h3 id="Bean标签基本配置">
          <a href="#Bean标签基本配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#Bean标签基本配置" class="headerlink" title="Bean标签基本配置"></a>Bean标签基本配置</h3>
      <ul>
<li>概述：<ul>
<li>用于配置对象交由Spring来创建</li>
<li>默认情况下它调用的是类中的无参构造方法，如果没有无参构造方法则不能创建成功</li>
</ul>
</li>
<li>基本属性：<ul>
<li><code>id</code>：Bean实例在Spring容器内的唯一标识</li>
<li><code>class</code>：Bean的全限定名称</li>
</ul>
</li>
</ul>

        <h3 id="Bean标签范围配置">
          <a href="#Bean标签范围配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#Bean标签范围配置" class="headerlink" title="Bean标签范围配置"></a>Bean标签范围配置</h3>
      <ul>
<li><code>scope</code>属性：对象的作用范围，取值如下：</li>
</ul>

        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210817145915770.png" alt="image-20210817145915770" style="zoom: 60%;">
      

<ul>
<li><p><code>scope</code>属性控制下的Bean的创建时机：</p>

        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210817151121696.png" alt="image-20210817151121696" style="zoom:60%;">
       </li>
</ul>

        <h3 id="Bean的生命周期配置">
          <a href="#Bean的生命周期配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#Bean的生命周期配置" class="headerlink" title="Bean的生命周期配置"></a>Bean的生命周期配置</h3>
      <ul>
<li><code>init-method</code>：为此bean指定一个<strong>初始化</strong>时的方法</li>
<li><code>destroy-method</code>：为此bean指定一个<strong>销毁</strong>时的方法<ul>
<li>值得注意的是，在单元测试时的Spring要正常关闭，需要调用<code>ClassPathXmlApplicationContext</code>对象的<code>close()</code>方法才能正常关闭Spring，以及调用bean的销毁方法</li>
</ul>
</li>
</ul>

        <h3 id="Bean实例化的三种方式">
          <a href="#Bean实例化的三种方式" class="heading-link"><i class="fas fa-link"></i></a><a href="#Bean实例化的三种方式" class="headerlink" title="Bean实例化的三种方式"></a>Bean实例化的三种方式</h3>
      <ul>
<li><p><strong>无参构造</strong>方法实例化</p>
<ul>
<li><p>定义一个Bean（默认有无参构造）</p>
</li>
<li><p>在配置文件中配置bean的属性：</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.taoyyz.dao.impl.UserDaoImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
</ul>
</li>
<li><p><strong>工厂静态</strong>方法实例化</p>
<ul>
<li><p>定义一个工厂类，在静态方法里生产Bean：
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210817152736007.png" alt="image-20210817152736007" style="zoom: 67%;">
      </p>
</li>
<li><p>在配置文件中配置bean的属性：</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.taoyyz.factory.StaticFactory&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">factory-method</span>=<span class="string">&quot;getUserDao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
</ul>
</li>
<li><p><strong>工厂实例</strong>方法实例化</p>
<ul>
<li><p>定义一个工厂类，在实例方法里生产Bean：
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210817153348508.png" alt="image-20210817153348508" style="zoom:67%;">
      </p>
</li>
<li><p>在配置文件中配置bean的属性：</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--先加载工厂的实例Bean--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;factory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.taoyyz.factory.DynamicFactory&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span> </span><br><span class="line"><span class="comment">&lt;!--再从工厂的实例里调方法--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">factory-bean</span>=<span class="string">&quot;factory&quot;</span> <span class="attr">factory-method</span>=<span class="string">&quot;getUserDao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span> </span><br></pre></td></tr></table></div></figure></li>
</ul>
</li>
</ul>

        <h3 id="Bean的依赖注入DI">
          <a href="#Bean的依赖注入DI" class="heading-link"><i class="fas fa-link"></i></a><a href="#Bean的依赖注入DI" class="headerlink" title="Bean的依赖注入DI"></a>Bean的依赖注入DI</h3>
      
        <h4 id="概念">
          <a href="#概念" class="heading-link"><i class="fas fa-link"></i></a><a href="#概念" class="headerlink" title="概念"></a>概念</h4>
      <ul>
<li>依赖注入（Dependency Injection）：它是Spring框架核心IoC的具体实现 </li>
</ul>

        <h4 id="注入的方式：">
          <a href="#注入的方式：" class="heading-link"><i class="fas fa-link"></i></a><a href="#注入的方式：" class="headerlink" title="注入的方式："></a>注入的方式：</h4>
      <ul>
<li><p><strong>构造方法注入</strong>：</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.taoyyz.service.impl.UserServiceImpl&quot;</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--name是注入到哪个成员属性，ref是引用哪个bean--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p><strong>set方法注入</strong>：切割<code>setXxx()</code>方法，取<code>Xxx</code>部分首字母变小写作为set到的成员属性名</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置被依赖的bean--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.taoyyz.dao.impl.UserDaoImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--下面的UserService的bean依赖于上述userDao的bean--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.taoyyz.service.impl.UserServiceImpl&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ref引用userDao这个bean，注入到userServiceImpl的name指定的成员属性里--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p><strong>简化set方法的p命名空间注入：</strong></p>
<ul>
<li><p>引入p命名空间的xmlns约束：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</span><br></pre></td></tr></table></div></figure></li>
<li><p>在需要注入的bean上利用p标签注入引用：</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置被依赖的bean--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.taoyyz.dao.impl.UserDaoImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--下面的UserService的bean依赖于上述userDao的bean--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.taoyyz.service.impl.UserServiceImpl&quot;</span> <span class="attr">p:userDao-ref</span>=<span class="string">&quot;userDao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
</ul>
</li>
</ul>

        <h4 id="注入的数据类型">
          <a href="#注入的数据类型" class="heading-link"><i class="fas fa-link"></i></a><a href="#注入的数据类型" class="headerlink" title="注入的数据类型"></a>注入的数据类型</h4>
      <ul>
<li><p>上述注入方式都是注入的Bean。除了对象的引用可以注入外，普通数据类型、集合等都可以在容器中注入</p>
</li>
<li><p>注入数据的三种数据类型</p>
<ul>
<li><p>普通数据类型</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.taoyyz.dao.impl.UserDaoImpl&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--name为要注入的成员属性名，value为此成员属性的字面值--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;taoyyz&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;18&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>引用数据类型</p>
</li>
<li><p>集合数据类型</p>
<ul>
<li>List集合</li>
</ul>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;strList&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>aaa<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>bbb<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>ccc<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<ul>
<li>Map集合</li>
</ul>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userMap&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--由于map是由一个一个entry组成，每个entry包含key和value--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--这里key是字符串String直接给字面值，但是value是User对象需要给引用--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;tao&quot;</span> <span class="attr">value-ref</span>=<span class="string">&quot;user1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;胖&quot;</span> <span class="attr">value-ref</span>=<span class="string">&quot;user2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<ul>
<li>Properties集合</li>
</ul>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;properties&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;prop1&quot;</span>&gt;</span>第一个prop<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;prop2&quot;</span>&gt;</span>第二个prop<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
</ul>
</li>
</ul>

        <h3 id="配置文件的引入">
          <a href="#配置文件的引入" class="heading-link"><i class="fas fa-link"></i></a><a href="#配置文件的引入" class="headerlink" title="配置文件的引入"></a>配置文件的引入</h3>
      <ul>
<li><p>将部分配置拆解到其他配置文件中，在Spring主配置文件通过import标签引入即可</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;要引入的其他Spring配置文件名&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">import</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
</ul>

        <h3 id="Spring配置的重点回顾">
          <a href="#Spring配置的重点回顾" class="heading-link"><i class="fas fa-link"></i></a><a href="#Spring配置的重点回顾" class="headerlink" title="Spring配置的重点回顾"></a>Spring配置的重点回顾</h3>
      
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210817170600266.png" alt="image-20210817170600266" style="zoom:67%;">
       


        <h2 id="Spring相关API">
          <a href="#Spring相关API" class="heading-link"><i class="fas fa-link"></i></a><a href="#Spring相关API" class="headerlink" title="Spring相关API"></a>Spring相关API</h2>
      
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210817174502199.png" alt="image-20210817174502199">
      


        <h3 id="ApplicationContext的实现类：">
          <a href="#ApplicationContext的实现类：" class="heading-link"><i class="fas fa-link"></i></a><a href="#ApplicationContext的实现类：" class="headerlink" title="ApplicationContext的实现类："></a>ApplicationContext的实现类：</h3>
      <ul>
<li><p><strong>ClassPathXmlApplicationContext</strong></p>
<ul>
<li>从类的根路径下加载配置文件推荐使用这种</li>
</ul>
</li>
<li><p><strong>FileSystemXmlApplicationContext</strong></p>
<ul>
<li>从磁盘路径上加载配置文件，配置文件可以在磁盘的任意位置</li>
</ul>
</li>
<li><p><strong>AnnotationConfigApplicationContext</strong></p>
<ul>
<li><p>使用注解配置容器对象时，使用此类来创建Spring容器，用来读取注解</p>

        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210817175414157.png" alt="image-20210817175414157" style="zoom:67%;">
      </li>
</ul>
</li>
</ul>

        <h3 id="getBean-方法">
          <a href="#getBean-方法" class="heading-link"><i class="fas fa-link"></i></a><a href="#getBean-方法" class="headerlink" title="getBean()方法"></a>getBean()方法</h3>
      <ul>
<li><p>参数为bean的id的字符串，此时总能获取此id对应的Object类型的bean实例</p>
  <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">getBean</span><span class="params">(String name)</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.assertBeanFactoryActive();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.getBeanFactory().getBean(name);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></div></figure></li>
<li><p>参数为T类型的Class对象，从容器中匹配T类型的bean实例并返回，如果有多个此类型的bean时会报错</p>
  <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> &lt;T&gt; <span class="function">T <span class="title">getBean</span><span class="params">(Class&lt;T&gt; requiredType)</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.assertBeanFactoryActive();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.getBeanFactory().getBean(requiredType);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></div></figure></li>
</ul>

        <h2 id="Spring配置数据源">
          <a href="#Spring配置数据源" class="heading-link"><i class="fas fa-link"></i></a><a href="#Spring配置数据源" class="headerlink" title="Spring配置数据源"></a>Spring配置数据源</h2>
      
        <h3 id="数据源（连接池）的作用">
          <a href="#数据源（连接池）的作用" class="heading-link"><i class="fas fa-link"></i></a><a href="#数据源（连接池）的作用" class="headerlink" title="数据源（连接池）的作用"></a>数据源（连接池）的作用</h3>
      <ul>
<li>数据源（连接池）是提高程序性能出现的</li>
<li>实例化数据源，初始化部分连接资源</li>
<li>使用连接资源时从数据源中获取</li>
<li>使用完毕后归还连接资源给数据源</li>
</ul>
<p>常见的数据源（连接池）：DBCP、C3P0、BoneCP、Druid等</p>

        <h3 id="数据源的使用步骤">
          <a href="#数据源的使用步骤" class="heading-link"><i class="fas fa-link"></i></a><a href="#数据源的使用步骤" class="headerlink" title="数据源的使用步骤"></a>数据源的使用步骤</h3>
      <ul>
<li>导入数据源的坐标和数据库驱动坐标</li>
<li>创建数据源对象</li>
<li>设置连接数据源的基本连接信息（驱动、数据库URL、用户名、密码）</li>
<li>使用数据源获取连接资源和归还连接资源</li>
</ul>

        <h3 id="数据源的手动创建">
          <a href="#数据源的手动创建" class="heading-link"><i class="fas fa-link"></i></a><a href="#数据源的手动创建" class="headerlink" title="数据源的手动创建"></a>数据源的手动创建</h3>
      <ul>
<li>创建数据源对象</li>
<li>设置数据源参数</li>
<li>获取连接</li>
<li>归还连接</li>
</ul>

        <h3 id="Spring配置数据源的Bean">
          <a href="#Spring配置数据源的Bean" class="heading-link"><i class="fas fa-link"></i></a><a href="#Spring配置数据源的Bean" class="headerlink" title="Spring配置数据源的Bean"></a>Spring配置数据源的Bean</h3>
      <ul>
<li><p>在Spring配置文件中装载数据源为bean，class为此数据源的全类名</p>
</li>
<li><p>配置此bean的参数，也就是数据源需要的一些参数（驱动、数据库URL、用户名、密码）</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--装载ComboPooledDataSource对象为bean--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql:///db1&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;199988&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>即可通过Spring的Context上下文去<code>getBean()</code>得到此bean（数据源对象），执行后续操作</p>
</li>
</ul>

        <h3 id="Spring加载properties文件">
          <a href="#Spring加载properties文件" class="heading-link"><i class="fas fa-link"></i></a><a href="#Spring加载properties文件" class="headerlink" title="Spring加载properties文件"></a>Spring加载properties文件</h3>
      <ul>
<li><p>在applicationContext.xml配置文件中加载jdbc.properties文件：</p>
<ol>
<li><p>引入context命名空间和约束路径</p>
<ul>
<li><p>命名空间：<code>xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</code></p>
</li>
<li><p>约束路径：为<code>xsi:schemaLocation</code>添加以下两行约束（注意要保证两个同类型约束挨着）：</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://www.springframework.org/schema/context</span><br><span class="line">http://www.springframework.org/schema/context/spring-context.xsd</span><br></pre></td></tr></table></div></figure></li>
</ul>
</li>
<li><p>利用<code>context</code>命名空间下的<code>property-placeholder</code>标签加载properties配置文件</p>
</li>
<li><p>使用SpEL表达式取值</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--加载外部properties文件，在location中指定位置--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:jdbc.properties&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:property-placeholder</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
</ol>
</li>
</ul>

        <h2 id="Spring注解开发">
          <a href="#Spring注解开发" class="heading-link"><i class="fas fa-link"></i></a><a href="#Spring注解开发" class="headerlink" title="Spring注解开发"></a>Spring注解开发</h2>
      <ul>
<li>Spring是一种轻代码而重配置的框架，配置比较繁重，影响开发效率，所以注解开发是一种趋势，注解代替XML配置文件可以简化配置，提高开发效率</li>
</ul>

        <h3 id="Spring原始注解">
          <a href="#Spring原始注解" class="heading-link"><i class="fas fa-link"></i></a><a href="#Spring原始注解" class="headerlink" title="Spring原始注解"></a>Spring原始注解</h3>
      <ul>
<li><p>原始注解主要是替代<code>&lt;bean&gt;</code>标签的配置</p>
<p><strong>原始注解</strong>：</p>

        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210817200449058.png" alt="image-20210817200449058" style="zoom: 60%;">
       </li>
<li><p>使用方式：</p>
<ul>
<li><p>用@Component代替所有的<code>bean</code>标签的<code>class</code>属性，此注解打在对应的类名上</p>
<p>UserDao（实现类）的bean：
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210817202516725.png" alt="image-20210817202516725" style="zoom:80%;">
       </p>
<p>UserService（实现类）的bean：
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210817202617838.png" alt="image-20210817202617838" style="zoom: 80%;">
      </p>
</li>
<li><p>用@Autowired代替所有的<code>property</code>标签内的<code>ref</code>属性，此注解打在对应的成员属性上</p>

        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210817202904688.png" alt="image-20210817202904688" style="zoom:80%;">
       </li>
<li><p>在Spring的核心配置文件中指定context命名空间的<code>component-scan</code>标签的<code>base-package</code>属性：</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--用注解方式进行装配Bean需要配置组件扫描--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.taoyyz&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--base-package属性是指定从哪个包(及其子包)扫描带注解的组件。--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>此时调用<code>getBean(String name)</code>只需要传入需要获取哪个Bean即可（也就是被打上了@Component注解的类），如果@Component没有传入参数，则默认Bean名称是类名首字母转小写</p>
</li>
</ul>
</li>
</ul>
<p><strong>说明</strong>：</p>
<ul>
<li>注解方式不同于XML，可以不写set方法，会自动给打上注解的成员属性赋值</li>
<li>@Controller、@Service、@Repository只是语义化的@Component注解<ul>
<li>@Repository可以捕获特定于平台的异常，并将它们作为Spring统一未检查异常的一部分重新抛出</li>
</ul>
</li>
<li>@Autowired可以不搭配@Qualifier，此时会<strong>按照数据类型</strong>从Spring容器进行匹配（例如匹配UserDao类型），如果匹配不到一个bean会报错，此时可以指定@Autowired的<code>required=false</code></li>
<li>@Qualifier要结合@Autowired使用，是<strong>按照名称</strong>（<code>Bean</code>的<code>id</code>）从Spring容器中进行匹配</li>
<li>@Resource相当于@Autowired + @Qualifier，此时按照名称匹配要指定@Resource注解的<code>name</code>属性值<ul>
<li>@Resource在Spring4.2之前不支持@Primary：但是在4.2之后，@Resource已经全面支持了@Primary以及提供了对@Lazy的支持</li>
</ul>
</li>
</ul>
<p><strong>Autowired补充，解决byType不唯一的NoUniqueBeanDefinitionException异常</strong>：</p>
<ul>
<li><em>向容器注入Bean的时候加上@Primary注解</em></li>
<li><em>使用@Qualifier指定beanName</em></li>
<li><em>使得需要注入的对象名，和容器里的beanName一致也可以确定唯一的bean</em></li>
</ul>

        <h3 id="Spring新注解">
          <a href="#Spring新注解" class="heading-link"><i class="fas fa-link"></i></a><a href="#Spring新注解" class="headerlink" title="Spring新注解"></a>Spring新注解</h3>
      <ul>
<li><p>使用原始注解不能全部替代XML配置文件，例如</p>
<ul>
<li>非自定义的Bean的配置：<code>&lt;bean&gt;</code></li>
<li>加载properties文件的配置：<code>&lt;context:property-placeholder&gt;</code></li>
<li>组建扫描的配置：<code>&lt;context:component-scan&gt;</code></li>
<li>引入其他文件：<code>&lt;import&gt;</code></li>
</ul>
<p><strong>新注解</strong>：</p>
</li>
</ul>

        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210817212227550.png" alt="image-20210817212227550" style="zoom:67%;">
      

<ul>
<li>使用方式：<ul>
<li>用一个类替代XML配置文件，为这个类打上@Configuration注解，表示这是一个Spring核心配置类</li>
<li>在打上@Configuration的核心配置类上再打上@ComponentScan(“包路径”)，指定组建扫描的包</li>
<li>如果想要引入其他希望产生Bean的配置类，需要在打上@Configuration的核心配置类上再打上@Import(其他配置类的<code>Class&lt;?&gt;[]</code>)即可使引入的类的Bean被Spring管理</li>
<li>用@PropertySource(“文件路径”)代替context命名空间的<code>location</code>属性，表示读取properties配置文件<ul>
<li>在@PropertySource读取到properties配置文件后，可以利用@Value(“<code>$&#123;SpEL表达式&#125;</code>“)取出properties配置文件中的<code>key</code>赋值给被打上此@Value注解的成员属性</li>
</ul>
</li>
<li>用@Bean代替<code>&lt;bean&gt;</code>标签，此注解打在方法上。此方法的方法名会作为bean的<code>id</code>属性，返回值就是bean的<code>class</code>属性，也可以指定生成的bean的<code>id</code>，即@Bean(“生成的bean的名称”)</li>
</ul>
</li>
</ul>

        <h2 id="Spring集成Junit">
          <a href="#Spring集成Junit" class="heading-link"><i class="fas fa-link"></i></a><a href="#Spring集成Junit" class="headerlink" title="Spring集成Junit"></a>Spring集成Junit</h2>
      <ul>
<li><p>原始的Junit测试Spring存在的问题：</p>
<ul>
<li>每个测试类都需要先获取上下文，然后调用getBean()</li>
</ul>
<p>
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210817220929954.png" alt="image-20210817220929954">
      </p>
</li>
<li><p>解决思路：</p>
<ul>
<li>让SpringJunit负责创建Spring容器，但是需要将配置文件的名称告诉它</li>
<li>将需要进行测试的Bean直接在测试类中进行注入</li>
</ul>
</li>
<li><p>集成步骤：</p>
<ol>
<li><p>导入Spring集成Junit的坐标</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<ul>
<li><p><font color="red">踩坑</font>：Maven中<code>spring-test</code>依赖包版本要和<code>spring-core</code>版本一致，否则会导致以下报错：</p>
<p><code>java.lang.IllegalStateException: Could not load TestContextBootstrapper</code></p>
</li>
</ul>
</li>
<li><p>使用@Runwith注解替换原来的运行期</p>
<ul>
<li><p>@Runwith(Class&lt;? extends Runner&gt;)打在测试类上，参数为一个Runner及子类的Class对象</p>
<p>例如：给测试类打上@RunWith(SpringJUnit4ClassRunner.class)的注解</p>
</li>
</ul>
</li>
<li><p>使用@ContextConfiguration指定配置文件或配置类</p>
<ul>
<li>指定XML配置文件：<code>@ContextConfiguration(&quot;classpath:applicationContext.xml&quot;)</code></li>
<li>指定配置类：<code>@ContextConfiguration(classes = SpringConfiguration.class)</code></li>
</ul>
</li>
<li><p>使用@Autowired注入需要测试的对象</p>
<ul>
<li>相当于从Spring容器中取出值给成员属性赋值</li>
</ul>
</li>
<li><p>创建测试方法进行测试</p>
</li>
</ol>
</li>
</ul>

        <h2 id="Spring集成WEB环境">
          <a href="#Spring集成WEB环境" class="heading-link"><i class="fas fa-link"></i></a><a href="#Spring集成WEB环境" class="headerlink" title="Spring集成WEB环境"></a>Spring集成WEB环境</h2>
      
        <h3 id="ApplicationContext应用上下文获取方式">
          <a href="#ApplicationContext应用上下文获取方式" class="heading-link"><i class="fas fa-link"></i></a><a href="#ApplicationContext应用上下文获取方式" class="headerlink" title="ApplicationContext应用上下文获取方式"></a>ApplicationContext应用上下文获取方式</h3>
      <ul>
<li>如果在<code>doGet()</code>或<code>doPost()</code>方法中每次都通过<code>new ClassPathXmlApplicationContext()</code>去加载应用上下文很麻烦</li>
<li>所以在WEB项目中，可以通过<code>ServletContextListener</code>监听WEB应用的启动，在启动时就加载Spring的配置文件，创建应用上下文<code>ApplicationContext</code>对象，并将其存储到最大的<code>ServletContext</code>域中，这样就可以在任意位置从域中获得应用上下文<code>ApplicationContext</code>对象了</li>
<li>也可以通过在web.xml中设置一个<code>&lt;context-param&gt;</code>标签，存入<code>param-name</code>与对应的<code>param-value</code>获取xml文件名</li>
</ul>

        <h3 id="Spring提供获取应用上下文的工具">
          <a href="#Spring提供获取应用上下文的工具" class="heading-link"><i class="fas fa-link"></i></a><a href="#Spring提供获取应用上下文的工具" class="headerlink" title="Spring提供获取应用上下文的工具"></a>Spring提供获取应用上下文的工具</h3>
      <ul>
<li><p>Spring提供了一个监听器<code>ContextLoaderListener</code>就是对上述功能的封装，该监听器内部加载Spring配置文件，创建应用上下文对象，并存储到<code>ServletContext</code>域中，提供了一个客户端工具类<code>WebApplicationContextUtils</code>供使用者获取应用上下文对象</p>
</li>
<li><p>使用方式：</p>
<ul>
<li><p>在web.xml中配置<code>ContextLoaderListener</code><strong>监听器</strong>（需要导入spring-web坐标）</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">&lt;!--配置监听器--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span></span><br><span class="line">          org.springframework.web.context.ContextLoaderListener</span><br><span class="line">      <span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>使用<code>WebApplicationContextUtils</code>的<code>getWebApplicationContext()</code>方法即可获得应用上下文对象</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext app = WebApplicationContextUtils</span><br><span class="line"> .getWebApplicationContext(request.getServletContext());</span><br></pre></td></tr></table></div></figure></li>
</ul>
<p><font color="red">踩坑</font>：出现以下错误：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.lang.ClassNotFoundException:org.springframework.web.context.ContextLoaderListener</span><br></pre></td></tr></table></div></figure>

<ol>
<li>考虑web.xml的版本过高，Tomcat8.5环境下修改web.xml的4.0版本为低版本，或换用Tomcat9</li>
<li>考虑修改IDEA的项目结构：设置工件
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210818010245791.png" alt="image-20210818010245791" style="zoom:80%;">
      </li>
</ol>
</li>
</ul>

        <h1 id="SpringMVC">
          <a href="#SpringMVC" class="heading-link"><i class="fas fa-link"></i></a><a href="#SpringMVC" class="headerlink" title="SpringMVC"></a>SpringMVC</h1>
      
        <h2 id="SpringMVC概述">
          <a href="#SpringMVC概述" class="heading-link"><i class="fas fa-link"></i></a><a href="#SpringMVC概述" class="headerlink" title="SpringMVC概述"></a>SpringMVC概述</h2>
      <ul>
<li>SpringMVC是一种基于Java的实现<font color="red">MVC设计模式</font>的请求驱动类型的<font color="red">轻量级WEB框架</font>，属于SpringFrameWork的后续产品，已经融合在Spring Web Flow中</li>
<li>SpringMVC已经成为目前<font color="red">最主流的MVC框架之一</font>，并且随着Spring3.0发布，全面超越Struts2，成为最优秀的MVC框架。它通过一套注解，让一个简单的Java类成为处理请求的控制器，而无需实现任何接口，同时还<font color="red">支持RESTful编程风格</font>的请求</li>
</ul>

        <h2 id="SpringMVC快速入门">
          <a href="#SpringMVC快速入门" class="heading-link"><i class="fas fa-link"></i></a><a href="#SpringMVC快速入门" class="headerlink" title="SpringMVC快速入门"></a>SpringMVC快速入门</h2>
      <ul>
<li>客户端发起请求，服务器端接收请求，执行逻辑并进行视图跳转</li>
</ul>
<p>
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210818132536592.png" alt="image-20210818132536592">
      </p>
<ul>
<li><p>开发步骤：</p>
<ol>
<li><p>导入SpringMVC相关坐标</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>配置SpringMVC核心控制器DispatcherServlet</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置一个SpringMVC的前端控制器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring-mvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>创建Controller类和视图页面</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;taoyyz.do&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">method1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Controller method1执行啦&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success.jsp&quot;</span>; <span class="comment">//返回一个JSP视图给浏览器</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hhh&quot;)</span> <span class="comment">//返回值为void会默认返回名为hhh.jsp的视图</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">t</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;hhh来了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></li>
<li><p>使用注解配置Controller类中业务方法的映射地址：即@RequestMapping</p>
</li>
<li><p>配置SpringMVC核心配置文件：<code>spring-mvc.xml</code></p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--启动组件扫描--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.taoyyz.controller&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--启动允许注解驱动--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>客户端发请求测试</p>
</li>
</ol>
</li>
</ul>

        <h2 id="SpringMVC组件解析">
          <a href="#SpringMVC组件解析" class="heading-link"><i class="fas fa-link"></i></a><a href="#SpringMVC组件解析" class="headerlink" title="SpringMVC组件解析"></a>SpringMVC组件解析</h2>
      
        <h3 id="SpringMVC的执行流程">
          <a href="#SpringMVC的执行流程" class="heading-link"><i class="fas fa-link"></i></a><a href="#SpringMVC的执行流程" class="headerlink" title="SpringMVC的执行流程"></a>SpringMVC的执行流程</h3>
      <p>
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210818135620250.png" alt="image-20210818135620250">
      </p>
<ol>
<li>用户发送请求到前端控制器DispatcherServlet</li>
<li>DispatcherServlet收到请求调用HandlerMapping处理器映射器</li>
<li>处理器映射器找到具体的处理器（可以根据XML配置或注解进行查找），生成处理器对象及处理器拦截器（如果有）一并返回给DispathcerServlet</li>
<li>DispatcherServlet调用HandlerAdapter处理器适配器</li>
<li>HadlerAdapter适配器经过适配调用具体的处理器（也就是后端控制器Controller）</li>
<li>Controller执行完成返回ModelAndView</li>
<li>HandlerAdapter将Controller执行结果ModelAndView返回给DispatcherServlet</li>
<li>DispatcherServlet将ModelAndView传给ViewResolver视图解析器</li>
<li>ViewResolver解析后返回具体View</li>
<li>DispatcherServlet根据View进行渲染视图（将模型数据填充至视图中），然后响应给用户</li>
</ol>

        <h3 id="SpringMVC注解配置解析">
          <a href="#SpringMVC注解配置解析" class="heading-link"><i class="fas fa-link"></i></a><a href="#SpringMVC注解配置解析" class="headerlink" title="SpringMVC注解配置解析"></a>SpringMVC注解配置解析</h3>
      <ul>
<li><p><strong>@RequestMapping</strong></p>
<ul>
<li><p>作用：用于建立请求的URL和处理请求的方法之间的对应关系</p>
</li>
<li><p>位置：</p>
<ul>
<li>类上：请求URL的第一级访问目录，此处不写的话默认为应用上下文根目录</li>
<li>方法上：请求URL的第二级访问目录，与类上的第一级目录一起组成虚拟访问路径</li>
</ul>
</li>
<li><p>属性：</p>
<ul>
<li><p><code>value</code>：用于指定请求的URL，它和<code>path</code>属性的作用是一样的</p>
</li>
<li><p><code>method</code>：用于指定请求的方式，取值为<code>RequestMethod</code>的枚举</p>
</li>
<li><p><code>params</code>：用于指定限制请求参数的条件，支持简单的表达式，要求请求参数的key和value必须和配置的一模一样</p>
<p>例如：<code>params = &#123;&quot;accountName&quot;&#125;</code> 表示请求参数必须含有<code>accountName</code></p>
<p>​            <code>params = &#123;&quot;money!=100&quot;&#125;</code> 表示请求参数中的<code>money</code>不能为100</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        <h3 id="SpringMVC的XML配置解析">
          <a href="#SpringMVC的XML配置解析" class="heading-link"><i class="fas fa-link"></i></a><a href="#SpringMVC的XML配置解析" class="headerlink" title="SpringMVC的XML配置解析"></a>SpringMVC的XML配置解析</h3>
      <ul>
<li><p>视图解析器：</p>
<ul>
<li>SpringMVC组件的默认配置：<code>DispatcherServlet.properties</code>位于org.springframework.web.servlet</li>
<li>此配置指定了诸如<code>HandlerMapping</code>、<code>HandlerAdapter</code>和<code>ViewResolver</code>视图解析器等组件</li>
</ul>
</li>
<li><p>在SpringMVC的XML中配置自定义<code>ViewResolver</code>的Bean可以为此Bean的成员属性赋值，例如设置前/后缀：</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置解析器的前缀和后缀--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;viewResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/jsp/&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p>前/后缀属性位于<code>InternalResourceViewResolver</code>的父类中：
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210818151741663.png" alt="image-20210818151741663" style="zoom:80%;">
      </p>
<p><code>UrlBasedViewResolver</code>还包含了重定向和转发前缀：
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210818151952895.png" alt="image-20210818151952895" style="zoom:80%;">
      </p>
</li>
</ul>

        <h3 id="知识要点：">
          <a href="#知识要点：" class="heading-link"><i class="fas fa-link"></i></a><a href="#知识要点：" class="headerlink" title="知识要点："></a>知识要点：</h3>
      <p>
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210818152241456.png" alt="image-20210818152241456" style="zoom: 67%;">
      
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210818152254065.png" alt="image-20210818152254065" style="zoom: 75%;">
      </p>

        <h2 id="SpringMVC数据响应的方式">
          <a href="#SpringMVC数据响应的方式" class="heading-link"><i class="fas fa-link"></i></a><a href="#SpringMVC数据响应的方式" class="headerlink" title="SpringMVC数据响应的方式"></a>SpringMVC数据响应的方式</h2>
      
        <h3 id="页面跳转">
          <a href="#页面跳转" class="heading-link"><i class="fas fa-link"></i></a><a href="#页面跳转" class="headerlink" title="页面跳转"></a>页面跳转</h3>
      <ul>
<li><p><strong>直接返回字符串</strong></p>
<p>
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210818154946053.png" alt="image-20210818154946053">
      </p>
<ul>
<li>如果<code>@RequestMapping</code>映射的方法返回<code>void</code>，那么会跳转到此方法的映射名作为视图的页面上，如果不希望跳转，可以使返回值类型为<code>ModelAndView</code>对象，并且<code>return null</code>就不会产生跳转</li>
</ul>
</li>
<li><p><strong>通过ModelAndView对象返回</strong></p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/method3&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">method3</span><span class="params">(ModelAndView modelAndView)</span> </span>&#123; <span class="comment">//SpringMVC会分配此对象</span></span><br><span class="line">    modelAndView.setViewName(<span class="string">&quot;success&quot;</span>); <span class="comment">//设置视图名称，也就是要跳转到的页面</span></span><br><span class="line">    modelAndView.addObject(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;method3的&quot;</span>); <span class="comment">//设置模型的内容类似Attribute</span></span><br><span class="line">    <span class="keyword">return</span> modelAndView; <span class="comment">//返回此ModelAndView</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<ul>
<li><p>也可以在映射的方法内部手动<code>new</code>一个<code>ModelAndView</code>对象，设置内容</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/method2&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">method2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView(); <span class="comment">//手动new一个模型视图对象</span></span><br><span class="line">    modelAndView.setViewName(<span class="string">&quot;success&quot;</span>); <span class="comment">//设置视图名称，也就是要跳转到的页面</span></span><br><span class="line">    modelAndView.addObject(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;tao&quot;</span>); <span class="comment">//设置模型的内容类似于Attribute</span></span><br><span class="line">    <span class="keyword">return</span> modelAndView; <span class="comment">//返回此ModelAndView</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></li>
<li><p>还可以只利用<code>Model</code>对象传递参数，方法返回值的字符串作为<code>View</code>：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/method4&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">method4</span><span class="params">(Model model)</span> </span>&#123; <span class="comment">//参数只需要Model</span></span><br><span class="line">    model.addAttribute(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;method4的&quot;</span>); <span class="comment">//设置模型的内容</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>; <span class="comment">//这里返回的字符串作为View</span></span><br></pre></td></tr></table></div></figure></li>
</ul>
</li>
</ul>

        <h3 id="回写数据">
          <a href="#回写数据" class="heading-link"><i class="fas fa-link"></i></a><a href="#回写数据" class="headerlink" title="回写数据"></a>回写数据</h3>
      <ul>
<li><p><strong>直接返回字符串</strong></p>
<ul>
<li><p>在Servlet中：<code>Response</code>对象可以使用<code>getWriter()</code>或<code>getOutputStream()</code>回写数据</p>
</li>
<li><p>在SpringMVC中，可以注入response对象回写数据，此时不需要进行视图跳转，所以返回值为<code>void</code></p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/method6&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method6</span><span class="params">(HttpServletResponse response)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>); <span class="comment">//记得设置响应头防乱码</span></span><br><span class="line">    response.getWriter().write(<span class="string">&quot;来自response的你好&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></li>
<li><p>建议使用@ResponseBody告诉SpringMVC框架不要进行视图跳转，而是当成响应体返回</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/method7&quot;,produces = &quot;text/html;charset=utf-8&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">method7</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;来自SpringMVC的回写的数据&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>@ResponseBody的响应编码默认ISO-8859-1会导致乱码，在请求映射中使用<code>produces</code>属性指定</p>
</li>
</ul>
</li>
</ul>
<p><font color="red">超级踩坑：IDEA对Maven项目依赖jar包的打包问题</font>：引入了jackson依赖后，启动项目总是报错启动失败</p>
<p>原因：IDEA在对工件进行打包时可能会漏掉一些jar包，在项目结构的工件设置里手动添加到<code>WEB-INF/lib</code></p>
<p>
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210818172612181.png" alt="image-20210818172612181">
      </p>
<ul>
<li><p>返回对象或集合</p>
<ol>
<li><p>可以通过jackson的ObjectMapper对象的<code>writeValueAsString()</code>方法转换为JSON字符串</p>
</li>
<li><p>可以通过配置SpringMVC的处理器适配器<code>RequestMappingHandlerAdapter</code>来利用jackson的转换器转换：配置一个适配器<code>RequestMappingHandlerAdapter</code>的Bean，然后指定<code>messageConverters</code></p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置请求映射处理器适配器的消息转换器为Jackson--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;handlerAdapter&quot;</span>    <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.mvc.method.annotation</span></span></span><br><span class="line"><span class="string"><span class="tag">                                    .RequestMappingHandlerAdapter&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;messageConverters&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.json</span></span></span><br><span class="line"><span class="string"><span class="tag">                         .MappingJackson2HttpMessageConverter&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
</ol>
<p> <strong>究极方法</strong>：使用<code>&lt;mvc:annotation-driven/&gt;</code>注解驱动，搭配@ResponseBody返回的类型就<strong>为所欲为</strong>了</p>

        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210818181133229.png" alt="image-20210818181133229" style="zoom: 60%;">
      </li>
</ul>

        <h2 id="SpringMVC获得请求数据">
          <a href="#SpringMVC获得请求数据" class="heading-link"><i class="fas fa-link"></i></a><a href="#SpringMVC获得请求数据" class="headerlink" title="SpringMVC获得请求数据"></a>SpringMVC获得请求数据</h2>
      
        <h3 id="获得请求的参数">
          <a href="#获得请求的参数" class="heading-link"><i class="fas fa-link"></i></a><a href="#获得请求的参数" class="headerlink" title="获得请求的参数"></a>获得请求的参数</h3>
      
        <h4 id="1-基本类型参数">
          <a href="#1-基本类型参数" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-基本类型参数" class="headerlink" title="1.基本类型参数"></a>1.基本类型参数</h4>
      <ul>
<li><p>Controller中业务方法的参数要与请求参数中的参数名一致，参数值会自动映射匹配</p>
<p>例如：<code>http://localhost/req?username=tom&amp;age=20</code>请求，可以被Controller中的此方法匹配：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/req&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method12</span><span class="params">(String username,<span class="keyword">int</span> age,Float f)</span> </span>&#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;method12执行了&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;username = &quot;</span> + username); <span class="comment">//tom</span></span><br><span class="line">	System.out.println(<span class="string">&quot;age = &quot;</span> + age); <span class="comment">//20</span></span><br><span class="line">	System.out.println(<span class="string">&quot;f = &quot;</span> + f); <span class="comment">//null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>注意：</strong></p>
<ul>
<li>如果请求的参数没有匹配映射方法的参数，Java中的引用数据类型会被赋值为null，基本数据类型会报错</li>
<li>如果对String类型传递了多个参数，它们赋值给String时，会以逗号隔开，而其他类型会以初次赋值为准</li>
</ul>
</li>
</ul>

        <h4 id="2-POJO类型参数">
          <a href="#2-POJO类型参数" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-POJO类型参数" class="headerlink" title="2.POJO类型参数"></a>2.POJO类型参数</h4>
      <ul>
<li><p>Controller中的业务方法的POJO参数的属性名要与请求参数中的参数名一致，参数值会自动映射匹配</p>
<p>例如：<code>http://localhost/req?username=tom&amp;age=20</code>请求，可以被Controller中的此方法匹配：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/method13&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method13</span><span class="params">(User user)</span> </span>&#123; <span class="comment">//User对象含有username和age两个属性</span></span><br><span class="line">    System.out.println(<span class="string">&quot;method13执行了&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;user = &quot;</span> + user); <span class="comment">//User&#123;username=&#x27;tom&#x27;, age=20&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></li>
</ul>

        <h4 id="3-数组类型参数">
          <a href="#3-数组类型参数" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-数组类型参数" class="headerlink" title="3.数组类型参数"></a>3.数组类型参数</h4>
      <ul>
<li><p>Controller中的业务方法的数组名称与请求参数的参数名一致，参数值会自动映射匹配</p>
<p>例如：<code>http://localhost/req?hobby=唱歌&amp;hobby=跳舞</code>请求，可以被Controller中的此方法匹配：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/method14&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method14</span><span class="params">(String[] hobby)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;method14执行了&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;hobbies = &quot;</span> + Arrays.toString(hobby)); <span class="comment">//[唱歌, 跳舞]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></li>
</ul>

        <h4 id="4-集合类型参数">
          <a href="#4-集合类型参数" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-集合类型参数" class="headerlink" title="4.集合类型参数"></a>4.集合类型参数</h4>
      
        <h5 id="方式1：使用VO对象包装集合">
          <a href="#方式1：使用VO对象包装集合" class="heading-link"><i class="fas fa-link"></i></a><a href="#方式1：使用VO对象包装集合" class="headerlink" title="方式1：使用VO对象包装集合"></a>方式1：使用VO对象包装集合</h5>
      <p>将集合参数包装到一个POJO中，这个POJO含有一个集合对象的成员属性，此时的POJO被称为VO对象</p>
<p>例如：定义一个<code>UserVO</code>对象，含有一个成员属性：<code>List&lt;User&gt;</code>，用Controller以下方法匹配映射：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/method15&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method15</span><span class="params">(UserVO userVO)</span> </span>&#123; <span class="comment">//对象集合需要包装到VO（Value/View Object）对象中</span></span><br><span class="line">    System.out.println(<span class="string">&quot;method15执行了&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;userVO = &quot;</span> + userVO);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>通过POST请求提交方便编写集合的名称及属性：</p>
<figure class="highlight jsp"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/user/method15&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;userList[0].username&quot;</span>&gt; &lt;%--第<span class="number">1</span>个User对象的username--%&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;userList[0].age&quot;</span>&gt; &lt;%--第<span class="number">1</span>个User对象的age--%&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;userList[1].username&quot;</span>&gt; &lt;%--第<span class="number">2</span>个User对象的username--%&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;userList[1].age&quot;</span>&gt; &lt;%--第<span class="number">2</span>个User对象的age--%&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></div></figure>


        <h5 id="方式2：使用JSON格式利用-RequestBody注解直接用集合接收">
          <a href="#方式2：使用JSON格式利用-RequestBody注解直接用集合接收" class="heading-link"><i class="fas fa-link"></i></a><a href="#方式2：使用JSON格式利用-RequestBody注解直接用集合接收" class="headerlink" title="方式2：使用JSON格式利用@RequestBody注解直接用集合接收"></a>方式2：使用JSON格式利用@RequestBody注解直接用集合接收</h5>
      <p>当使用AJAX提交时，可以指定<code>contentType</code>为<code>JSON</code>形式，那么在方法参数位置使用<code>@RequestBody</code>可以直接接收集合数据而无需使用VO对象进行包装</p>
<p>例如：利用AJAX提交一段JSON数据：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> userList = [];</span><br><span class="line">userList.push(&#123;<span class="attr">username</span>: <span class="string">&#x27;陶俊杰&#x27;</span>, <span class="attr">age</span>: <span class="number">22</span>&#125;)</span><br><span class="line">userList.push(&#123;<span class="attr">username</span>: <span class="string">&#x27;胖&#x27;</span>, <span class="attr">age</span>: <span class="number">23</span>&#125;)</span><br><span class="line">$.ajax(&#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;$&#123;pageContext.servletContext.contextPath&#125;/user/method16&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: <span class="built_in">JSON</span>.stringify(userList),</span><br><span class="line">    <span class="attr">contentType</span>: <span class="string">&#x27;application/json;charset=utf-8&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p>提交的userList集合可以被打上@RequestBody注解的集合对象直接接收：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/method16&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method16</span><span class="params">(<span class="meta">@RequestBody</span> List&lt;User&gt; userList)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;method15执行了&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;userList = &quot;</span> + userList);</span><br><span class="line">    <span class="comment">//[User&#123;name=&#x27;陶俊杰&#x27;, age=22&#125;, User&#123;name=&#x27;胖&#x27;, age=23&#125;]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>注意</strong>：引用JQuery的JS文件可能导致404 not found，因为SpringMVC配置文件中默认用<code>/</code>匹配所有的请求映射，而此时没有配置其他的Servlet，导致此请求交给了<code>DispatcherServlet</code>处理，在<code>DispatcherServlet</code>中JS文件这种静态资源没有找到对应映射路径，所以就匹配不到结果，导致资源找不到</p>
<p><strong>解决方法</strong>：</p>
<ul>
<li><p>利用SpringMVC配置文件指定允许的静态资源：</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">&quot;/js/**&quot;</span> <span class="attr">location</span>=<span class="string">&quot;classpath:/js/&quot;</span>/&gt;</span></span><br></pre></td></tr></table></div></figure>

<p>表示请求映射为<code>/js/</code>下的任意文件都可以从<code>location</code>属性中指定的<code>/js/</code>中找到</p>
</li>
<li><p>利用SpringMVC配置文件指定默认处理器：</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br></pre></td></tr></table></div></figure>

<p>此时如果没有任何Servlet映射此资源，那么就会交给默认的(Tomcat服务器)找资源</p>
</li>
</ul>

        <h3 id="请求数据乱码问题">
          <a href="#请求数据乱码问题" class="heading-link"><i class="fas fa-link"></i></a><a href="#请求数据乱码问题" class="headerlink" title="请求数据乱码问题"></a>请求数据乱码问题</h3>
      <ul>
<li><p>问题：当使用<code>POST</code>请求时，提交到SpringMVC的数据可能会乱码</p>
</li>
<li><p>解决方法：需要在web.xml配置一个<code>CharacterEncodingFilter</code><strong>过滤器</strong>来进行编码的过滤</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置编码过滤器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span> <span class="comment">&lt;!--设置此过滤器的encoding编码成员属性--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span> <span class="comment">&lt;!--设置编码为UTF-8--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span> <span class="comment">&lt;!--直接过滤所有请求--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p>类似于Servlet中request对象的<code>setChracterEncoding()</code></p>
</li>
</ul>

        <h3 id="注解进行参数绑定">
          <a href="#注解进行参数绑定" class="heading-link"><i class="fas fa-link"></i></a><a href="#注解进行参数绑定" class="headerlink" title="注解进行参数绑定"></a>注解进行参数绑定</h3>
      <ul>
<li><p>当请求的参数名称与映射方法中的参数名不一致时，利用@RequestParam注解来绑定到方法中的参数</p>
<p>例如：<code>http://localhost/req?name=tom</code>，需要把参数<code>name</code>绑定到映射方法的<code>username</code>上：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/method17&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method17</span><span class="params">(<span class="meta">@RequestParam(&quot;name&quot;)</span> String username)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;method17执行了&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;username = &quot;</span> + username);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>此@RequestParam注解有以下参数可以使用：</p>
<ul>
<li><code>value</code>：需要用于匹配的可能的参数名</li>
<li><code>required</code>：在指定的请求参数是否是必须的，默认为<code>true</code>，即请求如果没有传递此参数会报错</li>
<li><code>defaultValue</code>：当没有指定请求参数时，使用的默认值</li>
</ul>
</li>
</ul>

        <h3 id="Restful风格的参数">
          <a href="#Restful风格的参数" class="heading-link"><i class="fas fa-link"></i></a><a href="#Restful风格的参数" class="headerlink" title="Restful风格的参数"></a>Restful风格的参数</h3>
      <ul>
<li><p>Restful是一种<font color="red">软件架构风格、设计风格</font>，而不是标准，只是提供了一组设计原则和约束条件。主要用于客户端和服务器交互类的软件，基于这个风格设计的软件可以更简洁、更有层次、更易于实现缓存机制等等</p>
</li>
<li><p>Restful风格的请求是使用”<strong>url+请求方式</strong>“表示一次请求目的，HTTP协议里面四个表示操作方式的动词如下：</p>
<ul>
<li>GET：用于获取资源</li>
<li>POST：用于新建资源</li>
<li>PUT：用于更新资源</li>
<li>DELETE：用于删除资源</li>
</ul>
</li>
<li><p>举个例子：</p>
<ul>
<li>/user/1    GET        ：得到id为1的user</li>
<li>/user/1    DELETE  ：删除id为1的user</li>
<li>/user/1    PUT         ：更新id为1的user</li>
<li>/user        POST       ：新增user</li>
</ul>
</li>
<li><p>用法：</p>
<ul>
<li><p>修改方法的注解指定映射为：<code>@RequestMapping(&quot;/映射路径/&#123;占位符&#125;&quot;)</code></p>
</li>
<li><p>访问映射路径时直接带上参数即可自动匹配给占位符</p>
</li>
<li><p>在方法参数里使用<code>@PathVariable(&quot;占位符&quot;)</code>取出请求的参数，被此注解修饰的映射方法参数会获得占位符的值</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/method18/&#123;name&#125;&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method18</span><span class="params">(<span class="meta">@PathVariable(&quot;name&quot;)</span> String username)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;method18执行了&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;username = &quot;</span> + username);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></li>
</ul>
</li>
</ul>

        <h3 id="获得Servlet相关API">
          <a href="#获得Servlet相关API" class="heading-link"><i class="fas fa-link"></i></a><a href="#获得Servlet相关API" class="headerlink" title="获得Servlet相关API"></a>获得Servlet相关API</h3>
      <ul>
<li><p>SpringMVC支持使用原始ServletAPI对象作为控制器方法的参数进行注入，常用的对象有：</p>
<ul>
<li>HttpServletRequest</li>
<li>HttpServletResponse</li>
<li>HttpSession</li>
</ul>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/method20&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method20</span><span class="params">(HttpServletRequest request, HttpServletResponse response, HttpSession session)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;request = &quot;</span> + request);</span><br><span class="line">    System.out.println(<span class="string">&quot;response = &quot;</span> + response);</span><br><span class="line">    System.out.println(<span class="string">&quot;session = &quot;</span> + session); <span class="comment">//这俩都一样</span></span><br><span class="line">    System.out.println(<span class="string">&quot;request.getSession() = &quot;</span> + request.getSession());<span class="comment">//就是上面</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></li>
</ul>

        <h3 id="获取请求头">
          <a href="#获取请求头" class="heading-link"><i class="fas fa-link"></i></a><a href="#获取请求头" class="headerlink" title="获取请求头"></a>获取请求头</h3>
      <ul>
<li><p>使用@RequestHeader可以获得请求头信息，相当于Servlet中<code>request.getHeader(name)</code>，含有以下属性</p>
<ul>
<li><code>value</code>：请求头的名称</li>
<li><code>required</code>：是否必须携带此请求头</li>
</ul>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/method21&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method21</span><span class="params">(<span class="meta">@RequestHeader(value = &quot;User-Agent&quot;)</span> String user_agent,</span></span></span><br><span class="line"><span class="params"><span class="function">                     <span class="meta">@RequestHeader(&quot;Accept&quot;)</span> String accept,</span></span></span><br><span class="line"><span class="params"><span class="function">                     <span class="meta">@RequestHeader(&quot;host&quot;)</span> String host)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;user_agent = &quot;</span> + user_agent);</span><br><span class="line">    System.out.println(<span class="string">&quot;accept = &quot;</span> + accept);</span><br><span class="line">    System.out.println(<span class="string">&quot;host = &quot;</span> + host);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></li>
<li><p>使用@CookieValue获取指定Cookie的值，含有以下属性：</p>
<ul>
<li><code>value</code>：指定cookie的名称</li>
<li><code>required</code>：是否必须携带此cookie</li>
</ul>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/method22&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method22</span><span class="params">(<span class="meta">@CookieValue(&quot;JSESSIONID&quot;)</span> String JSessionID,</span></span></span><br><span class="line"><span class="params"><span class="function">                     <span class="meta">@CookieValue(value = &quot;IDEA&quot;,required = false)</span> String idea)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;JSessionID = &quot;</span> + JSessionID); <span class="comment">//JSESSIONID的值</span></span><br><span class="line">    System.out.println(<span class="string">&quot;idea = &quot;</span> + idea); <span class="comment">//没有此cookie，为null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></li>
</ul>

        <h2 id="自定义类型转换器">
          <a href="#自定义类型转换器" class="heading-link"><i class="fas fa-link"></i></a><a href="#自定义类型转换器" class="headerlink" title="自定义类型转换器"></a>自定义类型转换器</h2>
      <ul>
<li>SpringMVC默认已经提供了一些常用的类型转换器，例如客户端提交的字符串可以自动转为int类型等</li>
<li>但不是所有的数据类型都提供了转换器，没有提供的就需要自定义转换器，例如日期类型就需要自定义转换器</li>
</ul>
<p><strong>自定义类型转换器的步骤</strong>：</p>
<ol>
<li><p>自定义类型转换器，实现<code>Converter</code>接口并重写<code>convert(String date)</code>方法，解析String为Date并返回</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DateConverter</span> <span class="keyword">implements</span> <span class="title">Converter</span>&lt;<span class="title">String</span>, <span class="title">Date</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Date <span class="title">convert</span><span class="params">(String date)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//在这里把String类型的字符串转换成Date对象然后返回</span></span><br><span class="line">        SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> sdf.parse(date);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></li>
<li><p>在SpringMVC配置文件中声明转换器</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置类型转换器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;conversionService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.context.support.ConversionServiceFactoryBean&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;converters&quot;</span>&gt;</span> <span class="comment">&lt;!--给这个converters成员属性赋值注入--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.taoyyz.converter.DateConverter&quot;</span>/&gt;</span> <span class="comment">&lt;!--自定义的转换器--&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>在<code>&lt;annotation-driven&gt;</code>中引用转换器</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span> <span class="attr">conversion-service</span>=<span class="string">&quot;conversionService&quot;</span>/&gt;</span></span><br></pre></td></tr></table></div></figure></li>
</ol>

        <h2 id="案例：文件上传">
          <a href="#案例：文件上传" class="heading-link"><i class="fas fa-link"></i></a><a href="#案例：文件上传" class="headerlink" title="案例：文件上传"></a>案例：文件上传</h2>
      <ul>
<li><p>前端：</p>
<ul>
<li>在form表单内以POST方式提交数据</li>
<li>提交的数据类型是：<code>&lt;input type=&quot;file&quot; name=&quot;filename&quot;&gt;</code>时，需要把form表单的<code>enctype</code>属性设置为<code>&quot;multipart/form-data&quot;</code></li>
</ul>
</li>
<li><p>后端：</p>
<ul>
<li><p>当form表单的<code>enctype</code>为多部分表单时，request.getParameter()将失效</p>
<ul>
<li><p>当<code>enctype</code>为<code>&quot;application/x-www-form-urlencodedmultipart&quot;</code>时，form表单提交的正文内容格式为：<code>key=value&amp;key=value&amp;key=value</code></p>
</li>
<li><p>当<code>enctype</code>为<code>&quot;multipart/form-data&quot;</code>时，form表单提交的正文内容就会变成<strong>多部分形式</strong>，例如：</p>
<p>
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210819162522038.png" alt="image-20210819162522038">
      </p>
</li>
</ul>
</li>
<li><p>步骤：</p>
<ol>
<li><p>导入fileupload和io坐标</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>配置文件上传解析器</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置文件上传解析器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--上传文件的总大小--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxUploadSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;5242800&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--上传的单个文件的大小--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxUploadSizePerFile&quot;</span> <span class="attr">value</span>=<span class="string">&quot;5242800&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--上传文件的编码类型--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;defaultEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>编写文件上传代码</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/upload&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">upload</span><span class="params">(String name,MultipartFile filename)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;name = &quot;</span> + name);</span><br><span class="line">    String originalFilename = filename.getOriginalFilename(); <span class="comment">//获得文件名</span></span><br><span class="line">    System.out.println(<span class="string">&quot;文件名 = &quot;</span> + originalFilename);</span><br><span class="line">    filename.transferTo(<span class="keyword">new</span> File(<span class="string">&quot;E:&quot;</span>+originalFilename)); <span class="comment">//保存到磁盘</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></li>
<li><p>前端通过form表单提交数据</p>
<figure class="highlight jsp"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;$&#123;pageContext.servletContext.contextPath&#125;/user/upload&quot;</span> method=<span class="string">&quot;post&quot;</span> enctype=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span><br><span class="line">    名称: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name&quot;</span>&gt;</span><br><span class="line">    文件: &lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;filename&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></div></figure></li>
</ol>
</li>
<li><p><strong>多文件上传</strong>：</p>
<ul>
<li><p>方式1：后端定义多个不同名的<code>MultipartFile</code>对象接收前端发送对应<code>name</code>的文件，然后分别处理</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/uploads&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">uploads</span><span class="params">(String name,</span></span></span><br><span class="line"><span class="params"><span class="function">                    MultipartFile filename1,</span></span></span><br><span class="line"><span class="params"><span class="function">                    MultipartFile filename2)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;name = &quot;</span> + name);</span><br><span class="line">    String originalFilename1 = filename1.getOriginalFilename(); <span class="comment">//文件名</span></span><br><span class="line">    String originalFilename2 = filename2.getOriginalFilename(); <span class="comment">//文件名</span></span><br><span class="line">    uploadFile1.transferTo(<span class="keyword">new</span> File(<span class="string">&quot;E:&quot;</span> + originalFilename1));</span><br><span class="line">    uploadFile2.transferTo(<span class="keyword">new</span> File(<span class="string">&quot;E:&quot;</span> + originalFilename2));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></li>
<li><p>方式2：后端用一个<code>MultipartFile[]</code>数组接收前端发送的同名<code>name</code>文件，当做数组处理</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/uploadArr&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">uploads</span><span class="params">(String name,MultipartFile[] files)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;name = &quot;</span> + name);</span><br><span class="line">    <span class="keyword">for</span> (MultipartFile file : files) &#123;</span><br><span class="line">        file.transferTo(<span class="keyword">new</span> File(<span class="string">&quot;E:&quot;</span> + file.getOriginalFilename()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></li>
</ul>
</li>
</ul>
</li>
</ul>

        <h2 id="Spring-JdbcTemplate">
          <a href="#Spring-JdbcTemplate" class="heading-link"><i class="fas fa-link"></i></a><a href="#Spring-JdbcTemplate" class="headerlink" title="Spring JdbcTemplate"></a>Spring JdbcTemplate</h2>
      
        <h3 id="概述">
          <a href="#概述" class="heading-link"><i class="fas fa-link"></i></a><a href="#概述" class="headerlink" title="概述"></a>概述</h3>
      <blockquote>
<p>Spring JdbcTemplate是Spring框架中提供的一个对象，是对原始JDBC API对象的简单封装，Spring框架为我们提供了很多操作的模板类。例如：操作关系型数据库的JdbcTemplate和HibernateTemplate，操作NoSQL数据库的RedisTemplate，操作消息队列的JmsTemplate等</p>
</blockquote>

        <h3 id="JdbcTemplate开发步骤">
          <a href="#JdbcTemplate开发步骤" class="heading-link"><i class="fas fa-link"></i></a><a href="#JdbcTemplate开发步骤" class="headerlink" title="JdbcTemplate开发步骤"></a>JdbcTemplate开发步骤</h3>
      <ol>
<li><p>导入spring-jdbc和spring-tx（事务）坐标</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-tx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>创建数据库表和实体</p>
</li>
<li><p>创建JdbcTemplate对象</p>
<ul>
<li>可以把JdbcTemplate对象和DataSource对象配置为Bean，即可直接从Spring容器拿到对象</li>
</ul>
</li>
<li><p>执行数据库操作</p>
<ul>
<li>更新/删除：<code>int update(String sql,Object... args)</code></li>
<li>查询：<ul>
<li>查询单个对象：<code>T queryForObject(String sql,RowMapper&lt;T&gt; rowMapper,Object... args)</code></li>
<li>查询多个对象的列表：<code>&lt;T&gt; query(String sql,RowMapper&lt;T&gt; rowMapper,Object... args)</code></li>
<li>聚合函数查询：<code>T queryForObject(String sql,Class&lt;T&gt; requiredType)</code></li>
</ul>
</li>
</ul>
</li>
</ol>

        <h2 id="案例：用户管理系统">
          <a href="#案例：用户管理系统" class="heading-link"><i class="fas fa-link"></i></a><a href="#案例：用户管理系统" class="headerlink" title="案例：用户管理系统"></a>案例：用户管理系统</h2>
      
        <h3 id="角色列表的展示">
          <a href="#角色列表的展示" class="heading-link"><i class="fas fa-link"></i></a><a href="#角色列表的展示" class="headerlink" title="角色列表的展示"></a>角色列表的展示</h3>
      <ul>
<li>步骤：<ol>
<li>点击角色管理菜单，发送请求到服务器端（修改角色管理菜单栏的URL地址）</li>
<li>创建RoleController和showList()方法</li>
<li>创建RoleService和showList()方法</li>
<li>创建RoleDao和findAll()方法</li>
<li>使用JdbcTemplate完成查询操作</li>
<li>将查询数据存储到Model中</li>
<li>转发到role-list.jsp页面进行展示</li>
</ol>
</li>
<li><font color="red"><strong>踩坑踩大坑！！！</strong>报错<code>CannotGetJdbcConnectionException: Failed to obtain JDBC Connection</code></font><ul>
<li>原因：竟然是新引入的Maven依赖：<code>mysql-connector</code>没有被IDEA打包进项目！</li>
<li>解决方法：在IDEA的项目结构选项里面把漏掉的jar包添加到<code>WEB-INF/lib</code></li>
</ul>
</li>
</ul>

        <h3 id="角色添加">
          <a href="#角色添加" class="heading-link"><i class="fas fa-link"></i></a><a href="#角色添加" class="headerlink" title="角色添加"></a>角色添加</h3>
      <ul>
<li><p>步骤：</p>
<ol>
<li>点击角色列表的新建按钮跳转到角色添加页面</li>
<li>输入角色信息，点击保存按钮，表单数据提交到服务器</li>
<li>编写RoleController的save()方法</li>
<li>编写RoleService的save()方法</li>
<li>编写RoleDao的insert()方法</li>
<li>使用JdbcTemplate保存Role数据到sys_role表</li>
<li>跳转会角色列表页面</li>
</ol>
</li>
<li><p>可能的问题：乱码问题</p>
<ul>
<li><p>原因：添加的表单form是POST方式，对于tomcat来说会乱码</p>
</li>
<li><p>解决方法：配置一个过滤器把编码方式设置为UTF-8</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置过滤器，解决乱码问题--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
</ul>
</li>
</ul>

        <h3 id="用户列表的展示">
          <a href="#用户列表的展示" class="heading-link"><i class="fas fa-link"></i></a><a href="#用户列表的展示" class="headerlink" title="用户列表的展示"></a>用户列表的展示</h3>
      
        <h3 id="用户添加">
          <a href="#用户添加" class="heading-link"><i class="fas fa-link"></i></a><a href="#用户添加" class="headerlink" title="用户添加"></a>用户添加</h3>
      
        <h3 id="用户删除">
          <a href="#用户删除" class="heading-link"><i class="fas fa-link"></i></a><a href="#用户删除" class="headerlink" title="用户删除"></a>用户删除</h3>
      <ul>
<li>注意要同时处理两张表：用户表、用户与角色的对应关系表，应该先处理关系表再删主表，因为有外键约束</li>
</ul>

        <h2 id="SpringMVC拦截器">
          <a href="#SpringMVC拦截器" class="heading-link"><i class="fas fa-link"></i></a><a href="#SpringMVC拦截器" class="headerlink" title="SpringMVC拦截器"></a>SpringMVC拦截器</h2>
      
        <h3 id="拦截器（interceptor）的作用">
          <a href="#拦截器（interceptor）的作用" class="heading-link"><i class="fas fa-link"></i></a><a href="#拦截器（interceptor）的作用" class="headerlink" title="拦截器（interceptor）的作用"></a>拦截器（interceptor）的作用</h3>
      <ul>
<li>SpringMVC的拦截器类似于Servlet开发中的过滤器Filter，用于对处理器进行<strong>预处理</strong>和<strong>后处理</strong></li>
<li>将拦截器按照一定的顺序连接成一条链，这条链被称为<strong>拦截器链（interceptor chain）</strong>。在访问被拦截的方法或字段时，拦截器链中的拦截器会按照其之前定义的顺序被调用。拦截器也是AOP思想的具体实现</li>
</ul>

        <h3 id="拦截器和过滤器的区别">
          <a href="#拦截器和过滤器的区别" class="heading-link"><i class="fas fa-link"></i></a><a href="#拦截器和过滤器的区别" class="headerlink" title="拦截器和过滤器的区别"></a>拦截器和过滤器的区别</h3>
      
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210821164156819.png" alt="image-20210821164156819" style="zoom: 60%;">
      

<p>
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="images/image-20211222211806443.png" alt="image-20211222211806443">
      </p>

        <h3 id="拦截器快速入门">
          <a href="#拦截器快速入门" class="heading-link"><i class="fas fa-link"></i></a><a href="#拦截器快速入门" class="headerlink" title="拦截器快速入门"></a>拦截器快速入门</h3>
      <ul>
<li><p>步骤</p>
<ol>
<li><p>创建拦截器实现类，实现<code>HandlerInterceptor</code>接口</p>
<ul>
<li>重写<code>boolean preHandle()</code>：返回<code>true</code>时代表<strong>放行</strong>，返回<code>false</code>被<strong>拦截</strong>在这里</li>
<li>重写<code>void postHandle()</code>：这里可以再次修改<code>ModelAndView</code>对象</li>
<li>重写<code>void afterCompletion</code>：这里可以用于处理<code>Exception</code>异常</li>
</ul>
</li>
<li><p>配置拦截器</p>
<ul>
<li><p>在web.xml中配置（多个）拦截器</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置拦截器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--拦截哪些资源？--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--拦截器实现类的全类名--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.interceptor.MyInterceptor1&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>多个在web.xml中配置的拦截器会按照配置的先后顺序执行</p>
</li>
</ul>
</li>
<li><p>测试拦截器效果</p>
</li>
</ol>
<p>
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210821190329982.png" alt="image-20210821190329982">
      </p>
</li>
</ul>

        <h2 id="案例：用户登录权限控制">
          <a href="#案例：用户登录权限控制" class="heading-link"><i class="fas fa-link"></i></a><a href="#案例：用户登录权限控制" class="headerlink" title="案例：用户登录权限控制"></a>案例：用户登录权限控制</h2>
      <ul>
<li><p>需求：用户没有登录的情况下，不能对后台菜单进行访问操作，点击菜单跳转到登录页面，只有用户登录成功后才可以进行后台功能的操作</p>
</li>
<li><p>方案：编写一个拦截器类，实现<code>HandlerInterceptor</code>接口，重写<code>preHandle()</code>方法</p>
<ul>
<li><p>类似于过滤器，在这个拦截器的<code>preHandle()</code>方法中检测Session中是否含有已经登录的<code>user</code>对象</p>
<ul>
<li>如果有，就<code>return true</code>放行</li>
<li>如果没有，就重定向到登录页面并<code>return false</code></li>
</ul>
</li>
<li><p>在springMVC配置文件中配置拦截器</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置拦截器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置需要拦截的资源--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置排除拦截的资源--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:exclude-mapping</span> <span class="attr">path</span>=<span class="string">&quot;/user/login&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.taoyyz.interceptor.AccessControlInterceptor&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p><strong>要注意排除掉登录的访问拦截</strong></p>
</li>
</ul>
</li>
</ul>

        <h2 id="SpringMVC异常处理机制">
          <a href="#SpringMVC异常处理机制" class="heading-link"><i class="fas fa-link"></i></a><a href="#SpringMVC异常处理机制" class="headerlink" title="SpringMVC异常处理机制"></a>SpringMVC异常处理机制</h2>
      
        <h3 id="SpringMVC异常处理思路">
          <a href="#SpringMVC异常处理思路" class="heading-link"><i class="fas fa-link"></i></a><a href="#SpringMVC异常处理思路" class="headerlink" title="SpringMVC异常处理思路"></a>SpringMVC异常处理思路</h3>
      <ul>
<li>系统中的异常包括两类：预期异常和运行时异常RuntimeException，前者通过捕获异常从而获取异常信息，后者主要通过规范代码开发、测试等手段减少运行时异常的发生。</li>
<li>系统的Dao、Service、Controller出现都通过throws Exception往上层抛出，最后由SpringMVC前端控制器交由异常处理器（HandlerExceptionResolver）进行异常处理</li>
</ul>

        <h3 id="SpringMVC异常处理的两种方式">
          <a href="#SpringMVC异常处理的两种方式" class="heading-link"><i class="fas fa-link"></i></a><a href="#SpringMVC异常处理的两种方式" class="headerlink" title="SpringMVC异常处理的两种方式"></a>SpringMVC异常处理的两种方式</h3>
      <ul>
<li>使用SpringMVC提供的简单异常处理器：<strong>SimpleMappingExceptionResolver</strong></li>
<li>实现Spring的异常处理接口：<strong>HandlerExceptionResolver</strong>自定义自己的异常处理</li>
</ul>

        <h4 id="简单异常处理器">
          <a href="#简单异常处理器" class="heading-link"><i class="fas fa-link"></i></a><a href="#简单异常处理器" class="headerlink" title="简单异常处理器"></a>简单异常处理器</h4>
      <ul>
<li><p>SpringMVC已经定义好了该类型的转换器，在使用时可以根据项目情况进行相应异常与视图的映射配置</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置简单异常映射处理器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.handler.SimpleMappingExceptionResolver&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--当exceptionMappings匹配不到时匹配此默认--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;defaultErrorView&quot;</span> <span class="attr">value</span>=<span class="string">&quot;error&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;exceptionMappings&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--匹配Exception异常--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;java.lang.Exception&quot;</span> <span class="attr">value</span>=<span class="string">&quot;genericExp&quot;</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--匹配类型转换异常--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;java.lang.ClassCastException&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classCastExp&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
</ul>

        <h4 id="自定义异常处理">
          <a href="#自定义异常处理" class="heading-link"><i class="fas fa-link"></i></a><a href="#自定义异常处理" class="headerlink" title="自定义异常处理"></a>自定义异常处理</h4>
      <ul>
<li><p>步骤</p>
<ol>
<li><p>创建异常处理器实现类，实现HandlerExceptionResolver接口和其中的<code>resolveException()</code>方法</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">resolveException</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object o, Exception e)</span> </span>&#123;</span><br><span class="line">    ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">    <span class="keyword">if</span> (e <span class="keyword">instanceof</span> ClassCastException) &#123;</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;类型转换异常惹&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> NullPointerException) &#123;</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;空指针啦&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;出现异常惹&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    modelAndView.setViewName(<span class="string">&quot;error&quot;</span>); <span class="comment">//统一跳转到error.jsp页面</span></span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></li>
<li><p>配置异常处理器</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置自定义异常处理器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.taoyyz.resolver.MyExceptionResolver&quot;</span>/&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>编写异常页面</p>
<figure class="highlight jsp"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;出错惹，错误原因：$&#123;msg&#125;&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></div></figure></li>
<li><p>测试异常的跳转</p>
</li>
</ol>
</li>
</ul>

        <h1 id="Spring的AOP">
          <a href="#Spring的AOP" class="heading-link"><i class="fas fa-link"></i></a><a href="#Spring的AOP" class="headerlink" title="Spring的AOP"></a>Spring的AOP</h1>
      
        <h2 id="Spring的AOP简介">
          <a href="#Spring的AOP简介" class="heading-link"><i class="fas fa-link"></i></a><a href="#Spring的AOP简介" class="headerlink" title="Spring的AOP简介"></a>Spring的AOP简介</h2>
      <ul>
<li><strong>AOP</strong>是 Aspect Oriented Programming 的缩写，意为<font color="red">面向切面编程</font>，是通过预编译方式和运行期动态代理实现程序功能的统一维护的一种技术</li>
<li><strong>AOP</strong>是OOP的延续，是软件开发中的一个热点，也是Spring框架中的一个重要内容，是函数式编程的一种衍生范型。利用AOP可以对业务逻辑的各个部分进行隔离，从而使得业务逻辑各部分之间的耦合度降低，提高程序的可重用性，同时提高了开发的效率</li>
</ul>

        <h2 id="AOP的作用及优势">
          <a href="#AOP的作用及优势" class="heading-link"><i class="fas fa-link"></i></a><a href="#AOP的作用及优势" class="headerlink" title="AOP的作用及优势"></a>AOP的作用及优势</h2>
      <ul>
<li>作用：在程序运行期间，在不修改源码的情况下对方法进行功能增强</li>
<li>优势：减少重复代码，提高开发效率，并且便于维护</li>
</ul>

        <h2 id="AOP的底层实现">
          <a href="#AOP的底层实现" class="heading-link"><i class="fas fa-link"></i></a><a href="#AOP的底层实现" class="headerlink" title="AOP的底层实现"></a>AOP的底层实现</h2>
      <ul>
<li>AOP的底层是通过Spring提供的动态代理技术实现的，在运行期间，Spring通过动态代理技术动态的生成代理对象，代理对象方法执行时进行增强功能的介入，再去调用目标对象的方法，完成功能的增强</li>
</ul>

        <h2 id="AOP的动态代理技术">
          <a href="#AOP的动态代理技术" class="heading-link"><i class="fas fa-link"></i></a><a href="#AOP的动态代理技术" class="headerlink" title="AOP的动态代理技术"></a>AOP的动态代理技术</h2>
      <ul>
<li>JDK代理：基于接口的动态代理技术</li>
<li>cglib代理：基于父类的动态代理技术</li>
</ul>

        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210821220350274.png" alt="image-20210821220350274" style="zoom: 50%;">
       


        <h2 id="AOP的相关概念">
          <a href="#AOP的相关概念" class="heading-link"><i class="fas fa-link"></i></a><a href="#AOP的相关概念" class="headerlink" title="AOP的相关概念"></a>AOP的相关概念</h2>
      <ul>
<li>Target：代理的<strong>目标对象</strong></li>
<li>Proxy：一个类被AOP增强后，就产生了一个结果的<strong>代理类</strong></li>
<li>Joinpoint：<strong>连接点</strong>，指那些被拦截到的点（方法）。在Spring中，这些点指的是方法，因为Spring只支持方法类型的连接点</li>
<li>Pointcuit：<strong>切入点</strong>，指的是要对哪些连接点进行拦截的定义</li>
<li>Advice：<strong>通知/增强</strong>，指的是拦截到连接点之后要做的事情（增强）</li>
<li>Aspect：<strong>切面</strong>，是切入点和通知的结合</li>
<li>Weaving：<strong>织入</strong>，把增强应用到目标对象来创建新的代理对象的过程，Spring采用动态代理织入，而AspectJ采用编译器织入和类装载期织入</li>
</ul>

        <h2 id="AOP开发明确的事项">
          <a href="#AOP开发明确的事项" class="heading-link"><i class="fas fa-link"></i></a><a href="#AOP开发明确的事项" class="headerlink" title="AOP开发明确的事项"></a>AOP开发明确的事项</h2>
      <ul>
<li>需要编写的内容：<ul>
<li>编写核心业务代码（目标类的目标方法）</li>
<li>编写切面类，切面类中有通知（增强功能方法）</li>
<li>在配置文件中，配置织入关系，即将哪些通知与哪些连接点进行结合</li>
</ul>
</li>
<li>AOP技术实现的内容<ul>
<li>Spring框架监控切入点方法的执行，一旦监控到切入点方法被运行，就使用代理机制，动态的创建目标对象的代理对象，根据通知的类型，在代理对象的对应位置，将通知对应的功能织入，完成完整的代码逻辑运行</li>
</ul>
</li>
<li>AOP底层使用哪种代理方式<ul>
<li>Spring框架会根据目标类是否实现了接口来判断采用哪种动态代理的方式</li>
</ul>
</li>
</ul>

        <h2 id="AOP快速入门">
          <a href="#AOP快速入门" class="heading-link"><i class="fas fa-link"></i></a><a href="#AOP快速入门" class="headerlink" title="AOP快速入门"></a>AOP快速入门</h2>
      
        <h3 id="基于XML的AOP开发">
          <a href="#基于XML的AOP开发" class="heading-link"><i class="fas fa-link"></i></a><a href="#基于XML的AOP开发" class="headerlink" title="基于XML的AOP开发"></a>基于XML的AOP开发</h3>
      
        <h5 id="步骤：">
          <a href="#步骤：" class="heading-link"><i class="fas fa-link"></i></a><a href="#步骤：" class="headerlink" title="步骤："></a>步骤：</h5>
      <ol>
<li><p>导入AOP相关坐标</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.8.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>创建目标接口和目标类（ 内部有切点）</p>
</li>
<li><p>创建切面类（内部有增强方法）</p>
</li>
<li><p>将目标类和切面类的对象创建权交给Spring，即配置Bean</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置目标对象的bean--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;target&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.taoyyz.aop.Target&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--配置切面对象的bean--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myAspect&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.taoyyz.aop.MyAspect&quot;</span>/&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>在applicationContext.xml中配置织入关系</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置织入，告诉Spring框架哪些方法（切入点）需要被增强（前置、后置等）需要AOP的命名空间--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--声明配置切面--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;myAspect&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置此切面的后置增强，切面 = 切点 + 通知，method是切面中的方法，pointcut是需要切入到哪里的切点表达式--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;before&quot;</span> </span></span><br><span class="line"><span class="tag">                    <span class="attr">pointcut</span>=<span class="string">&quot;execution(public void com.taoyyz.aop</span></span></span><br><span class="line"><span class="string"><span class="tag">                              .TargetInterface.save())&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>测试代码</p>
<p>调用被增强之后的Target对象的save()方法，此save()方法已经被织入一个前置增强</p>
</li>
</ol>

        <h4 id="切点表达式">
          <a href="#切点表达式" class="heading-link"><i class="fas fa-link"></i></a><a href="#切点表达式" class="headerlink" title="切点表达式"></a>切点表达式</h4>
      <ul>
<li><p>语法：<code>execution([修饰符] 返回值类型 包名.类名.方法名(参数))</code></p>
<ul>
<li>访问修饰符可以省略不写</li>
<li>返回值类型、包名、类名、方法名可以使用<code>*</code>星号代表任意</li>
<li>包名与类名之间可以用一个点<code>.</code>代表<strong>当前包</strong>下的类，两个点<code>..</code>代表<strong>当前包及子包</strong>下的类</li>
<li>参数列表可以使用两个点表示任意个数，任意类型的参数列表</li>
</ul>
</li>
<li><p>例如： 以下被切点表达式匹配的情况</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//匹配指定包下的指定类的无返回值的method()方法</span></span><br><span class="line">execution(<span class="keyword">public</span> <span class="keyword">void</span> com.taoyyz.aop.Target.method())</span><br><span class="line"><span class="comment">//匹配指定包下的指定类的无返回值的任意参数的任意方法</span></span><br><span class="line">execution(<span class="keyword">void</span> com.taoyyz.aop.Target.*(..))</span><br><span class="line"><span class="comment">//匹配指定包及子包下的任意类的任意方法的任意参数的任意返回值的方法</span></span><br><span class="line">execution(* com.taoyyz.aop.*.*(..))</span><br><span class="line"><span class="comment">//匹配任意包及其子包下任意类的任意方法的任意参数的任意返回值的方法</span></span><br><span class="line">execution(* *..*.*(..))</span><br></pre></td></tr></table></div></figure></li>
</ul>

        <h4 id="通知的类型">
          <a href="#通知的类型" class="heading-link"><i class="fas fa-link"></i></a><a href="#通知的类型" class="headerlink" title="通知的类型"></a>通知的类型</h4>
      <p>对于一个通知的配置语法：</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;aop:通知类型 method=&quot;方法名&quot; pointcut=&quot;execution(public void com.taoyyz.*.*(..))&quot;/&gt;</span><br></pre></td></tr></table></div></figure>

<p>可选的<strong>通知类型</strong>有：</p>
<p>
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210822154545596.png" alt="image-20210822154545596">
      </p>

        <h4 id="切点表达式的抽取">
          <a href="#切点表达式的抽取" class="heading-link"><i class="fas fa-link"></i></a><a href="#切点表达式的抽取" class="headerlink" title="切点表达式的抽取"></a>切点表达式的抽取</h4>
      <ul>
<li><p>在多个增强的切点表达式相同时，可以将这些切点表达式抽取，在增强中使用pointcut-ref属性代替pointcut属性来引用抽取之后的切点表达式</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--抽取pointcut切点表达式--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;myPointCut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(void com.taoyyz..*.*(..)))&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--环绕增强，引用切点表达式--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:around</span> <span class="attr">method</span>=<span class="string">&quot;around&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;myPointCut&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--异常抛出增强，引用切点表达式--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:after-throwing</span> <span class="attr">method</span>=<span class="string">&quot;afterThrowing&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;myPointCut&quot;</span>/&gt;</span></span><br></pre></td></tr></table></div></figure></li>
</ul>

        <h3 id="基于注解的AOP开发">
          <a href="#基于注解的AOP开发" class="heading-link"><i class="fas fa-link"></i></a><a href="#基于注解的AOP开发" class="headerlink" title="基于注解的AOP开发"></a>基于注解的AOP开发</h3>
      
        <h4 id="步骤：-1">
          <a href="#步骤：-1" class="heading-link"><i class="fas fa-link"></i></a><a href="#步骤：-1" class="headerlink" title="步骤："></a>步骤：</h4>
      <ol>
<li><p>创建目标接口和目标类（内部有切点）</p>
</li>
<li><p>创建切面类（内部有增强方法）</p>
</li>
<li><p>将目标类和切面类的对象创建权交给Spring</p>
<ul>
<li>指定目标类的@Component</li>
<li>指定切面类的@Component</li>
</ul>
</li>
<li><p>在切面类中使用注解配置织入关系</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component(&quot;myAspect&quot;)</span> <span class="comment">//指定此类是一个Bean</span></span><br><span class="line"><span class="meta">@Aspect</span> <span class="comment">//指定此类为切面类</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAspect</span> </span>&#123;</span><br><span class="line">    <span class="comment">//配置前置增强</span></span><br><span class="line">    <span class="meta">@Before(&quot;execution(void com.taoyyz.annoAop..*.*(..))&quot;)</span></span><br><span class="line"><span class="comment">//    @Before(&quot;bean(target)&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">before</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;前置增强&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></li>
<li><p>在配置文件中开启组件扫描和AOP的自动代理</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--开启组件扫描--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.taoyyz&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--开启AOP自动代理--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>/&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>测试</p>
</li>
</ol>

        <h4 id="通知的类型-1">
          <a href="#通知的类型-1" class="heading-link"><i class="fas fa-link"></i></a><a href="#通知的类型-1" class="headerlink" title="通知的类型"></a>通知的类型</h4>
      <p>对于注解配置通知的语法：</p>
<p><code>@通知注解(&quot;切点表达式&quot;)</code>，也可以用<code>@通知注解(&quot;bean(Bean的id)&quot;)</code></p>
<p>可选的<strong>通知类型</strong>有：</p>
<p>
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210822165932936.png" alt="image-20210822165932936">
      </p>

        <h5 id="切点表达式的抽取-1">
          <a href="#切点表达式的抽取-1" class="heading-link"><i class="fas fa-link"></i></a><a href="#切点表达式的抽取-1" class="headerlink" title="切点表达式的抽取"></a>切点表达式的抽取</h5>
      <ol>
<li><p>定义一个任意的方法用于注解抽取切点表达式，切点表达式的名称就是方法名</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Pointcut(&quot;execution(* com.taoyyz..*.*(..))&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">myExp</span><span class="params">()</span> </span>&#123; &#125;</span><br></pre></td></tr></table></div></figure></li>
<li><p>引用此切点表达式，以下4中方式效果相同</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//配置前置增强</span></span><br><span class="line"><span class="comment">//@Before(&quot;execution(* com.taoyyz..*.*(..))&quot;)</span></span><br><span class="line"><span class="comment">//@Before(&quot;bean(target)&quot;) //切入到id为target的bean中</span></span><br><span class="line"><span class="comment">//@Before(&quot;myExp()&quot;) //引入切点表达式的抽取</span></span><br><span class="line"><span class="meta">@Before(&quot;MyAspect.myExp()&quot;)</span> <span class="comment">//同上</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">before</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;前置增强&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></li>
</ol>

        <h1 id="Spring的事务控制">
          <a href="#Spring的事务控制" class="heading-link"><i class="fas fa-link"></i></a><a href="#Spring的事务控制" class="headerlink" title="Spring的事务控制"></a>Spring的事务控制</h1>
      
        <h2 id="编程式事务控制相关对象">
          <a href="#编程式事务控制相关对象" class="heading-link"><i class="fas fa-link"></i></a><a href="#编程式事务控制相关对象" class="headerlink" title="编程式事务控制相关对象"></a>编程式事务控制相关对象</h2>
      
        <h3 id="PlatformTransactionManager">
          <a href="#PlatformTransactionManager" class="heading-link"><i class="fas fa-link"></i></a><a href="#PlatformTransactionManager" class="headerlink" title="PlatformTransactionManager"></a><code>PlatformTransactionManager</code></h3>
      <ul>
<li><p>此接口是Spring的事务管理器，它提供了常用的操作事务的方法：</p>
<p>
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210822173527109.png" alt="image-20210822173527109">
      </p>
</li>
<li><p>PlatformTransactionManager是接口类型，<strong>不同的Dao层技术有不同的实现类</strong>，例如Dao层技术是jdbc或mybatis时，实现类为<code>org.springframework.jdbc.datasource.DataSourceTransactionManager</code></p>
</li>
</ul>

        <h3 id="TransactionDefinition">
          <a href="#TransactionDefinition" class="heading-link"><i class="fas fa-link"></i></a><a href="#TransactionDefinition" class="headerlink" title="TransactionDefinition"></a><code>TransactionDefinition</code></h3>
      <ul>
<li><p>此接口是事务的定义信息对象，含有如下方法：</p>

        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210822174251488.png" alt="image-20210822174251488" style="zoom:67%;">
      </li>
<li><p><font color="purple"><strong>事务的隔离级别</strong>：</font></p>
<ul>
<li><code>ISO_DEFAULT</code></li>
<li><code>ISO_READ_UNCOMMITTED</code></li>
<li><code>ISO_READ_COMMITTED</code></li>
<li><code>ISO_REPEATABLE_READ</code></li>
<li><code>ISO_SERIALIZABLE</code></li>
</ul>
</li>
<li><p><font color="purple"><strong>事务的传播行为</strong>：</font></p>
<ul>
<li><p><code>REQUIRED</code>：如果当前没有事务，就新建一个事务；如果已经存在一个事务，则加入这个事务(默认)</p>
<p>例如：<strong>A调用B，B会看A</strong>有没有事务，如果A<strong>没有就新建</strong>，否则A<strong>有就加入</strong>到A的事务</p>
</li>
<li><p><code>SUPPORTS</code>：支持当前事务，如果当前没有事务，就以非事务方式执行（没有事务）</p>
<p>例如：<strong>A调用B，B会看A</strong>有没有事务，如果A<strong>有事务就支持</strong>A的事务，否则A<strong>没有就以非事务方式执行</strong></p>
</li>
<li><p><code>MANDATORY</code>：使用当前的事务，如果当前没有事务就抛出异常</p>
<p>例如：<strong>A调用B，B会看A</strong>有没有事务，如果A<strong>有事务就支持</strong>当前事务，否则A<strong>没有就抛出异常</strong></p>
</li>
<li><p><code>REQUERS_NEW</code>：新建事务，如果当前在事务中，把当前事务挂起</p>
</li>
<li><p><code>NEVER</code>：以非事务方式执行，如果当前存在事务就抛出异常</p>
</li>
<li><p><code>NESTED</code>：如果当前存在事务，则在嵌套事务内执行；如果当前没有事务，则执行REQUIRED操作</p>
</li>
<li><p>超时时间：默认为-1没有超时限制。如果有，则以秒为单位设置</p>
</li>
<li><p>是否只读：建议查询时设置为只读</p>
</li>
</ul>
</li>
</ul>

        <h3 id="TransactionStatus">
          <a href="#TransactionStatus" class="heading-link"><i class="fas fa-link"></i></a><a href="#TransactionStatus" class="headerlink" title="TransactionStatus"></a><code>TransactionStatus</code></h3>
      <ul>
<li><p>此接口提供了事务的运行状态，方法如下：</p>

        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210822175929810.png" alt="image-20210822175929810" style="zoom: 67%;">
      </li>
</ul>

        <h2 id="基于XML的声明式事务控制">
          <a href="#基于XML的声明式事务控制" class="heading-link"><i class="fas fa-link"></i></a><a href="#基于XML的声明式事务控制" class="headerlink" title="基于XML的声明式事务控制"></a>基于XML的声明式事务控制</h2>
      
        <h3 id="概念：">
          <a href="#概念：" class="heading-link"><i class="fas fa-link"></i></a><a href="#概念：" class="headerlink" title="概念："></a>概念：</h3>
      <p>Spring的声明式事务控制就是采用声明的方式来处理事务。<strong>声明</strong>指的是<strong>在配置文件中声明</strong>，用在Spring配置文件中声明式的处理事务来代替代码式的处理事务</p>

        <h3 id="作用：">
          <a href="#作用：" class="heading-link"><i class="fas fa-link"></i></a><a href="#作用：" class="headerlink" title="作用："></a>作用：</h3>
      <ul>
<li>声明式事务管理不侵入开发的组件，具体来说，业务逻辑对象就不会意识到正在事务管理之中，事实上也应该如此，因为事务管理是属于系统层面的服务，而不是业务逻辑的一部分，如果想要改变事务管理策划的话，也只需要在定义文件中重新配置即可</li>
<li>在不需要事务管理的时候，只需要在设定文件上修改一下，即可移去事务管理服务，无需改变代码重新编译</li>
<li><strong>Spring声明式事务控制底层就是AOP</strong></li>
</ul>

        <h3 id="声明式事务控制的实现">
          <a href="#声明式事务控制的实现" class="heading-link"><i class="fas fa-link"></i></a><a href="#声明式事务控制的实现" class="headerlink" title="声明式事务控制的实现"></a>声明式事务控制的实现</h3>
      <ul>
<li><p>明确事项：</p>
<ul>
<li><p>谁是切点？需要被事务控制的业务方法</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--切点：目标对象内部需要增强的方法（被事务控制的方法）--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;accountService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.taoyyz.service.impl.AccountServiceImpl&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;accountDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;accountDaoImpl&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>谁是通知？事务控制</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--通知：事务的增强--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;txAdvice&quot;</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--设置事务的属性信息，可以对切入的多个method分别配置--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--name为切入到的方法，*表示任意方法--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;*&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>配置切面？</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置一个平台事务管理器，需要一个数据源对象以供操作数据库--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource</span></span></span><br><span class="line"><span class="string"><span class="tag">                                     .DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--配置织入：结合通知和切点--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--把通知txAdvice切入到accountService这个切入点--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;txAdvice&quot;</span> <span class="attr">pointcut</span>=<span class="string">&quot;bean(accountService)&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
</ul>
</li>
<li><p><strong>配置的参数</strong>：</p>

        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210823030556659.png" alt="image-20210823030556659" style="zoom:67%;">
      </li>
</ul>

        <h2 id="基于注解的声明式事务控制">
          <a href="#基于注解的声明式事务控制" class="heading-link"><i class="fas fa-link"></i></a><a href="#基于注解的声明式事务控制" class="headerlink" title="基于注解的声明式事务控制"></a>基于注解的声明式事务控制</h2>
      <ul>
<li><p>谁是切点？需要被事务控制的业务方法，需要把切入点所在的类声明为Bean</p>
</li>
<li><p>谁是通知？为切入点加上@Transactional注解，此注解可以有参数，例如只读、隔离级别、超时时间等</p>
<ul>
<li>如果@Transactional注解打在类上，则此类所有的方法都被此事务管理</li>
<li>如果@Transactional注解打在方法上，则对此方法生效</li>
</ul>
</li>
<li><p>配置切面？织入切面和切点：在XML中配置事务管理器：</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置事务管理器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>引入事务的注解驱动：</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--引入事务的注解驱动--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>/&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>在多个方法间使用事务可能出现的问题参考我的面试总结的md文件，里面提到了A方法调用B方法的事务问题</p>
</li>
</ul>

        <h1 id="MyBatis">
          <a href="#MyBatis" class="heading-link"><i class="fas fa-link"></i></a><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h1>
      <ul>
<li><p>原始JDBC开发存在的问题：</p>
<ul>
<li>数据库频繁创建连接、释放造成系统资源的浪费从而影响系统性能</li>
<li>SQL语句在代码中硬编码，造成代码不易维护，实际应用SQL变化的可能较大，SQL变动需要改动Java代码</li>
<li>查询操作时，需要手动将结果集中的数据封装到实体中。插入操作时需要手动将实体的数据设置到SQL语句中</li>
</ul>
</li>
<li><p>解决方案：</p>
<ul>
<li>使用数据库连接池初始化连接资源</li>
<li>将SQL语句抽取到XML配置文件中</li>
<li>使用反射、内省等底层技术，自动将实体与表进行属性与字段的自动映射</li>
</ul>
</li>
</ul>

        <h2 id="概念-1">
          <a href="#概念-1" class="heading-link"><i class="fas fa-link"></i></a><a href="#概念-1" class="headerlink" title="概念"></a>概念</h2>
      <ul>
<li>MyBatis是一个优秀的基于Java的持久层框架，它内部封装了JDBC，使开发者只需要关注SQL语句本身，而不需要花费精力去加载驱动、创建连接、创建statement等繁杂的过程</li>
<li>MyBatis通过XML或注解方式将要执行的各种statement配置起来，并通过Java对象和statement中SQL的动态参数进行映射生成最终执行的SQL语句</li>
<li>最后MyBatis框架执行SQL并将结果映射为Java对象并返回，采用ORM思想解决了实体和数据库映射的问题，对JDBC进行了封装，屏蔽了JDBC API底层访问细节，使我们不再与JDBC API打交道就可以完成数据库的操作</li>
</ul>

        <h2 id="MyBatis快速入门">
          <a href="#MyBatis快速入门" class="heading-link"><i class="fas fa-link"></i></a><a href="#MyBatis快速入门" class="headerlink" title="MyBatis快速入门"></a>MyBatis快速入门</h2>
      <ol>
<li><p>添加MyBatis坐标</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.38<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>创建数据表</p>
</li>
<li><p>编写实体类</p>
</li>
<li><p>编写XML映射文件</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;userMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.taoyyz.domain.User&quot;</span>&gt;</span></span><br><span class="line">        select * from user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>编写MyBatis核心配置文件</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--数据源环境--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;mysql&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置一个环境--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;mysql&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--配置数据源为POOLED池--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql:///db3&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;199988&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--加载映射文件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/taoyyz/mapper/UserMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>测试</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.读取MyBatis核心配置文件</span></span><br><span class="line">InputStream is = Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="comment">//2.利用工厂类建造者对象建造一个工厂类对象</span></span><br><span class="line">SqlSessionFactory sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(is);</span><br><span class="line"><span class="comment">//3.利用工厂对象生产一个会话对象</span></span><br><span class="line">SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line"><span class="comment">//4.利用对话对象执行SQL语句，参数就是mapper的命名空间和id</span></span><br><span class="line">List&lt;User&gt; userList = sqlSession.selectList(<span class="string">&quot;userMapper.findAll&quot;</span>);</span><br><span class="line"><span class="comment">//5.打印数据</span></span><br><span class="line">System.out.println(userList);</span><br><span class="line"><span class="comment">//6.释放资源</span></span><br><span class="line">sqlSession.close();</span><br><span class="line">is.close();</span><br></pre></td></tr></table></div></figure></li>
</ol>
<p><font color="red">踩坑！！数据库字段名含有下划线时，无法赋值给Java类中的成员属性（转驼峰）</font></p>
<ul>
<li><p>解决方法：</p>
<ul>
<li><p>在Java成员属性命名时，考虑数据库字段名下划线转驼峰，也就是字段<code>dept_id</code>赋值时匹配的是<code>deptId</code></p>
</li>
<li><p>关掉MyBatis的转驼峰，默认为false</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--关掉驼峰转换--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br></pre></td></tr></table></div></figure></li>
</ul>
</li>
</ul>

        <h2 id="MyBatis的CRUD">
          <a href="#MyBatis的CRUD" class="heading-link"><i class="fas fa-link"></i></a><a href="#MyBatis的CRUD" class="headerlink" title="MyBatis的CRUD"></a>MyBatis的CRUD</h2>
      
        <h3 id="插入数据">
          <a href="#插入数据" class="heading-link"><i class="fas fa-link"></i></a><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h3>
      <ol>
<li><p>在映射文件中编写SQL语句</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置此insert语句的id和参数类型--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.taoyyz.domain.User&quot;</span>&gt;</span></span><br><span class="line">    insert into user values (#&#123;id&#125;,#&#123;username&#125;,#&#123;password&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<ul>
<li><p>使用<code>parameterType</code>属性指定参数的类型的全类名，这里是User类型</p>
</li>
<li><p>使用<code>#&#123;实体参数的属性名&#125;</code>取出User类型的成员属性值作为占位符</p>
</li>
<li><p><strong>主键自增：</strong>需要对插入的数据实行主键自增，可以在insert标签利用以下属性（有顺序要求）</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;save&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span> <span class="attr">useGeneratedKeys</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
</ul>
</li>
<li><p>调用SqlSession对象的<code>int insert(String s,Object o)</code>方法</p>
<ul>
<li>参数1：要执行的映射文件中的SQL语句的命名空间和id，例如<code>userMapper.insert</code></li>
<li>参数2：SQL语句插入所需要的参数对象，例如User对象</li>
</ul>
</li>
<li><p>调用SqlSession对象的<code>commit()</code>方法提交事务</p>
</li>
<li><p>释放连接：关闭SqlSession与输入流</p>
</li>
</ol>

        <h3 id="修改数据">
          <a href="#修改数据" class="heading-link"><i class="fas fa-link"></i></a><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h3>
      <ol>
<li><p>在映射文件中编写SQL语句</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置此update语句的id和参数类型--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.taoyyz.domain.User&quot;</span>&gt;</span></span><br><span class="line">    update user set username = #&#123;username&#125;,password = #&#123;password&#125; where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<ul>
<li>使用<code>parameterType</code>属性指定参数的类型的全类名，这里是User类型</li>
<li>使用<code>#&#123;实体参数的属性名&#125;</code>取出User类型的成员属性值作为占位符</li>
</ul>
</li>
<li><p>调用SqlSession对象的<code>int update(String s,Object o)</code>方法</p>
<ul>
<li>参数1：要执行的映射文件中的SQL语句的命名空间和id，例如<code>userMapper.update</code></li>
<li>参数2：SQL语句修改所需要的参数对象，例如User对象</li>
</ul>
</li>
<li><p>调用SqlSession对象的<code>commit()</code>方法提交事务</p>
</li>
<li><p>释放连接：关闭SqlSession与输入流</p>
</li>
</ol>

        <h3 id="删除数据">
          <a href="#删除数据" class="heading-link"><i class="fas fa-link"></i></a><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h3>
      <ol>
<li><p>在映射文件中编写SQL语句</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置此delete语句的id和参数类型--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;delete&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang.Integer&quot;</span>&gt;</span></span><br><span class="line">    delete from user where id = #&#123;单个参数名随便写&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<ul>
<li>使用<code>parameterType</code>属性指定参数的类型的全类名，这里是Integer类型</li>
<li>使用<code>#&#123;参数的属性名&#125;</code>取出参数类型的值，这里是单个值随意</li>
</ul>
</li>
<li><p>调用SqlSession对象的<code>int delete(String s,Object o)</code>方法</p>
<ul>
<li>参数1：要执行的映射文件中的SQL语句的命名空间和id，例如<code>userMapper.delete</code></li>
<li>参数2：SQL语句修改所需要的参数对象，例如一个Integer对象</li>
</ul>
</li>
<li><p>调用SqlSession对象的<code>commit()</code>方法提交事务</p>
</li>
<li><p>释放连接：关闭SqlSession与输入流</p>
</li>
</ol>

        <h2 id="MyBatis核心配置文件">
          <a href="#MyBatis核心配置文件" class="heading-link"><i class="fas fa-link"></i></a><a href="#MyBatis核心配置文件" class="headerlink" title="MyBatis核心配置文件"></a>MyBatis核心配置文件</h2>
      <p><strong>值得注意的是，configuration标签中的子标签是有顺序要求的，例如typeAliases必须位于properties后面</strong></p>
<ul>
<li><code>configuration</code>标签的配置<ul>
<li><code>properties</code>属性</li>
<li><code>settings</code>设置</li>
<li><code>typeAliases</code>类型别名</li>
<li><code>typeHandlers</code>类型处理器</li>
<li><code>objectFactory</code>对象工厂</li>
<li><code>plugins</code>插件</li>
<li><code>environments</code>环境配置，支持配置多个环境，可以通过<code>default</code>属性指定默认的环境名称<ul>
<li><code>environment</code>配置某个环境，通过<code>id</code>属性区分<ul>
<li><code>transactionManager</code>事务管理器，<code>type</code>属性设置为JDBC</li>
<li><code>dataSource</code>数据源，<code>type</code>属性设置为<code>POOLED</code>连接池<ul>
<li>driver、url、username、password等属性</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><code>databaseIdProvider</code>数据库厂商标识</li>
<li><code>mappers</code>映射器，加载Mapper.xml文件</li>
</ul>
</li>
</ul>

        <h3 id="environments标签">
          <a href="#environments标签" class="heading-link"><i class="fas fa-link"></i></a><a href="#environments标签" class="headerlink" title="environments标签"></a>environments标签</h3>
      <ul>
<li>对于事务管理器transactionManager，它的<code>type</code>属性有两种：<ul>
<li><code>JDBC</code>：这个配置就是直接使用了JDBC的提交和回滚设置，它依赖于从数据源得到的连接来管理事务作用域</li>
<li><code>MANAGED</code>：这个配置几乎没做什么，它从来不提交或回滚一个连接，而是让容器来管理事务的整个声明周期（比如JEE应用服务器的上下文）。默认情况下它不会关闭连接，然而一些容器并不希望这样，因此需要将<code>closeConnection</code>属性设置为false来组织它默认的关闭行为</li>
</ul>
</li>
<li>对于数据源dataSource，它的<code>type</code>属性有三种：<ul>
<li><code>UNPOOLED</code>：这个数据源的实现只是每次被请求时打开和关闭连接</li>
<li><code>POLLED</code>：这个数据源的实现利用<strong>池</strong>的概念将JDBC连接对象组织起来</li>
<li><code>JNDI</code>：这个数据源的实现是为了能在如EJB或应用服务器这类容器中使用，容器可以集中或在外部配置数据源，然后放置在一个JNDI上下文的引用</li>
</ul>
</li>
</ul>

        <h3 id="mapper标签">
          <a href="#mapper标签" class="heading-link"><i class="fas fa-link"></i></a><a href="#mapper标签" class="headerlink" title="mapper标签"></a>mapper标签</h3>
      <ul>
<li><p><code>mapper</code>标签用于加载映射，加载方式有以下几种：</p>
<ul>
<li><p>使用相对<code>resources</code>资源目录的类路径引用，例如：</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/taoyyz/mapper/UserMapper.xml&quot;</span>/&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>使用完全限定资源定位符(URL)，例如</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">url</span>=<span class="string">&quot;file:///var/mappers/UserMapper.xml&quot;</span>/&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>使用映射器接口实现类的全类名，例如：</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.builder.UserMapper.xml&quot;</span>/&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>将包内的映射器接口实现全部注册为映射器（类似于扫描包），例如:</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;org.mybatis.builder&quot;</span>/&gt;</span></span><br></pre></td></tr></table></div></figure></li>
</ul>
</li>
</ul>

        <h3 id="properties标签">
          <a href="#properties标签" class="heading-link"><i class="fas fa-link"></i></a><a href="#properties标签" class="headerlink" title="properties标签"></a>properties标签</h3>
      <ul>
<li><p><code>properties</code>标签用于加载properties配置文件</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--加载properties配置文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;jdbc.properties&quot;</span>/&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>使用SpEL表达式即可取出配置文件中的key</p>
</li>
</ul>

        <h3 id="typeAliases标签">
          <a href="#typeAliases标签" class="heading-link"><i class="fas fa-link"></i></a><a href="#typeAliases标签" class="headerlink" title="typeAliases标签"></a>typeAliases标签</h3>
      <ul>
<li><p>typeAliases标签用于为Java类型的全限定名设置一个别名</p>
<ul>
<li>定义全类名的别名：<code>com.taoyyz.domain.User</code>的别名为<code>user</code></li>
</ul>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--定义别名--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;com.taoyyz.domain.User&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;user&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>MyBatis框架已经为我们设置好了一些类型的别名</p>

        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210823172634343.png" alt="image-20210823172634343" style="zoom: 50%;">
      </li>
<li><p>Mybatis会自动扫描指定包下面的JavaBean，并且默认设置一个别名，<strong>默认的名字为： JavaBean 的首字母小写的非限定类名</strong>来作为它的别名（其实别名是不去分大小写的）。也可在javabean 加上<strong>注解@Alias 来自定义别名</strong>， 例如： **@Alias(user)**，也可以在配置文件中用 <code>&lt;typeAliases&gt;</code> 的子元素  <code>&lt;package&gt;</code> 来让Mybatis自动扫描</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.domain&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
</ul>

        <h2 id="MyBatis相关API">
          <a href="#MyBatis相关API" class="heading-link"><i class="fas fa-link"></i></a><a href="#MyBatis相关API" class="headerlink" title="MyBatis相关API"></a>MyBatis相关API</h2>
      
        <h3 id="SqlSessionFactoryBuilder">
          <a href="#SqlSessionFactoryBuilder" class="heading-link"><i class="fas fa-link"></i></a><a href="#SqlSessionFactoryBuilder" class="headerlink" title="SqlSessionFactoryBuilder"></a>SqlSessionFactoryBuilder</h3>
      <ul>
<li><p>SqlSession的工厂建造器，<code>build()</code>方法用于构造一个工厂对象</p>
<ul>
<li><code>SqlSessionFactory build(InputStream inputStream)</code><ul>
<li>此方法传入一个InputStream输入流对象用于指示MyBatis核心配置文件的路径</li>
<li>会返回一个SqlSessionFactory工厂对象</li>
<li>建议使用<code>org.apache.ibatis.io Resources</code>类的<code>getResourceAsStream(String resource)</code>方法传入一个类加载路径下的文件名，获得此文件名的InputStream输入流</li>
</ul>
</li>
</ul>
</li>
<li><p>用法：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.读取MyBatis核心配置文件</span></span><br><span class="line">InputStream is = Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="comment">//2.利用工厂类建造者对象建造一个工厂类对象</span></span><br><span class="line">SqlSessionFactory sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(is);</span><br></pre></td></tr></table></div></figure></li>
</ul>

        <h3 id="SqlSessionFactory">
          <a href="#SqlSessionFactory" class="heading-link"><i class="fas fa-link"></i></a><a href="#SqlSessionFactory" class="headerlink" title="SqlSessionFactory"></a>SqlSessionFactory</h3>
      <ul>
<li>SqlSession的工厂类，用于创建SqlSession的实例，常用方法：<ul>
<li><code>SqlSession openSession()</code>：默认开启一个事务，但事务不会自动提交，需要手动<code>commit()</code></li>
<li><code>SqlSession openSession(boolean autoCommit)</code>：参数可以指定是否自动提交</li>
</ul>
</li>
</ul>

        <h3 id="SqlSession">
          <a href="#SqlSession" class="heading-link"><i class="fas fa-link"></i></a><a href="#SqlSession" class="headerlink" title="SqlSession"></a>SqlSession</h3>
      <ul>
<li>会话对象，用于操作数据库、执行SQL、提交或回滚事务、获取映射器实例等</li>
<li>执行SQL语句的方法主要有：<ul>
<li><code>T selectOne(String statement,Object parameter)</code></li>
<li><code>List&lt;E&gt; selectList(String statement,Object parameter)</code></li>
<li><code>int insert(String statement,Object parameter)</code></li>
<li><code>int update(String statement,Object parameter)</code></li>
<li><code>int delete(String statement,Object parameter)</code></li>
</ul>
</li>
<li>操作事务的主要方法有：<ul>
<li><code>void commit()</code></li>
<li><code>void rollback()</code></li>
</ul>
</li>
</ul>

        <h2 id="MyBatis的Dao层实现">
          <a href="#MyBatis的Dao层实现" class="heading-link"><i class="fas fa-link"></i></a><a href="#MyBatis的Dao层实现" class="headerlink" title="MyBatis的Dao层实现"></a>MyBatis的Dao层实现</h2>
      
        <h3 id="传统方式">
          <a href="#传统方式" class="heading-link"><i class="fas fa-link"></i></a><a href="#传统方式" class="headerlink" title="传统方式"></a>传统方式</h3>
      <p>编写Dao层接口，在方法里利用MyBatis的SqlSession对象查询数据库并返回结果</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        InputStream is = Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">        SqlSessionFactory sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(is);</span><br><span class="line">        SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">        List&lt;User&gt; userList = sqlSession.selectList(<span class="string">&quot;userMapper.findAll&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> userList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="代理开发方式">
          <a href="#代理开发方式" class="heading-link"><i class="fas fa-link"></i></a><a href="#代理开发方式" class="headerlink" title="代理开发方式"></a>代理开发方式</h3>
      <ul>
<li>采用MyBatis的代理开发方式实现Mapper/Dao层开发是主流方式</li>
<li>Mapper/Dao层接口开发方法只需要编写Mapper接口（Dao接口），由MyBatis框架根据接口定义创建接口的动态代理对象，代理对象的方法体同上边Mapper/Dao层接口实现类的方法</li>
<li>Mapper接口开发需要遵循以下规范：<ul>
<li>Mapper.xml文件中的**<code>mapper</code>标签的<code>namespace</code><strong>要与Mapper/Dao层</strong>接口的全类名相同**</li>
<li>Mapper/Dao层<strong>接口的方法名</strong>和Mapper.xml中定义的每个操作(例如<code>select</code>)标签的**<code>id</code>相同**</li>
<li>Mapper/Dao层<strong>接口方法的参数类型</strong>和Mapper.xml中定义的每个SQL的<strong>parameterType的类型相同</strong></li>
<li>Mapper/Dao层<strong>接口方法的返回值类型</strong>和Mapper.xml中定义的每个SQL的<strong>resultType的类型相同</strong></li>
</ul>
</li>
</ul>

        <h2 id="MyBatis映射文件高级">
          <a href="#MyBatis映射文件高级" class="heading-link"><i class="fas fa-link"></i></a><a href="#MyBatis映射文件高级" class="headerlink" title="MyBatis映射文件高级"></a>MyBatis映射文件高级</h2>
      
        <h3 id="动态SQL">
          <a href="#动态SQL" class="heading-link"><i class="fas fa-link"></i></a><a href="#动态SQL" class="headerlink" title="动态SQL"></a>动态SQL</h3>
      <ul>
<li><p><code>if</code>标签配合<code>where</code>标签：可以根据条件决定是否拼接SQL，如果<code>if</code>写在<code>where</code>中，相当于<code>where 1 = 1</code></p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByCondition&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span> <span class="attr">pa</span></span></span><br><span class="line"><span class="tag">    <span class="attr">select</span> * <span class="attr">from</span> <span class="attr">user</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id!=0 and id!=null&quot;</span>&gt;</span></span><br><span class="line">            and id = #&#123;id&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;username!=null&quot;</span>&gt;</span></span><br><span class="line">            and username = #&#123;username&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;password!=null&quot;</span>&gt;</span></span><br><span class="line">            and password = #&#123;password&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p><code>foreach</code>标签，用于遍历参数，<code>collection</code>属性可以为<code>list</code>或<code>array</code></p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByIds&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">    select * from user</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">open</span>=<span class="string">&quot;id in(&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span>&gt;</span></span><br><span class="line">            #&#123;id&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
</ul>

        <h3 id="抽取">
          <a href="#抽取" class="heading-link"><i class="fas fa-link"></i></a><a href="#抽取" class="headerlink" title="抽取"></a>抽取</h3>
      <p>把重复的SQL语句抽取到<code>mapper</code>标签内的<code>sql</code>标签内：</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;selectUser&quot;</span>&gt;</span>select * from user<span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByCondition&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--引用抽取的sql即可--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;selectUser&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></div></figure>


        <h2 id="MyBatis核心配置文件高级">
          <a href="#MyBatis核心配置文件高级" class="heading-link"><i class="fas fa-link"></i></a><a href="#MyBatis核心配置文件高级" class="headerlink" title="MyBatis核心配置文件高级"></a>MyBatis核心配置文件高级</h2>
      
        <h3 id="typeHandlers标签">
          <a href="#typeHandlers标签" class="heading-link"><i class="fas fa-link"></i></a><a href="#typeHandlers标签" class="headerlink" title="typeHandlers标签"></a>typeHandlers标签</h3>
      <ul>
<li>MyBatis在预处理语句（PreparedStatement）中设置参数或从结果集取出数据时，都会用<strong>类型处理器</strong>将获取的值以合适的方式转化为Java的数据类型，以下是一些默认的类型处理器：</li>
</ul>
<p>
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210823211628684.png" alt="image-20210823211628684">
      </p>
<ul>
<li><p>可以重写类型处理器或者创建类型处理器来处理不支持的或非标准的类型。</p>
<ul>
<li>具体做法为：实现<code>org.apache.ibatis.type.TypeHandler</code>接口，或继承一个很便利的类<code>org.apache.ibatis.type.BaseTypeHandler</code>，然后可以选择将它映射到一个JDBC类型。</li>
<li>例如需求：一个Java中的Date数据类型，将它存储到数据库时存为一个毫秒值，取出来时转换成Java的Date类型，也就是在Java的Date类型与数据库的varchar毫秒值之间转换</li>
</ul>
</li>
<li><p>开发步骤：</p>
<ol>
<li><p>定义转换类，继承<code>BaseTypeHandler&lt;T&gt;</code></p>
</li>
<li><p>重写其中的方法，其中</p>
<ul>
<li><code>setNonNullParameter</code>为Java程序设置到数据库的回调方法</li>
<li><code>getNullableResult</code>为查询时MySQL字符串类型转换为Java的Type类型的方法</li>
</ul>
</li>
<li><p>在MyBatis核心配置文件中注册此转换类</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--自定义类型处理器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeHandlers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeHandler</span> <span class="attr">handler</span>=<span class="string">&quot;com.handler.DateTypeHandler&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeHandlers</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>测试</p>
</li>
</ol>
</li>
</ul>

        <h3 id="plugins标签">
          <a href="#plugins标签" class="heading-link"><i class="fas fa-link"></i></a><a href="#plugins标签" class="headerlink" title="plugins标签"></a>plugins标签</h3>
      <ul>
<li><p>概念</p>
<ul>
<li>MyBatis可以使用第三方的插件来对功能进行扩展，<strong>分页助手PageHelper</strong>是将分页的复杂操作进行封装，使用简单的方式即可获得分页的相关数据</li>
</ul>
</li>
<li><p>开发步骤：</p>
<ol>
<li><p>导入通用PageHelper的坐标</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.jsqlparser<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsqlparser<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>在MyBatis核心配置文件中配置PageHelper插件</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置分页插件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">interceptor</span>=<span class="string">&quot;com.github.pagehelper.PageHelper&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置方言--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dialect&quot;</span> <span class="attr">value</span>=<span class="string">&quot;mysql&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>测试：利用<code>PageHelper</code>类的静态方法操作分页</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PageHelper.startPage(<span class="number">2</span>,<span class="number">3</span>); <span class="comment">//页码为第2页，分页大小为显示3条</span></span><br></pre></td></tr></table></div></figure></li>
</ol>
</li>
<li><p>获得分页相关参数：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获得分页相关参数，利用一个PageInfo对象，参数为当前结果集</span></span><br><span class="line">PageInfo&lt;User&gt; pageInfo = <span class="keyword">new</span> PageInfo&lt;&gt;(userList);</span><br><span class="line">System.out.println(<span class="string">&quot;当前页为 &quot;</span> + pageInfo.getPageNum());</span><br><span class="line">System.out.println(<span class="string">&quot;显示条数 &quot;</span> + pageInfo.getPageSize());</span><br><span class="line">System.out.println(<span class="string">&quot;总条数 &quot;</span> + pageInfo.getTotal());</span><br><span class="line">System.out.println(<span class="string">&quot;总分页数 &quot;</span> + pageInfo.getPages());</span><br><span class="line">System.out.println(<span class="string">&quot;上一页的页码 &quot;</span> + pageInfo.getPrePage());</span><br><span class="line">System.out.println(<span class="string">&quot;下一页的页码 &quot;</span> + pageInfo.getNextPage());</span><br><span class="line">System.out.println(<span class="string">&quot;是否第一页 &quot;</span> + pageInfo.isIsFirstPage());</span><br><span class="line">System.out.println(<span class="string">&quot;是否最后一页 &quot;</span> + pageInfo.isIsLastPage());</span><br></pre></td></tr></table></div></figure></li>
</ul>

        <h2 id="MyBatis多表操作">
          <a href="#MyBatis多表操作" class="heading-link"><i class="fas fa-link"></i></a><a href="#MyBatis多表操作" class="headerlink" title="MyBatis多表操作"></a>MyBatis多表操作</h2>
      <ul>
<li>一对一：用<code>&lt;resultMap&gt;</code>配置</li>
<li>一对多：用<code>&lt;resultMap&gt;</code> + <code>&lt;collection&gt;</code>配置</li>
<li>多对多：用<code>&lt;resultMap&gt;</code> + <code>&lt;collection&gt;</code>配置</li>
</ul>

        <h3 id="一对一">
          <a href="#一对一" class="heading-link"><i class="fas fa-link"></i></a><a href="#一对一" class="headerlink" title="一对一"></a>一对一</h3>
      <p><code>Emp</code>类中存在一个成员属性：<code>Dept</code>对象，表示每一个Emp员工所在的Dept部门，一个员工对应属于一个部门</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.taoyyz.dao.EmpDao&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置一个结果Map集合，类型是Emp全类名，这里用别名emp--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;empMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;emp&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置主键，column是数据库查询出的字段名，property是实体类属性名--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;empid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--其他属性用result，column是查询的数据库结果名，property是实体类属性名--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;empname&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;empdept_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;dept_id&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;result column=&quot;deptdept_id&quot; property=&quot;dept.dept_id&quot;/&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;result column=&quot;deptname&quot; property=&quot;dept.name&quot;/&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;result column=&quot;deptloc&quot; property=&quot;dept.loc&quot;/&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--另一种方式，property是Emp中的属性名称dept，javaType是Emp中的属性类型--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;dept&quot;</span>&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;ddept_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;dept_id&quot;</span>/&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dname&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dloc&quot;</span> <span class="attr">property</span>=<span class="string">&quot;loc&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;empMap&quot;</span>&gt;</span></span><br><span class="line">        select emp.id       as empid</span><br><span class="line">             , emp.name     as empname</span><br><span class="line">             , emp.dept_id  as empdept_id</span><br><span class="line">             , dept.dept_id as deptdept_id</span><br><span class="line">             , dept.name    as deptname</span><br><span class="line">             , dept.loc     as deptloc</span><br><span class="line">        from emp,</span><br><span class="line">             dept</span><br><span class="line">        where emp.dept_id = dept.dept_id</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></div></figure>


        <h3 id="一对多">
          <a href="#一对多" class="heading-link"><i class="fas fa-link"></i></a><a href="#一对多" class="headerlink" title="一对多"></a>一对多</h3>
      <p><code>Dept</code>类中存在一个成员属性：<code>List&lt;Emp&gt;</code>集合，表示一个Dept部门下可能存在多个Emp员工</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.taoyyz.dao.DeptDao&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置一个结果Map集合，类型是Dept全类名，这里用别名dept--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;deptMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;dept&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;ddept_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;dept_id&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dname&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dloc&quot;</span> <span class="attr">property</span>=<span class="string">&quot;loc&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置集合信息，property是Dept中集合的名称，ofType是Dept中集合装的数据类型--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;empList&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;emp&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;eid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;edept_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;dept_id&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;deptMap&quot;</span>&gt;</span></span><br><span class="line">        SELECT dept.dept_id as ddept_id,</span><br><span class="line">               dept.name    as dname,</span><br><span class="line">               dept.loc     as dloc,</span><br><span class="line">               emp.id       as eid,</span><br><span class="line">               emp.name     as ename,</span><br><span class="line">               emp.dept_id  as edept_id</span><br><span class="line">        FROM emp,</span><br><span class="line">             dept</span><br><span class="line">        WHERE emp.dept_id = dept.dept_id</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></div></figure>


        <h3 id="多对多">
          <a href="#多对多" class="heading-link"><i class="fas fa-link"></i></a><a href="#多对多" class="headerlink" title="多对多"></a>多对多</h3>
      <p><code>Emp</code>类中存在一个成员属性：<code>List&lt;Role&gt;</code>集合，表示每个Emp员工可能有多个角色，关系由一个中间表维护</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.taoyyz.dao.EmpDao&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;empRoleMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;emp&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;eid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dept_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;dept_id&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;roleList&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;role&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;roleid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;roleName&quot;</span> <span class="attr">property</span>=<span class="string">&quot;roleName&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;roleDesc&quot;</span> <span class="attr">property</span>=<span class="string">&quot;roleDesc&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAllWithRole&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;empRoleMap&quot;</span>&gt;</span></span><br><span class="line">        SELECT *, emp.id as eid</span><br><span class="line">        FROM emp,</span><br><span class="line">             role,</span><br><span class="line">             emp_role</span><br><span class="line">        where emp.id = emp_role.empid</span><br><span class="line">          AND role.id = emp_role.roleid</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></div></figure>


        <h2 id="MyBatis注解开发">
          <a href="#MyBatis注解开发" class="heading-link"><i class="fas fa-link"></i></a><a href="#MyBatis注解开发" class="headerlink" title="MyBatis注解开发"></a>MyBatis注解开发</h2>
      
        <h3 id="MyBatis注解实现简单的CRUD">
          <a href="#MyBatis注解实现简单的CRUD" class="heading-link"><i class="fas fa-link"></i></a><a href="#MyBatis注解实现简单的CRUD" class="headerlink" title="MyBatis注解实现简单的CRUD"></a>MyBatis注解实现简单的CRUD</h3>
      <ul>
<li><p>在Dao/Mapper接口的方法上打上相应的注解</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Select(&quot;select * from user&quot;)</span></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Insert(&quot;insert into user values (#&#123;id&#125;, #&#123;username&#125;,#&#123;password&#125;,#&#123;birthday&#125;)&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(User user)</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Update(&quot;update user set username = #&#123;username&#125;, </span></span><br><span class="line"><span class="meta">            password = #&#123;password&#125; where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(User user)</span></span>;</span><br><span class="line">            </span><br><span class="line">    <span class="meta">@Delete(&quot;delete from user where id = #&#123;单个参数名随便写&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">delete</span><span class="params">(Integer id)</span></span>;</span><br><span class="line">            </span><br><span class="line">    <span class="meta">@Select(&quot;select * from user where id = #&#123;单个参数名随便写&#125;&quot;)</span></span><br><span class="line">    <span class="function">User <span class="title">findUserById</span><span class="params">(Integer id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></li>
<li><p>在MyBatis核心配置文件中开启注解接口扫描的包</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--从Dao层的包加载映射--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--加载映射关系的注解的包--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.taoyyz.dao&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
</ul>

        <h3 id="MyBatis注解实现多表复杂映射">
          <a href="#MyBatis注解实现多表复杂映射" class="heading-link"><i class="fas fa-link"></i></a><a href="#MyBatis注解实现多表复杂映射" class="headerlink" title="MyBatis注解实现多表复杂映射"></a>MyBatis注解实现多表复杂映射</h3>
      <p>
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210824180725774.png" alt="image-20210824180725774">
      </p>
<p>
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210824180818367.png" alt="image-20210824180818367">
      </p>

        <h4 id="一对一-1">
          <a href="#一对一-1" class="heading-link"><i class="fas fa-link"></i></a><a href="#一对一-1" class="headerlink" title="一对一"></a>一对一</h4>
      <ul>
<li><p>数据库字段与Java成员属性名的对应关系：</p>
<ul>
<li><p><code>@Result(column = &quot;did&quot;, property = &quot;dept_id&quot;)</code>：把查询结果字段dept_id映射赋值给成员属性名</p>
<ul>
<li>可以使用多个<code>@Result</code>来映射多个字段与成员属性名<ul>
<li>区分多个表的成员属性在<code>property</code>属性用<code>成员属性.该成员自身的属性</code>赋值</li>
</ul>
</li>
<li>也可以用<code>@Results(&#123;@Result(column = &quot;did&quot;, property = &quot;dept_id&quot;)...&#125;)</code></li>
</ul>
</li>
<li><p>```java<br>@Select(“select * from emp”)<br>@Result(column = “dept_id”, property = “dept_id”)<br>@Result(</p>
<pre><code>    //javaType要封装到Emp的成员属性的类，property是要封装到的Emp的成员属性名
    javaType = Dept.class, property = &quot;dept&quot;,
    //column是根据哪个字段查询Dept表的数据，然后用此dept_id去select查Dept表
    column = &quot;dept_id&quot;,one = @One(select = &quot;com.taoyyz.dao.DeptDao
                                  .findById&quot;)
</code></pre>
<p>)<br>List<Emp> findAll();</Emp></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    * 这样相当于先查询`@Select(&quot;select * from emp&quot;)`，然后用查询的结果中包含的`dept_id`去再次调用@One注解传入一个打上了@Select注解的select语句的`全类名.方法名`即可二次封装</span><br><span class="line"></span><br><span class="line">#### 一对多</span><br><span class="line"></span><br><span class="line">* 也可以采用先`@Select(select * from dept)`查出一张表的数据，然后在@Result里封装映射结果到成员属性里</span><br><span class="line"></span><br><span class="line">* 封装的成员属性是一个集合时，也就是一对多查询，此时@Result就要指定`javaType`和`many`</span><br><span class="line"></span><br><span class="line">  ```java</span><br><span class="line">  @Select(&quot;select * from dept&quot;)</span><br><span class="line">  @Results(&#123;</span><br><span class="line">          @Result(id = true, column = &quot;dept_id&quot;, property = &quot;dept_id&quot;),</span><br><span class="line">          @Result(column = &quot;name&quot;, property = &quot;name&quot;),</span><br><span class="line">          @Result(column = &quot;loc&quot;, property = &quot;loc&quot;),</span><br><span class="line">          @Result(</span><br><span class="line">                  column = &quot;dept_id&quot;, property = &quot;empList&quot;,</span><br><span class="line">                  javaType = List.class, many = @Many(select = &quot;com.taoyyz.dao.EmpDao.findByDeptId&quot;)</span><br><span class="line">          )</span><br><span class="line">  &#125;)</span><br><span class="line">  List&lt;Dept&gt; findAllWithEmp();</span><br></pre></td></tr></table></div></figure></li>
</ul>
</li>
<li><p>关键就是javaType此时是List集合的class，并且由于结果是多个，所以用<code>many</code>再查其他表中的记录</p>
</li>
</ul>

        <h4 id="多对多-1">
          <a href="#多对多-1" class="heading-link"><i class="fas fa-link"></i></a><a href="#多对多-1" class="headerlink" title="多对多"></a>多对多</h4>
      <ul>
<li><p>关键是第一次查询的emp.id要作为中间表的条件，找到对应的role.id，再根据role.id查询role表中的id</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;select *,emp.id as empid from emp&quot;)</span></span><br><span class="line"><span class="meta">@Result(column = &quot;empid&quot;,property = &quot;id&quot;)</span></span><br><span class="line"><span class="meta">@Result(</span></span><br><span class="line"><span class="meta">        javaType = List.class,property = &quot;roleList&quot;,</span></span><br><span class="line"><span class="meta">        column = &quot;empid&quot;,many = @Many(select = &quot;com.taoyyz.dao.RoleDao.findById&quot;)</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="function">List&lt;Emp&gt; <span class="title">findAllWithRole</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></div></figure>

<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;SELECT * FROM emp_role,role where emp_role.roleid = role.id and emp_role.empid = #&#123;empid&#125;&quot;)</span></span><br><span class="line"><span class="function">List&lt;Role&gt; <span class="title">findById</span><span class="params">(Integer empid)</span></span>;</span><br></pre></td></tr></table></div></figure></li>
</ul>

        <h1 id="MyBatis-Plus">
          <a href="#MyBatis-Plus" class="heading-link"><i class="fas fa-link"></i></a><a href="#MyBatis-Plus" class="headerlink" title="MyBatis-Plus"></a>MyBatis-Plus</h1>
      
        <h2 id="概述-1">
          <a href="#概述-1" class="heading-link"><i class="fas fa-link"></i></a><a href="#概述-1" class="headerlink" title="概述"></a>概述</h2>
      
        <h3 id="简介">
          <a href="#简介" class="heading-link"><i class="fas fa-link"></i></a><a href="#简介" class="headerlink" title="简介"></a>简介</h3>
      <blockquote>
<p>MyBatis-Plus（简称MP）是一款MyBatis的增强工具，在MyBatis的基础上只做增强不做改变，为简化开发、提高效率而生</p>
</blockquote>

        <h2 id="特性">
          <a href="#特性" class="heading-link"><i class="fas fa-link"></i></a><a href="#特性" class="headerlink" title="特性"></a>特性</h2>
      <ul>
<li><strong>无侵入</strong>：只做增强不做改变，引入它不会对现有工程产生影响，如丝般顺滑</li>
<li><strong>损耗小</strong>：启动即会自动注入基本 CURD，性能基本无损耗，直接面向对象操作</li>
<li><strong>强大的 CRUD 操作</strong>：内置通用 Mapper、通用 Service，仅仅通过少量配置即可实现单表大部分 CRUD 操作，更有强大的条件构造器，满足各类使用需求</li>
<li><strong>支持 Lambda 形式调用</strong>：通过 Lambda 表达式，方便的编写各类查询条件，无需再担心字段写错</li>
<li><strong>支持主键自动生成</strong>：支持多达 4 种主键策略（内含分布式唯一 ID 生成器 - Sequence），可自由配置，完美解决主键问题</li>
<li><strong>支持 ActiveRecord 模式</strong>：支持 ActiveRecord 形式调用，实体类只需继承 Model 类即可进行强大的 CRUD 操作</li>
<li><strong>支持自定义全局通用操作</strong>：支持全局通用方法注入（ Write once, use anywhere ）</li>
<li><strong>内置代码生成器</strong>：采用代码或者 Maven 插件可快速生成 Mapper 、 Model 、 Service 、 Controller 层代码，支持模板引擎，更有超多自定义配置等您来使用</li>
<li><strong>内置分页插件</strong>：基于 MyBatis 物理分页，开发者无需关心具体操作，配置好插件之后，写分页等同于普通 List 查询</li>
<li><strong>分页插件支持多种数据库</strong>：支持 MySQL、MariaDB、Oracle、DB2、H2、HSQL、SQLite、Postgre、SQLServer 等多种数据库</li>
<li><strong>内置性能分析插件</strong>：可输出 SQL 语句以及其执行时间，建议开发测试时启用该功能，能快速揪出慢查询</li>
<li><strong>内置全局拦截插件</strong>：提供全表 delete 、 update 操作智能分析阻断，也可自定义拦截规则，预防误操作</li>
</ul>

        <h2 id="框架结构">
          <a href="#框架结构" class="heading-link"><i class="fas fa-link"></i></a><a href="#框架结构" class="headerlink" title="框架结构"></a>框架结构</h2>
      
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210918162712849.png" alt="image-20210918162712849" style="zoom:80%;">
      


        <h2 id="快速开始及3种用法">
          <a href="#快速开始及3种用法" class="heading-link"><i class="fas fa-link"></i></a><a href="#快速开始及3种用法" class="headerlink" title="快速开始及3种用法"></a>快速开始及3种用法</h2>
      <ol>
<li><p>创建Maven工程</p>
</li>
<li><p>导入相关坐标</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- mybatis-plus插件依赖 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--mysql驱动--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.38<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 连接池 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--简化bean代码的工具包--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.20<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
</ol>

        <h3 id="用法1：MyBatis-MP">
          <a href="#用法1：MyBatis-MP" class="heading-link"><i class="fas fa-link"></i></a><a href="#用法1：MyBatis-MP" class="headerlink" title="用法1：MyBatis + MP"></a>用法1：MyBatis + MP</h3>
      <ol>
<li><p>将UserMapper继承<code>BaseMapper&lt;T&gt;</code></p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">User</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p>此时UserMapper获得了BaseMapper中的方法：
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210918171312644.png" alt="image-20210918171312644">
      </p>
</li>
<li><p>利用<code>MybatisSqlSessionFactoryBuilder</code>构造<code>SqlSessionFactory</code>，然后用此工厂产生<code>SqlSession</code></p>
</li>
<li><p>调用mapper对象继承自BaseMapper的方法，例如<code>List&lt;T&gt; selectList(Wrapper&lt;T&gt; queryWrapper);</code></p>
<ul>
<li>此处的Wrapper是条件构造器，如果没有条件，直接传入null即可</li>
<li>MyBatisPlus默认以实体类名首字母小写作为表名，如果需要自己指定，在类上打上<code>@TableName(&quot;tb_user&quot;)</code>注解指定表名</li>
<li>MyBatisPlus默认开启转驼峰</li>
</ul>
</li>
</ol>

        <h3 id="用法2：Spring-MyBatis-MP">
          <a href="#用法2：Spring-MyBatis-MP" class="heading-link"><i class="fas fa-link"></i></a><a href="#用法2：Spring-MyBatis-MP" class="headerlink" title="用法2：Spring + MyBatis + MP"></a>用法2：Spring + MyBatis + MP</h3>
      <ol>
<li><p>引入相关依赖</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- mybatis-plus插件依赖 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--mysql驱动--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.38<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 连接池 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>配置spring的核心配置文件</p>
<ul>
<li>配置数据源<code>dataSource</code>的bean</li>
<li>配置<code>sqlSessionFactory</code>的bean为<code>MybatisSqlSessionFactoryBean</code>的类，指定<code>dataSource</code>的<code>property</code></li>
<li>配置mapper包扫描的bean为<code>MapperScannerConfigurer</code>的类，指定<code>basePackage</code>的<code>property</code></li>
</ul>
</li>
<li><p>直接在测试类中利用@Autowired注入对应mapper的bean即可使用</p>
</li>
</ol>

        <h3 id="用法3：SpringBoot-MyBatis-MP">
          <a href="#用法3：SpringBoot-MyBatis-MP" class="heading-link"><i class="fas fa-link"></i></a><a href="#用法3：SpringBoot-MyBatis-MP" class="headerlink" title="用法3：SpringBoot + MyBatis + MP"></a>用法3：SpringBoot + MyBatis + MP</h3>
      <ol>
<li><p>引入起步依赖</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>为mapper接口打上@Mapper注解</p>
</li>
<li><p>直接利用@Autowired注入mapper层接口的bean即可</p>
<p><strong>注</strong>：SpringBoot使用log4j进行日志显示配置springboot核心配置文件：</p>
<figure class="highlight yaml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">com:</span></span><br><span class="line">      <span class="attr">taoyyz:</span></span><br><span class="line">        <span class="attr">mybatisplusspringboot:</span> <span class="string">debug</span></span><br></pre></td></tr></table></div></figure></li>
</ol>

        <h2 id="通用CRUD">
          <a href="#通用CRUD" class="heading-link"><i class="fas fa-link"></i></a><a href="#通用CRUD" class="headerlink" title="通用CRUD"></a>通用CRUD</h2>
      
        <h3 id="插入">
          <a href="#插入" class="heading-link"><i class="fas fa-link"></i></a><a href="#插入" class="headerlink" title="插入"></a>插入</h3>
      <p>利用mapper层接口的<code>int insert(T entity)</code>插入数据，返回值是受影响的行数</p>
<ul>
<li>获取<strong>主键自增</strong>后的结果，只需要在实体类的主键属性打上<code>@TableId(type = IdType.AUTO)</code>注解即可把自增主键回写到实体对象</li>
<li><strong>@TableFiled</strong>注解：用于指定字段的一些属性，通常有2种用法：<ul>
<li>对象中的属性名和字段名不一致的问题（非驼峰）<ul>
<li>利用<code>@TableField(&quot;数据库端字段名&quot;)</code>来匹配字段名到属性上</li>
</ul>
</li>
<li>对象中的属性名在表中不存在的问题<ul>
<li>利用<code>@TableField(exist = false)</code>来声明此属性不存在于数据库中</li>
</ul>
</li>
<li>查询时忽略此属性<ul>
<li>利用<code>@TableField(select = false)</code>不查询此字段</li>
</ul>
</li>
</ul>
</li>
<li><strong>@TableName</strong>注解：用于指定实际数据库的表名</li>
</ul>

        <h3 id="更新">
          <a href="#更新" class="heading-link"><i class="fas fa-link"></i></a><a href="#更新" class="headerlink" title="更新"></a>更新</h3>
      
        <h4 id="1-根据id更新">
          <a href="#1-根据id更新" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-根据id更新" class="headerlink" title="1.根据id更新"></a>1.根据id更新</h4>
      <ul>
<li>利用<code>int updateById(T entity)</code>更新此实体对象id对应的数据库内容</li>
</ul>

        <h4 id="2-根据条件更新">
          <a href="#2-根据条件更新" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-根据条件更新" class="headerlink" title="2.根据条件更新"></a>2.根据条件更新</h4>
      <ul>
<li><p>利用<code>int update(T entity,Wrapper&lt;T&gt; updateWrapper)</code>更新满足<code>updateWrapper</code>条件的值为此实体对象的值</p>
<p><code>Wrapper</code>对象可以为：</p>
<ul>
<li><code>QueryWrapper</code>：满足此<strong>查询条件构造器</strong>的数据会被更新为<code>entity</code>的属性</li>
<li><code>UpdateWrapper</code>：满足此<strong>更新条件构造器</strong>的数据可以直接利用此构造器的<code>set(R column, Object val)</code>方法赋值，此时<code>entity</code>传入<code>null</code>也可以，在<code>set()</code>方法中指定更新的具体字段的值优先级更高</li>
</ul>
</li>
</ul>

        <h3 id="删除">
          <a href="#删除" class="heading-link"><i class="fas fa-link"></i></a><a href="#删除" class="headerlink" title="删除"></a>删除</h3>
      
        <h4 id="1-根据id删除">
          <a href="#1-根据id删除" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-根据id删除" class="headerlink" title="1.根据id删除"></a>1.根据id删除</h4>
      <ul>
<li>利用<code>int deleteById(Serializable id)</code>传入主键删除</li>
</ul>

        <h4 id="2-根据id批量删除">
          <a href="#2-根据id批量删除" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-根据id批量删除" class="headerlink" title="2.根据id批量删除"></a>2.根据id批量删除</h4>
      <ul>
<li>利用<code>int deleteBatchIds(Collection&lt;? extends Serializable&gt; idList)</code>传入需要删除的id的集合</li>
</ul>

        <h4 id="3-根据字段键值的Map删除">
          <a href="#3-根据字段键值的Map删除" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-根据字段键值的Map删除" class="headerlink" title="3.根据字段键值的Map删除"></a>3.根据字段键值的Map删除</h4>
      <ul>
<li>利用<code>int deleteByMap(Map&lt;String, Object&gt; columnMap)</code>删除满足key对应的字段的值为value的数据</li>
</ul>

        <h4 id="4-根据条件删除">
          <a href="#4-根据条件删除" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-根据条件删除" class="headerlink" title="4.根据条件删除"></a>4.根据条件删除</h4>
      <ul>
<li>利用<code>int delete(Wrapper&lt;T&gt; wrapper)</code>删除满足条件选择器的数据</li>
</ul>

        <h3 id="查询">
          <a href="#查询" class="heading-link"><i class="fas fa-link"></i></a><a href="#查询" class="headerlink" title="查询"></a>查询</h3>
      
        <h4 id="1-根据id查询">
          <a href="#1-根据id查询" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-根据id查询" class="headerlink" title="1.根据id查询"></a>1.根据id查询</h4>
      <ul>
<li>利用<code>T selectById(Serializable id)</code>查询此id对应的实体对象</li>
</ul>

        <h4 id="2-根据id批量查询">
          <a href="#2-根据id批量查询" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-根据id批量查询" class="headerlink" title="2.根据id批量查询"></a>2.根据id批量查询</h4>
      <ul>
<li>利用<code>List&lt;T&gt; selectBatchIds(Collection&lt;? extends Serializable&gt; idList)</code>传入需要查询的id的集合</li>
</ul>

        <h4 id="3-根据字段值的Map查询">
          <a href="#3-根据字段值的Map查询" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-根据字段值的Map查询" class="headerlink" title="3.根据字段值的Map查询"></a>3.根据字段值的Map查询</h4>
      <ul>
<li>利用<code>List&lt;T&gt; selectByMap(Map&lt;String, Object&gt; columnMap)</code>查询满足key对应字段的值为value的数据</li>
</ul>

        <h4 id="4-根据条件查询一条数据">
          <a href="#4-根据条件查询一条数据" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-根据条件查询一条数据" class="headerlink" title="4.根据条件查询一条数据"></a>4.根据条件查询一条数据</h4>
      <ul>
<li>利用<code>T selectOne(Wrapper&lt;T&gt; queryWrapper)</code>根据条件查询一条记录，返回封装的实体对象。不止一条结果会异常</li>
</ul>

        <h4 id="5-根据条件查询条数">
          <a href="#5-根据条件查询条数" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-根据条件查询条数" class="headerlink" title="5.根据条件查询条数"></a>5.根据条件查询条数</h4>
      <ul>
<li>利用<code>Integer selectCount(Wrapper&lt;T&gt; queryWrapper)</code>根据条件查询记录的数量</li>
</ul>

        <h4 id="5-根据条件批量查询">
          <a href="#5-根据条件批量查询" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-根据条件批量查询" class="headerlink" title="5.根据条件批量查询"></a>5.根据条件批量查询</h4>
      <ul>
<li>利用<code>List&lt;T&gt; selectList(Wrapper&lt;T&gt; queryWrapper)</code>根据条件查询记录的集合</li>
</ul>

        <h4 id="6-分页查询">
          <a href="#6-分页查询" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-分页查询" class="headerlink" title="6.分页查询"></a>6.分页查询</h4>
      <ul>
<li>利用<code>IPage&lt;T&gt; selectPage(IPage&lt;T&gt; page,Wrapper&lt;T&gt; queryWrapper)</code><ul>
<li>需要配置一个拦截器Bean：可以通过<code>@Configuration</code>所在的配置类产生<code>PaginationInterceptor</code>的Bean。（新版MyBatis-Plus推荐产生<code>MyBatisPlusInterceptor</code>的Bean并且添加一个<code>PaginationInnerInterceptor</code>作为InnerInterceptor）</li>
<li>调用查询方法，传入的参数为IPage接口的实现类对象以及条件查询包装器。如<code>list(page,wrapper)</code></li>
<li>返回一个IPage分页对象</li>
<li>通过IPage分页对象的方法可以得到总页码等数据，以及<code>getRecords()</code>方法得到查询的结果集合</li>
</ul>
</li>
</ul>

        <h2 id="MyBatis-Plus配置文件">
          <a href="#MyBatis-Plus配置文件" class="heading-link"><i class="fas fa-link"></i></a><a href="#MyBatis-Plus配置文件" class="headerlink" title="MyBatis-Plus配置文件"></a>MyBatis-Plus配置文件</h2>
      
        <h3 id="基本配置">
          <a href="#基本配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#基本配置" class="headerlink" title="基本配置"></a>基本配置</h3>
      
        <h4 id="configLocation：指定mybatis核心配置文件的位置">
          <a href="#configLocation：指定mybatis核心配置文件的位置" class="heading-link"><i class="fas fa-link"></i></a><a href="#configLocation：指定mybatis核心配置文件的位置" class="headerlink" title="configLocation：指定mybatis核心配置文件的位置"></a>configLocation：指定mybatis核心配置文件的位置</h4>
      <ul>
<li><p>SpringBoot：</p>
<figure class="highlight yaml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">config-location:</span> <span class="string">classpath:mybatis-config.xml</span> <span class="comment">#指定mybatis核心配置文件的位置</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>Spring：</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactoryBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis-config.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
</ul>

        <h4 id="mapperLocations：配置XML映射文件的位置">
          <a href="#mapperLocations：配置XML映射文件的位置" class="heading-link"><i class="fas fa-link"></i></a><a href="#mapperLocations：配置XML映射文件的位置" class="headerlink" title="mapperLocations：配置XML映射文件的位置"></a>mapperLocations：配置XML映射文件的位置</h4>
      <ul>
<li><p>SpringBoot：</p>
<figure class="highlight yaml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath*:mapper/*.xml</span> <span class="comment">#指定映射文件的位置，这里classpath*是加载所有文件</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>Spring：</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactoryBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mapper/*.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
</ul>

        <h4 id="type-aliases-package：配置别名扫描包">
          <a href="#type-aliases-package：配置别名扫描包" class="heading-link"><i class="fas fa-link"></i></a><a href="#type-aliases-package：配置别名扫描包" class="headerlink" title="type-aliases-package：配置别名扫描包"></a>type-aliases-package：配置别名扫描包</h4>
      <ul>
<li><p>SpringBoot：</p>
<figure class="highlight yaml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.taoyyz.mybatisplusspringboot.domain</span> <span class="comment">#设置别名扫描包，包下的类会被设置别名</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>Spring：</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactoryBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;typeAliasesPackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.taoyyz.mybatisplusspringboot.domain&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
</ul>

        <h4 id="table-prefix：配置表名前缀">
          <a href="#table-prefix：配置表名前缀" class="heading-link"><i class="fas fa-link"></i></a><a href="#table-prefix：配置表名前缀" class="headerlink" title="table-prefix：配置表名前缀"></a>table-prefix：配置表名前缀</h4>
      <ul>
<li><p>SpringBoot</p>
<figure class="highlight yaml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">table-prefix:</span> <span class="string">tb_</span> <span class="comment">#设置表前缀，例如实体类Book对应的表会被认为是tb_book</span></span><br></pre></td></tr></table></div></figure></li>
</ul>

        <h3 id="进阶配置">
          <a href="#进阶配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#进阶配置" class="headerlink" title="进阶配置"></a>进阶配置</h3>
      
        <h4 id="mapUnderscoreToCamelCase：驼峰映射">
          <a href="#mapUnderscoreToCamelCase：驼峰映射" class="heading-link"><i class="fas fa-link"></i></a><a href="#mapUnderscoreToCamelCase：驼峰映射" class="headerlink" title="mapUnderscoreToCamelCase：驼峰映射"></a>mapUnderscoreToCamelCase：驼峰映射</h4>
      <ul>
<li><p>类型：<code>boolean</code></p>
</li>
<li><p>MyBatis默认：<code>false</code></p>
</li>
<li><p>MyBatisPlus默认：<code>true</code></p>
</li>
<li><p>用法：配置SpringBoot核心配置文件：</p>
<figure class="highlight yaml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span> <span class="comment"># 驼峰映射</span></span><br></pre></td></tr></table></div></figure>

<p><strong>注意：</strong>在SpringBoot核心配置文件中不能指定configLocation，否则会冲突，建议配置MyBatis核心配置文件</p>
</li>
</ul>

        <h4 id="cacheEnabled：设置全局映射器的缓存">
          <a href="#cacheEnabled：设置全局映射器的缓存" class="heading-link"><i class="fas fa-link"></i></a><a href="#cacheEnabled：设置全局映射器的缓存" class="headerlink" title="cacheEnabled：设置全局映射器的缓存"></a>cacheEnabled：设置全局映射器的缓存</h4>
      <ul>
<li><p>类型：<code>boolean</code></p>
</li>
<li><p>默认值：<code>true</code></p>
</li>
<li><p>用法：配置SpringBoot核心配置文件：</p>
<figure class="highlight yaml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">cache-enabled:</span> <span class="literal">true</span> <span class="comment"># 配置全局缓存</span></span><br></pre></td></tr></table></div></figure></li>
</ul>

        <h1 id="SSM整合">
          <a href="#SSM整合" class="heading-link"><i class="fas fa-link"></i></a><a href="#SSM整合" class="headerlink" title="SSM整合"></a>SSM整合</h1>
      
        <h2 id="原始方式整合">
          <a href="#原始方式整合" class="heading-link"><i class="fas fa-link"></i></a><a href="#原始方式整合" class="headerlink" title="原始方式整合"></a>原始方式整合</h2>
      <ol>
<li>创建数据库和表</li>
</ol>
<p>
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210825133345997.png" alt="image-20210825133345997">
      
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210825133420192.png" alt="image-20210825133420192">
      </p>
<ol start="2">
<li>创建Maven工程</li>
<li>导入Maven依赖项的坐标在pom.xml中</li>
<li>编写数据库表的实体类domain</li>
<li>编写操作数据库的Dao/Mapper层接口</li>
<li>编写操作业务逻辑的Service层接口及实现</li>
<li>编写Controller层</li>
<li>编写前端页面</li>
<li>测试</li>
</ol>

        <h2 id="Spring整合MyBatis">
          <a href="#Spring整合MyBatis" class="heading-link"><i class="fas fa-link"></i></a><a href="#Spring整合MyBatis" class="headerlink" title="Spring整合MyBatis"></a>Spring整合MyBatis</h2>
      <ul>
<li><p>整合思路：</p>

        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210825153818996.png" alt="image-20210825153818996" style="zoom:67%;">
      </li>
<li><p>将SqlSessionFactory配置到Spring容器中作为Bean，配置Spring核心配置文件：</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--加载properties文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--配置数据源--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--配置SqlSessionFactory，需要引入mybatis-spring的1.3.1版本maven依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--设置数据源为bean的引用--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--加载MyBatis核心配置文件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis-config-spring.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--扫描mapper所在的包，相当于MyBatis为我们创建实现类--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.taoyyz.mapper&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure></li>
<li><p><font color="red"><strong>踩坑1：</strong>MyBatis操作找不到Dao/Mapper层接口中的方法</font></p>
<ul>
<li>例如：<code>com.taoyyz.dao.UserMapper.findAll</code>找不到</li>
<li>原因：<code>resources</code>目录下的Mapper.xml文件<strong>目录层级</strong>要和<code>java</code>下的Dao/Mapper<strong>接口层级相同</strong></li>
<li>解决方法：<ul>
<li>检查Mapper.xml的<code>namespace</code>命名空间属性是否跟Dao/Mapper接口全类名对应</li>
<li>检查Mapper.xml的标签<code>id</code>属性是否跟Dao/Mapper接口中的方法名对应</li>
<li>修改目录层级，使得<strong>他们被打包后可以被输出到同一目录</strong>
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210825164447435.png" alt="image-20210825164447435">
      </li>
</ul>
</li>
</ul>
</li>
<li><p><font color="red"><strong>踩坑2：</strong><code>java.lang.NoClassDefFoundError: org/springframework/jdbc/datasource/TransactionAwareDataSourceProxy</code></font></p>
<ul>
<li>原因：spring-jdbc的jar包依赖没有导入：
        <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="/images/image-20210825160947082.png" alt="image-20210825160947082" style="zoom:67%;">
      </li>
</ul>
</li>
<li><p><font color="red"><strong>踩坑3：</strong><code>Method com/mchange/v2/c3p0/impl/NewProxyResultSet.isClosed()Z is abstract</code></font></p>
<ul>
<li>原因：c3p0版本太老，需要换到0.9.2之后的版本</li>
<li>解决方法：把maven依赖的c3p0版本从<code>0.9.1.2</code>换到<code>0.9.5.2</code></li>
<li><strong>注意：</strong>可能会从仓库找不到0.9.5.2版本，需要自己去Maven仓库下载jar然后手动执行<code>mvn install</code>安装<ul>
<li>在利用<code>mvn install</code>手动安装jar包时需要保证当前目录下有pom.xml文件且文件内部不能有错误</li>
</ul>
</li>
</ul>
</li>
<li><p><font color="red"><strong>踩坑4：</strong><code>Failed to introspect Class [com.mchange.v2.c3p0.ComboPooledDataSource] from ClassLoader [ParallelWeb</code></font></p>
<ul>
<li>原因：换到c3p0的0.9.2以上版本，内部不再集成<code>mchange-commons-java</code>的jar包依赖</li>
<li>解决方法：手动引入Maven依赖：<code>mchange-commons-java</code>的<code>0.2.20</code>版本</li>
</ul>
</li>
<li><p>配置声明式事务控制</p>
<ul>
<li><p>引入<code>tx</code>和<code>aop</code>约束</p>
</li>
<li><pre><code class="xml">&lt;!--声明式事务控制--&gt;
&lt;!--平台事务管理器--&gt;
&lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt;
    &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt;
&lt;/bean&gt;
&lt;!--配置事务增强--&gt;
&lt;tx:advice id=&quot;txAdvice&quot;&gt;
    &lt;tx:attributes&gt;
        &lt;tx:method name=&quot;*&quot;/&gt;
    &lt;/tx:attributes&gt;
&lt;/tx:advice&gt;
&lt;!--配置事务AOP织入--&gt;
&lt;aop:config&gt;
    &lt;aop:advisor advice-ref=&quot;txAdvice&quot; pointcut=&quot;execution(* com.taoyyz.service.impl..*.*(..))&quot;/&gt;
&lt;/aop:config&gt;
</code></pre>
</li>
</ul>
</li>
</ul>
</div><footer class="post-footer"><div class="post-ending ending"><div class="ending__text">------ 本文结束，感谢您的阅读 ------</div></div><div class="post-tags"><span class="post-tags-item"><span class="post-tags-item__icon"><i class="fas fa-tag"></i></span><a class="post-tags-item__link" href="http://taoyyz.github.io/tags/Java/">Java</a></span><span class="post-tags-item"><span class="post-tags-item__icon"><i class="fas fa-tag"></i></span><a class="post-tags-item__link" href="http://taoyyz.github.io/tags/Mybatis/">Mybatis</a></span><span class="post-tags-item"><span class="post-tags-item__icon"><i class="fas fa-tag"></i></span><a class="post-tags-item__link" href="http://taoyyz.github.io/tags/Spring/">Spring</a></span></div><console class="log" 123></console><div class="post-reward reward"><div class="reward-button">看的开心的话可以请我喝杯奶茶~热狗也行呜呜呜</div><div class="reward-qrcode"><span class="reward-qrcode-alipay"><img class="reward-qrcode-alipay__img" src="/images/zfb.jpg"><div class="reward-qrcode-alipay__text">支付宝</div></span><span class="reward-qrcode-wechat"><img class="reward-qrcode-wechat__img" src="/images/vx.jpg"><div class="reward-qrcode-wechat__text">微信</div></span></div></div><nav class="post-paginator paginator"><div class="paginator-prev"><a class="paginator-prev__link" href="/2021/08/29/SpringBoot/"><span class="paginator-prev__icon"><i class="fas fa-angle-left"></i></span><span class="paginator-prev__text">SpringBoot基础</span></a></div><div class="paginator-next"><a class="paginator-next__link" href="/2021/08/16/%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="paginator-prev__text">数据库入门</span><span class="paginator-next__icon"><i class="fas fa-angle-right"></i></span></a></div></nav></footer></div></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><div class="sidebar-nav"><span class="sidebar-nav-toc current">文章目录</span><span class="sidebar-nav-ov">站点概览</span></div><section class="sidebar-toc"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Spring"><span class="toc-number">1.</span> <span class="toc-text">
          Spring</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring%E5%85%A5%E9%97%A8"><span class="toc-number">1.1.</span> <span class="toc-text">
          Spring入门</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Spring%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.1.</span> <span class="toc-text">
          Spring简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Spring%E5%8F%91%E5%B1%95%E5%8E%86%E7%A8%8B"><span class="toc-number">1.1.2.</span> <span class="toc-text">
          Spring发展历程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Spring%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="toc-number">1.1.3.</span> <span class="toc-text">
          Spring的优势</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Spring%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number">1.1.4.</span> <span class="toc-text">
          Spring的体系结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Spring%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-number">1.1.5.</span> <span class="toc-text">
          Spring快速入门</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Spring%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.1.5.1.</span> <span class="toc-text">
          Spring程序开发步骤</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.</span> <span class="toc-text">
          Spring配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Bean%E6%A0%87%E7%AD%BE%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE"><span class="toc-number">1.2.1.</span> <span class="toc-text">
          Bean标签基本配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Bean%E6%A0%87%E7%AD%BE%E8%8C%83%E5%9B%B4%E9%85%8D%E7%BD%AE"><span class="toc-number">1.2.2.</span> <span class="toc-text">
          Bean标签范围配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Bean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%85%8D%E7%BD%AE"><span class="toc-number">1.2.3.</span> <span class="toc-text">
          Bean的生命周期配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Bean%E5%AE%9E%E4%BE%8B%E5%8C%96%E7%9A%84%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">1.2.4.</span> <span class="toc-text">
          Bean实例化的三种方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Bean%E7%9A%84%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5DI"><span class="toc-number">1.2.5.</span> <span class="toc-text">
          Bean的依赖注入DI</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5"><span class="toc-number">1.2.5.1.</span> <span class="toc-text">
          概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E7%9A%84%E6%96%B9%E5%BC%8F%EF%BC%9A"><span class="toc-number">1.2.5.2.</span> <span class="toc-text">
          注入的方式：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.2.5.3.</span> <span class="toc-text">
          注入的数据类型</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E5%BC%95%E5%85%A5"><span class="toc-number">1.2.6.</span> <span class="toc-text">
          配置文件的引入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Spring%E9%85%8D%E7%BD%AE%E7%9A%84%E9%87%8D%E7%82%B9%E5%9B%9E%E9%A1%BE"><span class="toc-number">1.2.7.</span> <span class="toc-text">
          Spring配置的重点回顾</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring%E7%9B%B8%E5%85%B3API"><span class="toc-number">1.3.</span> <span class="toc-text">
          Spring相关API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ApplicationContext%E7%9A%84%E5%AE%9E%E7%8E%B0%E7%B1%BB%EF%BC%9A"><span class="toc-number">1.3.1.</span> <span class="toc-text">
          ApplicationContext的实现类：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#getBean-%E6%96%B9%E6%B3%95"><span class="toc-number">1.3.2.</span> <span class="toc-text">
          getBean()方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E6%BA%90"><span class="toc-number">1.4.</span> <span class="toc-text">
          Spring配置数据源</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%BA%90%EF%BC%88%E8%BF%9E%E6%8E%A5%E6%B1%A0%EF%BC%89%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">1.4.1.</span> <span class="toc-text">
          数据源（连接池）的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%BA%90%E7%9A%84%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.4.2.</span> <span class="toc-text">
          数据源的使用步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%BA%90%E7%9A%84%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA"><span class="toc-number">1.4.3.</span> <span class="toc-text">
          数据源的手动创建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Spring%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E6%BA%90%E7%9A%84Bean"><span class="toc-number">1.4.4.</span> <span class="toc-text">
          Spring配置数据源的Bean</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Spring%E5%8A%A0%E8%BD%BDproperties%E6%96%87%E4%BB%B6"><span class="toc-number">1.4.5.</span> <span class="toc-text">
          Spring加载properties文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91"><span class="toc-number">1.5.</span> <span class="toc-text">
          Spring注解开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Spring%E5%8E%9F%E5%A7%8B%E6%B3%A8%E8%A7%A3"><span class="toc-number">1.5.1.</span> <span class="toc-text">
          Spring原始注解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Spring%E6%96%B0%E6%B3%A8%E8%A7%A3"><span class="toc-number">1.5.2.</span> <span class="toc-text">
          Spring新注解</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring%E9%9B%86%E6%88%90Junit"><span class="toc-number">1.6.</span> <span class="toc-text">
          Spring集成Junit</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring%E9%9B%86%E6%88%90WEB%E7%8E%AF%E5%A2%83"><span class="toc-number">1.7.</span> <span class="toc-text">
          Spring集成WEB环境</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ApplicationContext%E5%BA%94%E7%94%A8%E4%B8%8A%E4%B8%8B%E6%96%87%E8%8E%B7%E5%8F%96%E6%96%B9%E5%BC%8F"><span class="toc-number">1.7.1.</span> <span class="toc-text">
          ApplicationContext应用上下文获取方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Spring%E6%8F%90%E4%BE%9B%E8%8E%B7%E5%8F%96%E5%BA%94%E7%94%A8%E4%B8%8A%E4%B8%8B%E6%96%87%E7%9A%84%E5%B7%A5%E5%85%B7"><span class="toc-number">1.7.2.</span> <span class="toc-text">
          Spring提供获取应用上下文的工具</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SpringMVC"><span class="toc-number">2.</span> <span class="toc-text">
          SpringMVC</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringMVC%E6%A6%82%E8%BF%B0"><span class="toc-number">2.1.</span> <span class="toc-text">
          SpringMVC概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringMVC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-number">2.2.</span> <span class="toc-text">
          SpringMVC快速入门</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringMVC%E7%BB%84%E4%BB%B6%E8%A7%A3%E6%9E%90"><span class="toc-number">2.3.</span> <span class="toc-text">
          SpringMVC组件解析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringMVC%E7%9A%84%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="toc-number">2.3.1.</span> <span class="toc-text">
          SpringMVC的执行流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringMVC%E6%B3%A8%E8%A7%A3%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90"><span class="toc-number">2.3.2.</span> <span class="toc-text">
          SpringMVC注解配置解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringMVC%E7%9A%84XML%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90"><span class="toc-number">2.3.3.</span> <span class="toc-text">
          SpringMVC的XML配置解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E8%A6%81%E7%82%B9%EF%BC%9A"><span class="toc-number">2.3.4.</span> <span class="toc-text">
          知识要点：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringMVC%E6%95%B0%E6%8D%AE%E5%93%8D%E5%BA%94%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-number">2.4.</span> <span class="toc-text">
          SpringMVC数据响应的方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E8%B7%B3%E8%BD%AC"><span class="toc-number">2.4.1.</span> <span class="toc-text">
          页面跳转</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9E%E5%86%99%E6%95%B0%E6%8D%AE"><span class="toc-number">2.4.2.</span> <span class="toc-text">
          回写数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringMVC%E8%8E%B7%E5%BE%97%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE"><span class="toc-number">2.5.</span> <span class="toc-text">
          SpringMVC获得请求数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%BE%97%E8%AF%B7%E6%B1%82%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-number">2.5.1.</span> <span class="toc-text">
          获得请求的参数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0"><span class="toc-number">2.5.1.1.</span> <span class="toc-text">
          1.基本类型参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-POJO%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0"><span class="toc-number">2.5.1.2.</span> <span class="toc-text">
          2.POJO类型参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%95%B0%E7%BB%84%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0"><span class="toc-number">2.5.1.3.</span> <span class="toc-text">
          3.数组类型参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0"><span class="toc-number">2.5.1.4.</span> <span class="toc-text">
          4.集合类型参数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F1%EF%BC%9A%E4%BD%BF%E7%94%A8VO%E5%AF%B9%E8%B1%A1%E5%8C%85%E8%A3%85%E9%9B%86%E5%90%88"><span class="toc-number">2.5.1.4.1.</span> <span class="toc-text">
          方式1：使用VO对象包装集合</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F2%EF%BC%9A%E4%BD%BF%E7%94%A8JSON%E6%A0%BC%E5%BC%8F%E5%88%A9%E7%94%A8-RequestBody%E6%B3%A8%E8%A7%A3%E7%9B%B4%E6%8E%A5%E7%94%A8%E9%9B%86%E5%90%88%E6%8E%A5%E6%94%B6"><span class="toc-number">2.5.1.4.2.</span> <span class="toc-text">
          方式2：使用JSON格式利用@RequestBody注解直接用集合接收</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98"><span class="toc-number">2.5.2.</span> <span class="toc-text">
          请求数据乱码问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E8%A7%A3%E8%BF%9B%E8%A1%8C%E5%8F%82%E6%95%B0%E7%BB%91%E5%AE%9A"><span class="toc-number">2.5.3.</span> <span class="toc-text">
          注解进行参数绑定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Restful%E9%A3%8E%E6%A0%BC%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-number">2.5.4.</span> <span class="toc-text">
          Restful风格的参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%BE%97Servlet%E7%9B%B8%E5%85%B3API"><span class="toc-number">2.5.5.</span> <span class="toc-text">
          获得Servlet相关API</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%A4%B4"><span class="toc-number">2.5.6.</span> <span class="toc-text">
          获取请求头</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E5%99%A8"><span class="toc-number">2.6.</span> <span class="toc-text">
          自定义类型转换器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">2.7.</span> <span class="toc-text">
          案例：文件上传</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring-JdbcTemplate"><span class="toc-number">2.8.</span> <span class="toc-text">
          Spring JdbcTemplate</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">2.8.1.</span> <span class="toc-text">
          概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JdbcTemplate%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4"><span class="toc-number">2.8.2.</span> <span class="toc-text">
          JdbcTemplate开发步骤</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F"><span class="toc-number">2.9.</span> <span class="toc-text">
          案例：用户管理系统</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%92%E8%89%B2%E5%88%97%E8%A1%A8%E7%9A%84%E5%B1%95%E7%A4%BA"><span class="toc-number">2.9.1.</span> <span class="toc-text">
          角色列表的展示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%92%E8%89%B2%E6%B7%BB%E5%8A%A0"><span class="toc-number">2.9.2.</span> <span class="toc-text">
          角色添加</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E5%88%97%E8%A1%A8%E7%9A%84%E5%B1%95%E7%A4%BA"><span class="toc-number">2.9.3.</span> <span class="toc-text">
          用户列表的展示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E6%B7%BB%E5%8A%A0"><span class="toc-number">2.9.4.</span> <span class="toc-text">
          用户添加</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E5%88%A0%E9%99%A4"><span class="toc-number">2.9.5.</span> <span class="toc-text">
          用户删除</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringMVC%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-number">2.10.</span> <span class="toc-text">
          SpringMVC拦截器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%A6%E6%88%AA%E5%99%A8%EF%BC%88interceptor%EF%BC%89%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">2.10.1.</span> <span class="toc-text">
          拦截器（interceptor）的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%A6%E6%88%AA%E5%99%A8%E5%92%8C%E8%BF%87%E6%BB%A4%E5%99%A8%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.10.2.</span> <span class="toc-text">
          拦截器和过滤器的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%A6%E6%88%AA%E5%99%A8%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-number">2.10.3.</span> <span class="toc-text">
          拦截器快速入门</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6"><span class="toc-number">2.11.</span> <span class="toc-text">
          案例：用户登录权限控制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringMVC%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E6%9C%BA%E5%88%B6"><span class="toc-number">2.12.</span> <span class="toc-text">
          SpringMVC异常处理机制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringMVC%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E6%80%9D%E8%B7%AF"><span class="toc-number">2.12.1.</span> <span class="toc-text">
          SpringMVC异常处理思路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringMVC%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">2.12.2.</span> <span class="toc-text">
          SpringMVC异常处理的两种方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%99%A8"><span class="toc-number">2.12.2.1.</span> <span class="toc-text">
          简单异常处理器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-number">2.12.2.2.</span> <span class="toc-text">
          自定义异常处理</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Spring%E7%9A%84AOP"><span class="toc-number">3.</span> <span class="toc-text">
          Spring的AOP</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring%E7%9A%84AOP%E7%AE%80%E4%BB%8B"><span class="toc-number">3.1.</span> <span class="toc-text">
          Spring的AOP简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AOP%E7%9A%84%E4%BD%9C%E7%94%A8%E5%8F%8A%E4%BC%98%E5%8A%BF"><span class="toc-number">3.2.</span> <span class="toc-text">
          AOP的作用及优势</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AOP%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0"><span class="toc-number">3.3.</span> <span class="toc-text">
          AOP的底层实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AOP%E7%9A%84%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E6%8A%80%E6%9C%AF"><span class="toc-number">3.4.</span> <span class="toc-text">
          AOP的动态代理技术</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AOP%E7%9A%84%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5"><span class="toc-number">3.5.</span> <span class="toc-text">
          AOP的相关概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AOP%E5%BC%80%E5%8F%91%E6%98%8E%E7%A1%AE%E7%9A%84%E4%BA%8B%E9%A1%B9"><span class="toc-number">3.6.</span> <span class="toc-text">
          AOP开发明确的事项</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AOP%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-number">3.7.</span> <span class="toc-text">
          AOP快速入门</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8EXML%E7%9A%84AOP%E5%BC%80%E5%8F%91"><span class="toc-number">3.7.1.</span> <span class="toc-text">
          基于XML的AOP开发</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A4%EF%BC%9A"><span class="toc-number">3.7.1.0.1.</span> <span class="toc-text">
          步骤：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%87%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">3.7.1.1.</span> <span class="toc-text">
          切点表达式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E7%9F%A5%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.7.1.2.</span> <span class="toc-text">
          通知的类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%87%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E6%8A%BD%E5%8F%96"><span class="toc-number">3.7.1.3.</span> <span class="toc-text">
          切点表达式的抽取</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E7%9A%84AOP%E5%BC%80%E5%8F%91"><span class="toc-number">3.7.2.</span> <span class="toc-text">
          基于注解的AOP开发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A4%EF%BC%9A-1"><span class="toc-number">3.7.2.1.</span> <span class="toc-text">
          步骤：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E7%9F%A5%E7%9A%84%E7%B1%BB%E5%9E%8B-1"><span class="toc-number">3.7.2.2.</span> <span class="toc-text">
          通知的类型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%87%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E6%8A%BD%E5%8F%96-1"><span class="toc-number">3.7.2.2.1.</span> <span class="toc-text">
          切点表达式的抽取</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Spring%E7%9A%84%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6"><span class="toc-number">4.</span> <span class="toc-text">
          Spring的事务控制</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E7%A8%8B%E5%BC%8F%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%E7%9B%B8%E5%85%B3%E5%AF%B9%E8%B1%A1"><span class="toc-number">4.1.</span> <span class="toc-text">
          编程式事务控制相关对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#PlatformTransactionManager"><span class="toc-number">4.1.1.</span> <span class="toc-text">
          PlatformTransactionManager</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TransactionDefinition"><span class="toc-number">4.1.2.</span> <span class="toc-text">
          TransactionDefinition</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TransactionStatus"><span class="toc-number">4.1.3.</span> <span class="toc-text">
          TransactionStatus</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8EXML%E7%9A%84%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6"><span class="toc-number">4.2.</span> <span class="toc-text">
          基于XML的声明式事务控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5%EF%BC%9A"><span class="toc-number">4.2.1.</span> <span class="toc-text">
          概念：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8%EF%BC%9A"><span class="toc-number">4.2.2.</span> <span class="toc-text">
          作用：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-number">4.2.3.</span> <span class="toc-text">
          声明式事务控制的实现</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E7%9A%84%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6"><span class="toc-number">4.3.</span> <span class="toc-text">
          基于注解的声明式事务控制</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MyBatis"><span class="toc-number">5.</span> <span class="toc-text">
          MyBatis</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5-1"><span class="toc-number">5.1.</span> <span class="toc-text">
          概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MyBatis%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-number">5.2.</span> <span class="toc-text">
          MyBatis快速入门</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MyBatis%E7%9A%84CRUD"><span class="toc-number">5.3.</span> <span class="toc-text">
          MyBatis的CRUD</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">5.3.1.</span> <span class="toc-text">
          插入数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE"><span class="toc-number">5.3.2.</span> <span class="toc-text">
          修改数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-number">5.3.3.</span> <span class="toc-text">
          删除数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MyBatis%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">5.4.</span> <span class="toc-text">
          MyBatis核心配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#environments%E6%A0%87%E7%AD%BE"><span class="toc-number">5.4.1.</span> <span class="toc-text">
          environments标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mapper%E6%A0%87%E7%AD%BE"><span class="toc-number">5.4.2.</span> <span class="toc-text">
          mapper标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#properties%E6%A0%87%E7%AD%BE"><span class="toc-number">5.4.3.</span> <span class="toc-text">
          properties标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#typeAliases%E6%A0%87%E7%AD%BE"><span class="toc-number">5.4.4.</span> <span class="toc-text">
          typeAliases标签</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MyBatis%E7%9B%B8%E5%85%B3API"><span class="toc-number">5.5.</span> <span class="toc-text">
          MyBatis相关API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SqlSessionFactoryBuilder"><span class="toc-number">5.5.1.</span> <span class="toc-text">
          SqlSessionFactoryBuilder</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SqlSessionFactory"><span class="toc-number">5.5.2.</span> <span class="toc-text">
          SqlSessionFactory</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SqlSession"><span class="toc-number">5.5.3.</span> <span class="toc-text">
          SqlSession</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MyBatis%E7%9A%84Dao%E5%B1%82%E5%AE%9E%E7%8E%B0"><span class="toc-number">5.6.</span> <span class="toc-text">
          MyBatis的Dao层实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%A0%E7%BB%9F%E6%96%B9%E5%BC%8F"><span class="toc-number">5.6.1.</span> <span class="toc-text">
          传统方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%90%86%E5%BC%80%E5%8F%91%E6%96%B9%E5%BC%8F"><span class="toc-number">5.6.2.</span> <span class="toc-text">
          代理开发方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MyBatis%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6%E9%AB%98%E7%BA%A7"><span class="toc-number">5.7.</span> <span class="toc-text">
          MyBatis映射文件高级</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81SQL"><span class="toc-number">5.7.1.</span> <span class="toc-text">
          动态SQL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%BD%E5%8F%96"><span class="toc-number">5.7.2.</span> <span class="toc-text">
          抽取</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MyBatis%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%AB%98%E7%BA%A7"><span class="toc-number">5.8.</span> <span class="toc-text">
          MyBatis核心配置文件高级</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#typeHandlers%E6%A0%87%E7%AD%BE"><span class="toc-number">5.8.1.</span> <span class="toc-text">
          typeHandlers标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#plugins%E6%A0%87%E7%AD%BE"><span class="toc-number">5.8.2.</span> <span class="toc-text">
          plugins标签</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MyBatis%E5%A4%9A%E8%A1%A8%E6%93%8D%E4%BD%9C"><span class="toc-number">5.9.</span> <span class="toc-text">
          MyBatis多表操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E5%AF%B9%E4%B8%80"><span class="toc-number">5.9.1.</span> <span class="toc-text">
          一对一</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E5%AF%B9%E5%A4%9A"><span class="toc-number">5.9.2.</span> <span class="toc-text">
          一对多</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E5%AF%B9%E5%A4%9A"><span class="toc-number">5.9.3.</span> <span class="toc-text">
          多对多</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MyBatis%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91"><span class="toc-number">5.10.</span> <span class="toc-text">
          MyBatis注解开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MyBatis%E6%B3%A8%E8%A7%A3%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E7%9A%84CRUD"><span class="toc-number">5.10.1.</span> <span class="toc-text">
          MyBatis注解实现简单的CRUD</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MyBatis%E6%B3%A8%E8%A7%A3%E5%AE%9E%E7%8E%B0%E5%A4%9A%E8%A1%A8%E5%A4%8D%E6%9D%82%E6%98%A0%E5%B0%84"><span class="toc-number">5.10.2.</span> <span class="toc-text">
          MyBatis注解实现多表复杂映射</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E5%AF%B9%E4%B8%80-1"><span class="toc-number">5.10.2.1.</span> <span class="toc-text">
          一对一</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E5%AF%B9%E5%A4%9A-1"><span class="toc-number">5.10.2.2.</span> <span class="toc-text">
          多对多</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MyBatis-Plus"><span class="toc-number">6.</span> <span class="toc-text">
          MyBatis-Plus</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-1"><span class="toc-number">6.1.</span> <span class="toc-text">
          概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">6.1.1.</span> <span class="toc-text">
          简介</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%B9%E6%80%A7"><span class="toc-number">6.2.</span> <span class="toc-text">
          特性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%86%E6%9E%B6%E7%BB%93%E6%9E%84"><span class="toc-number">6.3.</span> <span class="toc-text">
          框架结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B%E5%8F%8A3%E7%A7%8D%E7%94%A8%E6%B3%95"><span class="toc-number">6.4.</span> <span class="toc-text">
          快速开始及3种用法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%B3%951%EF%BC%9AMyBatis-MP"><span class="toc-number">6.4.1.</span> <span class="toc-text">
          用法1：MyBatis + MP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%B3%952%EF%BC%9ASpring-MyBatis-MP"><span class="toc-number">6.4.2.</span> <span class="toc-text">
          用法2：Spring + MyBatis + MP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%B3%953%EF%BC%9ASpringBoot-MyBatis-MP"><span class="toc-number">6.4.3.</span> <span class="toc-text">
          用法3：SpringBoot + MyBatis + MP</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9A%E7%94%A8CRUD"><span class="toc-number">6.5.</span> <span class="toc-text">
          通用CRUD</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E5%85%A5"><span class="toc-number">6.5.1.</span> <span class="toc-text">
          插入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0"><span class="toc-number">6.5.2.</span> <span class="toc-text">
          更新</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%A0%B9%E6%8D%AEid%E6%9B%B4%E6%96%B0"><span class="toc-number">6.5.2.1.</span> <span class="toc-text">
          1.根据id更新</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%A0%B9%E6%8D%AE%E6%9D%A1%E4%BB%B6%E6%9B%B4%E6%96%B0"><span class="toc-number">6.5.2.2.</span> <span class="toc-text">
          2.根据条件更新</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4"><span class="toc-number">6.5.3.</span> <span class="toc-text">
          删除</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%A0%B9%E6%8D%AEid%E5%88%A0%E9%99%A4"><span class="toc-number">6.5.3.1.</span> <span class="toc-text">
          1.根据id删除</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%A0%B9%E6%8D%AEid%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4"><span class="toc-number">6.5.3.2.</span> <span class="toc-text">
          2.根据id批量删除</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%A0%B9%E6%8D%AE%E5%AD%97%E6%AE%B5%E9%94%AE%E5%80%BC%E7%9A%84Map%E5%88%A0%E9%99%A4"><span class="toc-number">6.5.3.3.</span> <span class="toc-text">
          3.根据字段键值的Map删除</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E6%A0%B9%E6%8D%AE%E6%9D%A1%E4%BB%B6%E5%88%A0%E9%99%A4"><span class="toc-number">6.5.3.4.</span> <span class="toc-text">
          4.根据条件删除</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2"><span class="toc-number">6.5.4.</span> <span class="toc-text">
          查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%A0%B9%E6%8D%AEid%E6%9F%A5%E8%AF%A2"><span class="toc-number">6.5.4.1.</span> <span class="toc-text">
          1.根据id查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%A0%B9%E6%8D%AEid%E6%89%B9%E9%87%8F%E6%9F%A5%E8%AF%A2"><span class="toc-number">6.5.4.2.</span> <span class="toc-text">
          2.根据id批量查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%A0%B9%E6%8D%AE%E5%AD%97%E6%AE%B5%E5%80%BC%E7%9A%84Map%E6%9F%A5%E8%AF%A2"><span class="toc-number">6.5.4.3.</span> <span class="toc-text">
          3.根据字段值的Map查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E6%A0%B9%E6%8D%AE%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2%E4%B8%80%E6%9D%A1%E6%95%B0%E6%8D%AE"><span class="toc-number">6.5.4.4.</span> <span class="toc-text">
          4.根据条件查询一条数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E6%A0%B9%E6%8D%AE%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2%E6%9D%A1%E6%95%B0"><span class="toc-number">6.5.4.5.</span> <span class="toc-text">
          5.根据条件查询条数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E6%A0%B9%E6%8D%AE%E6%9D%A1%E4%BB%B6%E6%89%B9%E9%87%8F%E6%9F%A5%E8%AF%A2"><span class="toc-number">6.5.4.6.</span> <span class="toc-text">
          5.根据条件批量查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-number">6.5.4.7.</span> <span class="toc-text">
          6.分页查询</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MyBatis-Plus%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">6.6.</span> <span class="toc-text">
          MyBatis-Plus配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE"><span class="toc-number">6.6.1.</span> <span class="toc-text">
          基本配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#configLocation%EF%BC%9A%E6%8C%87%E5%AE%9Amybatis%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E4%BD%8D%E7%BD%AE"><span class="toc-number">6.6.1.1.</span> <span class="toc-text">
          configLocation：指定mybatis核心配置文件的位置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#mapperLocations%EF%BC%9A%E9%85%8D%E7%BD%AEXML%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6%E7%9A%84%E4%BD%8D%E7%BD%AE"><span class="toc-number">6.6.1.2.</span> <span class="toc-text">
          mapperLocations：配置XML映射文件的位置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#type-aliases-package%EF%BC%9A%E9%85%8D%E7%BD%AE%E5%88%AB%E5%90%8D%E6%89%AB%E6%8F%8F%E5%8C%85"><span class="toc-number">6.6.1.3.</span> <span class="toc-text">
          type-aliases-package：配置别名扫描包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#table-prefix%EF%BC%9A%E9%85%8D%E7%BD%AE%E8%A1%A8%E5%90%8D%E5%89%8D%E7%BC%80"><span class="toc-number">6.6.1.4.</span> <span class="toc-text">
          table-prefix：配置表名前缀</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E9%98%B6%E9%85%8D%E7%BD%AE"><span class="toc-number">6.6.2.</span> <span class="toc-text">
          进阶配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#mapUnderscoreToCamelCase%EF%BC%9A%E9%A9%BC%E5%B3%B0%E6%98%A0%E5%B0%84"><span class="toc-number">6.6.2.1.</span> <span class="toc-text">
          mapUnderscoreToCamelCase：驼峰映射</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cacheEnabled%EF%BC%9A%E8%AE%BE%E7%BD%AE%E5%85%A8%E5%B1%80%E6%98%A0%E5%B0%84%E5%99%A8%E7%9A%84%E7%BC%93%E5%AD%98"><span class="toc-number">6.6.2.2.</span> <span class="toc-text">
          cacheEnabled：设置全局映射器的缓存</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SSM%E6%95%B4%E5%90%88"><span class="toc-number">7.</span> <span class="toc-text">
          SSM整合</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%9F%E5%A7%8B%E6%96%B9%E5%BC%8F%E6%95%B4%E5%90%88"><span class="toc-number">7.1.</span> <span class="toc-text">
          原始方式整合</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring%E6%95%B4%E5%90%88MyBatis"><span class="toc-number">7.2.</span> <span class="toc-text">
          Spring整合MyBatis</span></a></li></ol></li></ol></section><!-- ov = overview--><section class="sidebar-ov hide"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/images/icons/head.jpg" alt="avatar"></div><p class="sidebar-ov-author__text">taoyyz</p></div><div class="sidebar-ov-social"><a class="sidebar-ov-social-item" href="https://weibo.com/6368186555/" target="_blank" rel="noopener" data-popover="微博：taoyyz" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-weibo"></i></span></a><a class="sidebar-ov-social-item" href="https://www.zhihu.com/people/taoyyz" target="_blank" rel="noopener" data-popover="知乎：taoyyz" data-popover-pos="up"><span class="sidebar-ov-social-item__icon">知</span></a><a class="sidebar-ov-social-item" href="https://space.bilibili.com/10111280" target="_blank" rel="noopener" data-popover="哔哩哔哩：宝贝球球ouo" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fas fa-tv"></i></span></a><a class="sidebar-ov-social-item" href="angelahape" target="_blank" rel="noopener" data-popover="微信：angelahape" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-weixin"></i></span></a><a class="sidebar-ov-social-item" href="tencent://message?uin=2655026691" target="_blank" rel="noopener" data-popover="QQ：2655026691" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-qq"></i></span></a><a class="sidebar-ov-social-item" href="https://www.youtube.com/channel/UCsz2-9ReY8ayMd-92rEGKFQ" target="_blank" rel="noopener" data-popover="Youtube：Xiaotao" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-youtube"></i></span></a></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">18</div><div class="sidebar-ov-state-item__name">归档</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--categories" href="/categories/"><div class="sidebar-ov-state-item__count">7</div><div class="sidebar-ov-state-item__name">分类</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--tags" href="/tags/"><div class="sidebar-ov-state-item__count">13</div><div class="sidebar-ov-state-item__name">标签</div></a></div><div></div><div id="tishi" style="text-align:center;user-select:none;font-weight:600;">本站已运行</div><span id="sitetime" style="text-align:center;display:block;user-select:none;">载入天数...<script language="javascript">const siteTime = () => {
  window.setTimeout(siteTime, 500);
  const startTime = Date.UTC(2021, 3, 10, 23, 0, 0); // 北京时间
  const currentTime = Date.now();
  const timeDifference = currentTime - startTime;

  const seconds = Math.floor((timeDifference / 1000) % 60);
  const minutes = Math.floor((timeDifference / 1000 / 60) % 60);
  const hours = Math.floor((timeDifference / (1000 * 60 * 60)) % 24);
  const days = Math.floor(timeDifference / (1000 * 60 * 60 * 24));
  const years = Math.floor(days / 365);
  const remainingDays = days % 365;

  let timeString = '';

  if (years > 0) {
    timeString += `${years}年`;
  }

  timeString += `${remainingDays}天${hours}时${minutes}分${seconds}秒`;

  document.getElementById("sitetime").innerHTML = timeString;
};

siteTime();
</script></span></section><div class="sidebar-reading"><div class="sidebar-reading-info"><span class="sidebar-reading-info__text">你已阅读了 </span><span class="sidebar-reading-info__num">0</span><span class="sidebar-reading-info__perc">%</span></div><div class="sidebar-reading-line"></div></div></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2023</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>taoyyz小陶</span></div><div></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><div class="search-mask"></div><div class="search-popup"><span class="search-close"></span><div class="search-input"><input placeholder="搜索文章（支持多关键词，请用空格分隔）"></div><div class="search-results"></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lazyload@2.0.0-rc.2/lazyload.min.js"></script><script>function initSearch() {
  var isXML = true;
  var search_path = 'search.json';

  if (!search_path) {
    search_path = 'search.xml';
  } else if (/json$/i.test(search_path)) {
    isXML = false;
  }

  var path = '/' + search_path;
  $.ajax({
    url: path,
    dataType: isXML ? 'xml' : 'json',
    async: true,
    success: function (res) {
      var datas = isXML ? $('entry', res).map(function () {
        // 将 XML 转为 JSON
        return {
          title: $('title', this).text(),
          content: $('content', this).text(),
          url: $('url', this).text()
        };
      }).get() : res;
      var $input = $('.search-input input');
      var $result = $('.search-results');
      // 搜索对象（标题、内容）的权重，影响显示顺序
      var WEIGHT = { title: 100, content: 1 };
      var searchPost = function () {
        var searchText = $input.val().toLowerCase().trim();
        // 根据空白字符分隔关键字
        var keywords = searchText.split(/[\s]+/);
        // 搜索结果
        var matchPosts = [];

        // 有多个关键字时，将原文字整个保存下来
        if (keywords.length > 1) {
          keywords.push(searchText);
        }
        // 防止未输入字符时搜索
        if (searchText.length > 0) {
          datas.forEach(function (data) {
            var isMatch  = false;
            // 没有标题的文章使用预设的 i18n 变量代替
            var title = (data.title && data.title.trim()) || '[ 文章无标题 ]';
            var titleLower = title && title.toLowerCase();
            // 删除 HTML 标签 和 所有空白字符
            var content = data.content && data.content.replace(/<[^>]+>/g, '');
            var contentLower = content && content.toLowerCase();
            // 删除重复的 /
            var postURL = data.url && decodeURI(data.url).replace(/\/{2,}/g, '/');
            // 标题中匹配到的关键词
            var titleHitSlice = [];
            // 内容中匹配到的关键词
            var contentHitSlice = [];

            keywords.forEach(function (keyword) {
              /**
              * 获取匹配的关键词的索引
              * @param {String} keyword 要匹配的关键字
              * @param {String} text 原文字
              * @param {Boolean} caseSensitive 是否区分大小写
              * @param {Number} weight 匹配对象的权重。权重大的优先显示
              * @return {Array}
              */
              function getIndexByword (word, text, caseSensitive, weight) {
                if (!word || !text) {
                  return [];
                };

                var startIndex = 0; // 每次匹配的开始索引
                var index = -1;     // 匹配到的索引值
                var result = [];    // 匹配结果

                if (!caseSensitive) {
                  word = word.toLowerCase();
                  text = text.toLowerCase();
                }

                while((index = text.indexOf(word, startIndex)) !== -1) {
                  var hasMatch = false;
                  // 索引位置相同的关键词，保留长度较长的
                  titleHitSlice.forEach(function (hit) {
                    if (hit.index === index && hit.word.length < word.length) {
                      hit.word = word;
                      hasMatch = true;
                    }
                  });
                  startIndex = index + word.length;
                  !hasMatch && result.push({ index: index, word: word, weight: weight });
                }
                return result;
              }
              titleHitSlice = titleHitSlice.concat(getIndexByword(keyword, titleLower, false, WEIGHT.title));
              contentHitSlice = contentHitSlice.concat(getIndexByword(keyword, contentLower, false, WEIGHT.content));
            });

            var hitTitle = titleHitSlice.length;
            var hitContent = contentHitSlice.length;

            if (hitTitle > 0 || hitContent > 0) {
              isMatch = true;
            }
            if (isMatch) {
              ;[titleHitSlice, contentHitSlice].forEach(function (hit) {
                // 按照匹配文字的索引的递增顺序排序
                hit.sort(function (left, right) {
                  return left.index - right.index;
                });
              });
              /**
              * 给文本中匹配到的关键词添加标记，从而进行高亮显示
              * @param {String} text 原文本
              * @param {Array} hitSlice 匹配项的索引信息
              * @param {Number} start 开始索引
              * @param {Number} end 结束索引
              * @return {String}
              */
              function highlightKeyword (text, hitSlice, start, end) {
                if (!text || !hitSlice || !hitSlice.length) {
                  return;
                }

                var result = '';
                var startIndex = start;
                var endIndex = end;
                hitSlice.forEach(function (hit) {
                  if (hit.index < startIndex) {
                    return;
                  }

                  var hitWordEnd = hit.index + hit.word.length;
                  result += text.slice(startIndex, hit.index);
                  result += '<b>' + text.slice(hit.index, hitWordEnd) + '</b>';
                  startIndex = hitWordEnd;
                });
                result += text.slice(startIndex, endIndex);
                return result;
              }

              var postData = {};
              // 文章总的搜索权重
              var postWeight = titleHitSlice.length * WEIGHT.title + contentHitSlice.length * WEIGHT.content;
              // 标记匹配关键词后的标题
              var postTitle = highlightKeyword(title, titleHitSlice, 0, title.length) || title;
              // 标记匹配关键词后的内容
              var postContent;
              // 显示内容的长度
              var SHOW_WORD_LENGTH = 200;
              // 命中关键词前的字符显示长度
              var SHOW_WORD_FRONT_LENGTH = 20;
              var SHOW_WORD_END_LENGTH = SHOW_WORD_LENGTH - SHOW_WORD_FRONT_LENGTH;

              // 截取匹配的第一个字符，前后共 200 个字符来显示
              if (contentHitSlice.length > 0) {
                var firstIndex = contentHitSlice[0].index;
                var start = firstIndex > SHOW_WORD_FRONT_LENGTH ? firstIndex - SHOW_WORD_FRONT_LENGTH : 0;
                var end = firstIndex + SHOW_WORD_END_LENGTH;
                postContent = highlightKeyword(content, contentHitSlice, start, end);
              } else { // 未匹配到内容，直接截取前 200 个字符来显示
                postContent = content.slice(0, SHOW_WORD_LENGTH);
              }
              postData.title = postTitle;
              postData.content = postContent;
              postData.url = postURL;
              postData.weight = postWeight;
              matchPosts.push(postData);
            }
          });
        }

        var resultInnerHtml = '';
        if (matchPosts.length) {
          // 按权重递增的顺序排序，使权重大的优先显示
          matchPosts.sort(function (left, right) {
            return right.weight - left.weight;
          });
          resultInnerHtml += '<ul>';
          matchPosts.forEach(function (post) {
            resultInnerHtml += '<li><a class="search-results-title" href="' + post.url + '">';
            resultInnerHtml += post.title;
            resultInnerHtml += '</a><div class="search-results-content">';
            resultInnerHtml += post.content;
            resultInnerHtml += '</div></li>';
          });
          resultInnerHtml += '</ul>';
        } else {
          resultInnerHtml += '<div class="search-results-none"><i class="far fa-meh"></i></div>';
        }
        $result.html(resultInnerHtml);
      };
      $input.on('input', searchPost);
      $input.on('keyup', function (e) {
        if (e.keyCode === Stun.utils.codeToKeyCode('Enter')) {
          searchPost();
        }
      });
    }
  });
}

function closeSearch () {
  $('body').css({ overflow: 'auto' });
  $('.search-popup').css({ display: 'none' });
  $('.search-mask').css({ display: 'none' });
}

window.addEventListener('DOMContentLoaded', function () {
  Stun.utils.pjaxReloadLocalSearch = function () {
    $('.header-nav-search').on('click', function (e) {
      e.stopPropagation();
      $('body').css('overflow', 'hidden');
      $('.search-popup')
        .velocity('stop')
        .velocity('transition.expandIn', {
          duration: 300,
          complete: function () {
            $('.search-popup input').focus();
          }
        });
      $('.search-mask')
        .velocity('stop')
        .velocity('transition.fadeIn', {
          duration: 300
        });

      initSearch();
    });
    $('.search-mask, .search-close').on('click', function () {
      closeSearch();
    });
    $(document).on('keydown', function (e) {
      // Escape <=> 27
      if (e.keyCode === Stun.utils.codeToKeyCode('Escape')) {
        closeSearch();
      }
    });
  };

  Stun.utils.pjaxReloadLocalSearch();
}, false);

function safeOpenUrl(url) {
  var newTab = window.open();
  newTab.opener = null;
  newTab.location = url;
}

function extSearch(engine) {
  var engines = {
    google: 'https://www.google.com/search?q=',
    bing: 'https://cn.bing.com/search?q=',
    baidu: 'https://www.baidu.com/s?ie=UTF-8&wd=',
  };
  var host = window.location.host;
  var query = $('.search-input input').val().toLowerCase().trim();
  var uri = engines[engine] + query + ' site:' + host;

  if (query) {
    safeOpenUrl(uri);
  } else {
    Stun.utils.popAlert('warning', '请输入字符');
  }
}

var assistSearchList = window.CONFIG.assistSearch;

if (Array.isArray(assistSearchList)) {
  assistSearchList.forEach(function (name) {
    document.querySelector('.search-btns-item--' + name).addEventListener('click', function () {
      extSearch(name);
    }, false);
  });
}</script><script src="https://cdn.jsdelivr.net/npm/pjax@latest/pjax.min.js"></script><script>window.addEventListener('DOMContentLoaded', function () {
  var pjax = new Pjax({"selectors":["head title","#main",".pjax-reload"],"history":true,"scrollTo":false,"scrollRestoration":false,"cacheBust":false,"debug":false,"currentUrlFullReload":false,"timeout":0});
  // 加载进度条的计时器
  var loadingTimer = null;

  // 重置页面 Y 方向上的滚动偏移量
  document.addEventListener('pjax:send', function () {
    $('.header-nav-menu').removeClass('show');
    if (CONFIG.pjax && CONFIG.pjax.avoidBanner) {
      $('html').velocity('scroll', {
        duration: 500,
        offset: $('#header').height(),
        easing: 'easeInOutCubic'
      });
    }

    var loadingBarWidth = 20;
    var MAX_LOADING_WIDTH = 95;

    $('.loading-bar').addClass('loading');
    $('.loading-bar__progress').css('width', loadingBarWidth + '%');
    clearInterval(loadingTimer);
    loadingTimer = setInterval(function () {
      loadingBarWidth += 3;
      if (loadingBarWidth > MAX_LOADING_WIDTH) {
        loadingBarWidth = MAX_LOADING_WIDTH;
      }
      $('.loading-bar__progress').css('width', loadingBarWidth + '%');
    }, 500);
  }, false);

  window.addEventListener('pjax:complete', function () {
    clearInterval(loadingTimer);
    $('.loading-bar__progress').css('width', '100%');
    $('.loading-bar').removeClass('loading');
    setTimeout(function () {
      $('.loading-bar__progress').css('width', '0');
    }, 400);
    $('link[rel=prefetch], script[data-pjax-rm]').each(function () {
      $(this).remove();
    });
    $('script[data-pjax], #pjax-reload script').each(function () {
      $(this).parent().append($(this).remove());
    });

    if (Stun.utils.pjaxReloadBoot) {
      Stun.utils.pjaxReloadBoot();
    }
    if (Stun.utils.pjaxReloadScroll) {
      Stun.utils.pjaxReloadScroll();
    }
    if (Stun.utils.pjaxReloadSidebar) {
      Stun.utils.pjaxReloadSidebar();
    }
    if (false) {
      if (Stun.utils.pjaxReloadHeader) {
        Stun.utils.pjaxReloadHeader();
      }
      if (Stun.utils.pjaxReloadScrollIcon) {
        Stun.utils.pjaxReloadScrollIcon();
      }
      if (Stun.utils.pjaxReloadLocalSearch) {
        Stun.utils.pjaxReloadLocalSearch();
      }
    }
  }, false);
}, false);</script><div id="pjax-reload"></div><script src="/js/utils.js?v=2.6.2"></script><script src="/js/stun-boot.js?v=2.6.2"></script><script src="/js/scroll.js?v=2.6.2"></script><script src="/js/header.js?v=2.6.2"></script><script src="/js/sidebar.js?v=2.6.2"></script><script type="application/json" src="/search.json"></script></body></html>